/*! For license information please see index.bundle.js.LICENSE.txt */
(()=>{"use strict";var e={45:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(s(825));t.default=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let r=!1;const o=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!r?"":('"'===e&&(r=!r),e))).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new i.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),s||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:r=!0}={}){const o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},191:e=>{e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},261:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(s(660));class r extends i.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const r=i?`${i}.order`:"order",o=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const i=void 0===n?"offset":`${n}.offset`,r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(r,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:r="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(o=this.headers.Accept)&&void 0!==o?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${r}; for="${l}"; options=${a};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=r},279:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const i=n(s(961));t.PostgrestClient=i.default;const r=n(s(45));t.PostgrestQueryBuilder=r.default;const o=n(s(825));t.PostgrestFilterBuilder=o.default;const a=n(s(261));t.PostgrestTransformBuilder=a.default;const l=n(s(660));t.PostgrestBuilder=l.default;const h=n(s(818));t.PostgrestError=h.default,t.default={PostgrestClient:i.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:h.default}},519:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},530:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const n=s(519);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`}},660:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(s(907)),r=n(s(818));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,s,n;let i=null,o=null,a=null,l=e.status,h=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(o="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const n=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),r=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");n&&r&&r.length>1&&(a=parseInt(r[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,a=null,l=406,h="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,l=200,h="OK")}catch(s){404===e.status&&""===t?(l=204,h="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(n=null==i?void 0:i.details)||void 0===n?void 0:n.includes("0 rows"))&&(i=null,l=200,h="OK"),i&&this.shouldThrowOnError)throw new r.default(i)}return{error:i,data:o,count:a,status:l,statusText:h}}));return this.shouldThrowOnError||(s=s.catch((e=>{var t,s,n;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(n=null==e?void 0:e.code)&&void 0!==n?n:""}`},data:null,count:null,status:0,statusText:""}}))),s.then(e,t)}returns(){return this}overrideTypes(){return this}}},818:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class s extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=s},825:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(s(261));class r extends i.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let i="";"plain"===n?i="pl":"phrase"===n?i="ph":"websearch"===n&&(i="w");const r=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${r}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}t.default=r},907:(e,t,s)=>{s.r(t),s.d(t,{Headers:()=>o,Request:()=>a,Response:()=>l,default:()=>r,fetch:()=>i});var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==s.g)return s.g;throw new Error("unable to locate global object")}();const i=n.fetch,r=n.fetch.bind(n),o=n.Headers,a=n.Request,l=n.Response},961:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(s(45)),r=n(s(825)),o=s(530);class a{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},o.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new i.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new a(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;s||n?(o=s?"HEAD":"GET",Object.entries(t).filter((([e,t])=>void 0!==t)).map((([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`])).forEach((([e,t])=>{a.searchParams.append(e,t)}))):(o="POST",l=t);const h=Object.assign({},this.headers);return i&&(h.Prefer=`count=${i}`),new r.default({method:o,url:a,headers:h,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=a}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,s),r.exports}function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,o,a,l,h,u,c,d,p,f,g,m,_,v,y,w,b,k={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},C={duration:.5,overwrite:!1,delay:0},T=1e8,S=1e-8,E=2*Math.PI,x=E/4,I=0,P=Math.sqrt,A=Math.cos,M=Math.sin,O=function(e){return"string"==typeof e},D=function(e){return"function"==typeof e},R=function(e){return"number"==typeof e},L=function(e){return void 0===e},F=function(e){return"object"==typeof e},N=function(e){return!1!==e},B=function(){return"undefined"!=typeof window},j=function(e){return D(e)||O(e)},$="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},V=Array.isArray,q=/(?:-?\.?\d|\.)+/gi,z=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,U=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,H=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,W=/[+-]=-?[.\d]+/,G=/[^,'"\[\]\s]+/gi,Y=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,K={},J={},X=function(e){return(J=Ee(e,K))&&Es},Q=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Z=function(e,t){return!t&&console.warn(e)},ee=function(e,t){return e&&(K[e]=t)&&J&&(J[e]=t)||K},te=function(){return 0},se={suppressEvents:!0,isStart:!0,kill:!1},ne={suppressEvents:!0,kill:!1},ie={suppressEvents:!0},re={},oe=[],ae={},le={},he={},ue=30,ce=[],de="",pe=function(e){var t,s,n=e[0];if(F(n)||D(n)||(e=[e]),!(t=(n._gsap||{}).harness)){for(s=ce.length;s--&&!ce[s].targetTest(n););t=ce[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new $t(e[s],t)))||e.splice(s,1);return e},fe=function(e){return e._gsap||pe(nt(e))[0]._gsap},ge=function(e,t,s){return(s=e[t])&&D(s)?e[t]():L(s)&&e.getAttribute&&e.getAttribute(t)||s},me=function(e,t){return(e=e.split(",")).forEach(t)||e},_e=function(e){return Math.round(1e5*e)/1e5||0},ve=function(e){return Math.round(1e7*e)/1e7||0},ye=function(e,t){var s=t.charAt(0),n=parseFloat(t.substr(2));return e=parseFloat(e),"+"===s?e+n:"-"===s?e-n:"*"===s?e*n:e/n},we=function(e,t){for(var s=t.length,n=0;e.indexOf(t[n])<0&&++n<s;);return n<s},be=function(){var e,t,s=oe.length,n=oe.slice(0);for(ae={},oe.length=0,e=0;e<s;e++)(t=n[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},ke=function(e,t,s,n){oe.length&&!o&&be(),e.render(t,s,n||o&&t<0&&(e._initted||e._startAt)),oe.length&&!o&&be()},Ce=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(G).length<2?t:O(e)?e.trim():e},Te=function(e){return e},Se=function(e,t){for(var s in t)s in e||(e[s]=t[s]);return e},Ee=function(e,t){for(var s in t)e[s]=t[s];return e},xe=function e(t,s){for(var n in s)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(t[n]=F(s[n])?e(t[n]||(t[n]={}),s[n]):s[n]);return t},Ie=function(e,t){var s,n={};for(s in e)s in t||(n[s]=e[s]);return n},Pe=function(e){var t,s=e.parent||l,n=e.keyframes?(t=V(e.keyframes),function(e,s){for(var n in s)n in e||"duration"===n&&t||"ease"===n||(e[n]=s[n])}):Se;if(N(e.inherit))for(;s;)n(e,s.vars.defaults),s=s.parent||s._dp;return e},Ae=function(e,t,s,n,i){void 0===s&&(s="_first"),void 0===n&&(n="_last");var r,o=e[n];if(i)for(r=t[i];o&&o[i]>r;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[s],e[s]=t),t._next?t._next._prev=t:e[n]=t,t._prev=o,t.parent=t._dp=e,t},Me=function(e,t,s,n){void 0===s&&(s="_first"),void 0===n&&(n="_last");var i=t._prev,r=t._next;i?i._next=r:e[s]===t&&(e[s]=r),r?r._prev=i:e[n]===t&&(e[n]=i),t._next=t._prev=t.parent=null},Oe=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},De=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var s=e;s;)s._dirty=1,s=s.parent;return e},Re=function(e,t,s,n){return e._startAt&&(o?e._startAt.revert(ne):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,n))},Le=function e(t){return!t||t._ts&&e(t.parent)},Fe=function(e){return e._repeat?Ne(e._tTime,e=e.duration()+e._rDelay)*e:0},Ne=function(e,t){var s=Math.floor(e=ve(e/t));return e&&s===e?s-1:s},Be=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},je=function(e){return e._end=ve(e._start+(e._tDur/Math.abs(e._ts||e._rts||S)||0))},$e=function(e,t){var s=e._dp;return s&&s.smoothChildTiming&&e._ts&&(e._start=ve(s._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),je(e),s._dirty||De(s,e)),e},Ve=function(e,t){var s;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(s=Be(e.rawTime(),t),(!t._dur||Ze(0,t.totalDuration(),s)-t._tTime>S)&&t.render(s,!0)),De(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(s=e;s._dp;)s.rawTime()>=0&&s.totalTime(s._tTime),s=s._dp;e._zTime=-1e-8}},qe=function(e,t,s,n){return t.parent&&Oe(t),t._start=ve((R(s)?s:s||e!==l?Je(e,s,t):e._time)+t._delay),t._end=ve(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Ae(e,t,"_first","_last",e._sort?"_start":0),We(t)||(e._recent=t),n||Ve(e,t),e._ts<0&&$e(e,e._tTime),e},ze=function(e,t){return(K.ScrollTrigger||Q("scrollTrigger",t))&&K.ScrollTrigger.create(t,e)},Ue=function(e,t,s,n,i){return Yt(e,t,i),e._initted?!s&&e._pt&&!o&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&p!==xt.frame?(oe.push(e),e._lazy=[i,n],1):void 0:1},He=function e(t){var s=t.parent;return s&&s._ts&&s._initted&&!s._lock&&(s.rawTime()<0||e(s))},We=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Ge=function(e,t,s,n){var i=e._repeat,r=ve(t)||0,o=e._tTime/e._tDur;return o&&!n&&(e._time*=r/e._dur),e._dur=r,e._tDur=i?i<0?1e10:ve(r*(i+1)+e._rDelay*i):r,o>0&&!n&&$e(e,e._tTime=e._tDur*o),e.parent&&je(e),s||De(e.parent,e),e},Ye=function(e){return e instanceof qt?De(e):Ge(e,e._dur)},Ke={_start:0,endTime:te,totalDuration:te},Je=function e(t,s,n){var i,r,o,a=t.labels,l=t._recent||Ke,h=t.duration()>=T?l.endTime(!1):t._dur;return O(s)&&(isNaN(s)||s in a)?(r=s.charAt(0),o="%"===s.substr(-1),i=s.indexOf("="),"<"===r||">"===r?(i>=0&&(s=s.replace(/=/,"")),("<"===r?l._start:l.endTime(l._repeat>=0))+(parseFloat(s.substr(1))||0)*(o?(i<0?l:n).totalDuration()/100:1)):i<0?(s in a||(a[s]=h),a[s]):(r=parseFloat(s.charAt(i-1)+s.substr(i+1)),o&&n&&(r=r/100*(V(n)?n[0]:n).totalDuration()),i>1?e(t,s.substr(0,i-1),n)+r:h+r)):null==s?h:+s},Xe=function(e,t,s){var n,i,r=R(t[1]),o=(r?2:1)+(e<2?0:1),a=t[o];if(r&&(a.duration=t[1]),a.parent=s,e){for(n=a,i=s;i&&!("immediateRender"in n);)n=i.vars.defaults||{},i=N(i.vars.inherit)&&i.parent;a.immediateRender=N(n.immediateRender),e<2?a.runBackwards=1:a.startAt=t[o-1]}return new Zt(t[0],a,t[o+1])},Qe=function(e,t){return e||0===e?t(e):t},Ze=function(e,t,s){return s<e?e:s>t?t:s},et=function(e,t){return O(e)&&(t=Y.exec(e))?t[1]:""},tt=[].slice,st=function(e,t){return e&&F(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&F(e[0]))&&!e.nodeType&&e!==h},nt=function(e,t,s){return a&&!t&&a.selector?a.selector(e):!O(e)||s||!u&&It()?V(e)?function(e,t,s){return void 0===s&&(s=[]),e.forEach((function(e){var n;return O(e)&&!t||st(e,1)?(n=s).push.apply(n,nt(e)):s.push(e)}))||s}(e,s):st(e)?tt.call(e,0):e?[e]:[]:tt.call((t||c).querySelectorAll(e),0)},it=function(e){return e=nt(e)[0]||Z("Invalid scope")||{},function(t){var s=e.current||e.nativeElement||e;return nt(t,s.querySelectorAll?s:s===e?Z("Invalid scope")||c.createElement("div"):e)}},rt=function(e){return e.sort((function(){return.5-Math.random()}))},ot=function(e){if(D(e))return e;var t=F(e)?e:{each:e},s=Lt(t.ease),n=t.from||0,i=parseFloat(t.base)||0,r={},o=n>0&&n<1,a=isNaN(n)||o,l=t.axis,h=n,u=n;return O(n)?h=u={center:.5,edges:.5,end:1}[n]||0:!o&&a&&(h=n[0],u=n[1]),function(e,o,c){var d,p,f,g,m,_,v,y,w,b=(c||t).length,k=r[b];if(!k){if(!(w="auto"===t.grid?0:(t.grid||[1,T])[1])){for(v=-T;v<(v=c[w++].getBoundingClientRect().left)&&w<b;);w<b&&w--}for(k=r[b]=[],d=a?Math.min(w,b)*h-.5:n%w,p=w===T?0:a?b*u/w-.5:n/w|0,v=0,y=T,_=0;_<b;_++)f=_%w-d,g=p-(_/w|0),k[_]=m=l?Math.abs("y"===l?g:f):P(f*f+g*g),m>v&&(v=m),m<y&&(y=m);"random"===n&&rt(k),k.max=v-y,k.min=y,k.v=b=(parseFloat(t.amount)||parseFloat(t.each)*(w>b?b-1:l?"y"===l?b/w:w:Math.max(w,b/w))||0)*("edges"===n?-1:1),k.b=b<0?i-b:i,k.u=et(t.amount||t.each)||0,s=s&&b<0?Dt(s):s}return b=(k[e]-k.min)/k.max||0,ve(k.b+(s?s(b):b)*k.v)+k.u}},at=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(s){var n=ve(Math.round(parseFloat(s)/e)*e*t);return(n-n%1)/t+(R(s)?0:et(s))}},lt=function(e,t){var s,n,i=V(e);return!i&&F(e)&&(s=i=e.radius||T,e.values?(e=nt(e.values),(n=!R(e[0]))&&(s*=s)):e=at(e.increment)),Qe(t,i?D(e)?function(t){return n=e(t),Math.abs(n-t)<=s?n:t}:function(t){for(var i,r,o=parseFloat(n?t.x:t),a=parseFloat(n?t.y:0),l=T,h=0,u=e.length;u--;)(i=n?(i=e[u].x-o)*i+(r=e[u].y-a)*r:Math.abs(e[u]-o))<l&&(l=i,h=u);return h=!s||l<=s?e[h]:t,n||h===t||R(t)?h:h+et(t)}:at(e))},ht=function(e,t,s,n){return Qe(V(e)?!t:!0===s?!!(s=0):!n,(function(){return V(e)?e[~~(Math.random()*e.length)]:(s=s||1e-5)&&(n=s<1?Math.pow(10,(s+"").length-2):1)&&Math.floor(Math.round((e-s/2+Math.random()*(t-e+.99*s))/s)*s*n)/n}))},ut=function(e,t,s){return Qe(s,(function(s){return e[~~t(s)]}))},ct=function(e){for(var t,s,n,i,r=0,o="";~(t=e.indexOf("random(",r));)n=e.indexOf(")",t),i="["===e.charAt(t+7),s=e.substr(t+7,n-t-7).match(i?G:q),o+=e.substr(r,t-r)+ht(i?s:+s[0],i?0:+s[1],+s[2]||1e-5),r=n+1;return o+e.substr(r,e.length-r)},dt=function(e,t,s,n,i){var r=t-e,o=n-s;return Qe(i,(function(t){return s+((t-e)/r*o||0)}))},pt=function(e,t,s){var n,i,r,o=e.labels,a=T;for(n in o)(i=o[n]-t)<0==!!s&&i&&a>(i=Math.abs(i))&&(r=n,a=i);return r},ft=function(e,t,s){var n,i,r,o=e.vars,l=o[t],h=a,u=e._ctx;if(l)return n=o[t+"Params"],i=o.callbackScope||e,s&&oe.length&&be(),u&&(a=u),r=n?l.apply(i,n):l.call(i),a=h,r},gt=function(e){return Oe(e),e.scrollTrigger&&e.scrollTrigger.kill(!!o),e.progress()<1&&ft(e,"onInterrupt"),e},mt=[],_t=function(e){if(e)if(e=!e.name&&e.default||e,B()||e.headless){var t=e.name,s=D(e),n=t&&!s&&e.init?function(){this._props=[]}:e,i={init:te,render:ls,add:Wt,kill:us,modifier:hs,rawVars:0},r={targetTest:0,get:0,getSetter:is,aliases:{},register:0};if(It(),e!==n){if(le[t])return;Se(n,Se(Ie(e,i),r)),Ee(n.prototype,Ee(i,Ie(e,r))),le[n.prop=t]=n,e.targetTest&&(ce.push(n),re[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}ee(t,n),e.register&&e.register(Es,n,ps)}else mt.push(e)},vt=255,yt={aqua:[0,vt,vt],lime:[0,vt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,vt],navy:[0,0,128],white:[vt,vt,vt],olive:[128,128,0],yellow:[vt,vt,0],orange:[vt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[vt,0,0],pink:[vt,192,203],cyan:[0,vt,vt],transparent:[vt,vt,vt,0]},wt=function(e,t,s){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(s-t)*e*6:e<.5?s:3*e<2?t+(s-t)*(2/3-e)*6:t)*vt+.5|0},bt=function(e,t,s){var n,i,r,o,a,l,h,u,c,d,p=e?R(e)?[e>>16,e>>8&vt,e&vt]:0:yt.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),yt[e])p=yt[e];else if("#"===e.charAt(0)){if(e.length<6&&(n=e.charAt(1),i=e.charAt(2),r=e.charAt(3),e="#"+n+n+i+i+r+r+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&vt,p&vt,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&vt,e&vt]}else if("hsl"===e.substr(0,3))if(p=d=e.match(q),t){if(~e.indexOf("="))return p=e.match(z),s&&p.length<4&&(p[3]=1),p}else o=+p[0]%360/360,a=+p[1]/100,n=2*(l=+p[2]/100)-(i=l<=.5?l*(a+1):l+a-l*a),p.length>3&&(p[3]*=1),p[0]=wt(o+1/3,n,i),p[1]=wt(o,n,i),p[2]=wt(o-1/3,n,i);else p=e.match(q)||yt.transparent;p=p.map(Number)}return t&&!d&&(n=p[0]/vt,i=p[1]/vt,r=p[2]/vt,l=((h=Math.max(n,i,r))+(u=Math.min(n,i,r)))/2,h===u?o=a=0:(c=h-u,a=l>.5?c/(2-h-u):c/(h+u),o=h===n?(i-r)/c+(i<r?6:0):h===i?(r-n)/c+2:(n-i)/c+4,o*=60),p[0]=~~(o+.5),p[1]=~~(100*a+.5),p[2]=~~(100*l+.5)),s&&p.length<4&&(p[3]=1),p},kt=function(e){var t=[],s=[],n=-1;return e.split(Tt).forEach((function(e){var i=e.match(U)||[];t.push.apply(t,i),s.push(n+=i.length+1)})),t.c=s,t},Ct=function(e,t,s){var n,i,r,o,a="",l=(e+a).match(Tt),h=t?"hsla(":"rgba(",u=0;if(!l)return e;if(l=l.map((function(e){return(e=bt(e,t,1))&&h+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),s&&(r=kt(e),(n=s.c).join(a)!==r.c.join(a)))for(o=(i=e.replace(Tt,"1").split(U)).length-1;u<o;u++)a+=i[u]+(~n.indexOf(u)?l.shift()||h+"0,0,0,0)":(r.length?r:l.length?l:s).shift());if(!i)for(o=(i=e.split(Tt)).length-1;u<o;u++)a+=i[u]+l[u];return a+i[o]},Tt=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in yt)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),St=/hsl[a]?\(/,Et=function(e){var t,s=e.join(" ");if(Tt.lastIndex=0,Tt.test(s))return t=St.test(s),e[1]=Ct(e[1],t),e[0]=Ct(e[0],t,kt(e[1])),!0},xt=function(){var e,t,s,n,i,r,o=Date.now,a=500,l=33,p=o(),f=p,m=1e3/240,_=m,v=[],y=function s(h){var u,c,d,g,y=o()-f,w=!0===h;if((y>a||y<0)&&(p+=y-l),((u=(d=(f+=y)-p)-_)>0||w)&&(g=++n.frame,i=d-1e3*n.time,n.time=d/=1e3,_+=u+(u>=m?4:m-u),c=1),w||(e=t(s)),c)for(r=0;r<v.length;r++)v[r](d,i,g,h)};return n={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(e){return i/(1e3/(e||60))},wake:function(){d&&(!u&&B()&&(h=u=window,c=h.document||{},K.gsap=Es,(h.gsapVersions||(h.gsapVersions=[])).push(Es.version),X(J||h.GreenSockGlobals||!h.gsap&&h||{}),mt.forEach(_t)),s="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,e&&n.sleep(),t=s||function(e){return setTimeout(e,_-1e3*n.time+1|0)},g=1,y(2))},sleep:function(){(s?cancelAnimationFrame:clearTimeout)(e),g=0,t=te},lagSmoothing:function(e,t){a=e||1/0,l=Math.min(t||33,a)},fps:function(e){m=1e3/(e||240),_=1e3*n.time+m},add:function(e,t,s){var i=t?function(t,s,r,o){e(t,s,r,o),n.remove(i)}:e;return n.remove(e),v[s?"unshift":"push"](i),It(),i},remove:function(e,t){~(t=v.indexOf(e))&&v.splice(t,1)&&r>=t&&r--},_listeners:v}}(),It=function(){return!g&&xt.wake()},Pt={},At=/^[\d.\-M][\d.\-,\s]/,Mt=/["']/g,Ot=function(e){for(var t,s,n,i={},r=e.substr(1,e.length-3).split(":"),o=r[0],a=1,l=r.length;a<l;a++)s=r[a],t=a!==l-1?s.lastIndexOf(","):s.length,n=s.substr(0,t),i[o]=isNaN(n)?n.replace(Mt,"").trim():+n,o=s.substr(t+1).trim();return i},Dt=function(e){return function(t){return 1-e(1-t)}},Rt=function e(t,s){for(var n,i=t._first;i;)i instanceof qt?e(i,s):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===s||(i.timeline?e(i.timeline,s):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=s)),i=i._next},Lt=function(e,t){return e&&(D(e)?e:Pt[e]||function(e){var t,s,n,i,r=(e+"").split("("),o=Pt[r[0]];return o&&r.length>1&&o.config?o.config.apply(null,~e.indexOf("{")?[Ot(r[1])]:(t=e,s=t.indexOf("(")+1,n=t.indexOf(")"),i=t.indexOf("(",s),t.substring(s,~i&&i<n?t.indexOf(")",n+1):n)).split(",").map(Ce)):Pt._CE&&At.test(e)?Pt._CE("",e):o}(e))||t},Ft=function(e,t,s,n){void 0===s&&(s=function(e){return 1-t(1-e)}),void 0===n&&(n=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,r={easeIn:t,easeOut:s,easeInOut:n};return me(e,(function(e){for(var t in Pt[e]=K[e]=r,Pt[i=e.toLowerCase()]=s,r)Pt[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=Pt[e+"."+t]=r[t]})),r},Nt=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},Bt=function e(t,s,n){var i=s>=1?s:1,r=(n||(t?.3:.45))/(s<1?s:1),o=r/E*(Math.asin(1/i)||0),a=function(e){return 1===e?1:i*Math.pow(2,-10*e)*M((e-o)*r)+1},l="out"===t?a:"in"===t?function(e){return 1-a(1-e)}:Nt(a);return r=E/r,l.config=function(s,n){return e(t,s,n)},l},jt=function e(t,s){void 0===s&&(s=1.70158);var n=function(e){return e?--e*e*((s+1)*e+s)+1:0},i="out"===t?n:"in"===t?function(e){return 1-n(1-e)}:Nt(n);return i.config=function(s){return e(t,s)},i};me("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var s=t<5?t+1:t;Ft(e+",Power"+(s-1),t?function(e){return Math.pow(e,s)}:function(e){return e},(function(e){return 1-Math.pow(1-e,s)}),(function(e){return e<.5?Math.pow(2*e,s)/2:1-Math.pow(2*(1-e),s)/2}))})),Pt.Linear.easeNone=Pt.none=Pt.Linear.easeIn,Ft("Elastic",Bt("in"),Bt("out"),Bt()),m=7.5625,y=2*(v=1/(_=2.75)),w=2.5*v,Ft("Bounce",(function(e){return 1-b(1-e)}),b=function(e){return e<v?m*e*e:e<y?m*Math.pow(e-1.5/_,2)+.75:e<w?m*(e-=2.25/_)*e+.9375:m*Math.pow(e-2.625/_,2)+.984375}),Ft("Expo",(function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)})),Ft("Circ",(function(e){return-(P(1-e*e)-1)})),Ft("Sine",(function(e){return 1===e?1:1-A(e*x)})),Ft("Back",jt("in"),jt("out"),jt()),Pt.SteppedEase=Pt.steps=K.SteppedEase={config:function(e,t){void 0===e&&(e=1);var s=1/e,n=e+(t?0:1),i=t?1:0;return function(e){return((n*Ze(0,.99999999,e)|0)+i)*s}}},C.ease=Pt["quad.out"],me("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return de+=e+","+e+"Params,"}));var $t=function(e,t){this.id=I++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:ge,this.set=t?t.getSetter:is},Vt=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Ge(this,+e.duration,1,1),this.data=e.data,a&&(this._ctx=a,a.data.push(this)),g||xt.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Ge(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(It(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for($e(this,e),!s._dp||s.parent||Ve(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&qe(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===S||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),ke(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Fe(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Fe(this),t):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,t){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*s,t):this._repeat?Ne(this._tTime,s)+1:1},t.timeScale=function(e,t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var s=this.parent&&this._ts?Be(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(Ze(-Math.abs(this._delay),this._tDur,s),!1!==t),je(this),function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(It(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==S&&(this._tTime-=S)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&qe(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(N(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Be(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=ie);var t=o;return o=e,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),o=t,this},t.globalTime=function(e){for(var t=this,s=arguments.length?e:t.rawTime();t;)s=t._start+s/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):s},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,Ye(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,Ye(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(Je(this,e),N(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,N(t)),this._dur||(this._zTime=-1e-8),this},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,s=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=s&&e<this.endTime(!0)-S))},t.eventCallback=function(e,t,s){var n=this.vars;return arguments.length>1?(t?(n[e]=t,s&&(n[e+"Params"]=s),"onUpdate"===e&&(this._onUpdate=t)):delete n[e],this):n[e]},t.then=function(e){var t=this;return new Promise((function(s){var n=D(e)?e:Te,i=function(){var e=t.then;t.then=null,D(n)&&(n=n(t))&&(n.then||n===t)&&(t.then=e),s(n),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i}))},t.kill=function(){gt(this)},e}();Se(Vt.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var qt=function(e){function t(t,s){var i;return void 0===t&&(t={}),(i=e.call(this,t)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=N(t.sortChildren),l&&qe(t.parent||l,n(i),s),t.reversed&&i.reverse(),t.paused&&i.paused(!0),t.scrollTrigger&&ze(n(i),t.scrollTrigger),i}i(t,e);var s=t.prototype;return s.to=function(e,t,s){return Xe(0,arguments,this),this},s.from=function(e,t,s){return Xe(1,arguments,this),this},s.fromTo=function(e,t,s,n){return Xe(2,arguments,this),this},s.set=function(e,t,s){return t.duration=0,t.parent=this,Pe(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new Zt(e,t,Je(this,s),1),this},s.call=function(e,t,s){return qe(this,Zt.delayedCall(0,e,t),s)},s.staggerTo=function(e,t,s,n,i,r,o){return s.duration=t,s.stagger=s.stagger||n,s.onComplete=r,s.onCompleteParams=o,s.parent=this,new Zt(e,s,Je(this,i)),this},s.staggerFrom=function(e,t,s,n,i,r,o){return s.runBackwards=1,Pe(s).immediateRender=N(s.immediateRender),this.staggerTo(e,t,s,n,i,r,o)},s.staggerFromTo=function(e,t,s,n,i,r,o,a){return n.startAt=s,Pe(n).immediateRender=N(n.immediateRender),this.staggerTo(e,t,n,i,r,o,a)},s.render=function(e,t,s){var n,i,r,a,h,u,c,d,p,f,g,m,_=this._time,v=this._dirty?this.totalDuration():this._tDur,y=this._dur,w=e<=0?0:ve(e),b=this._zTime<0!=e<0&&(this._initted||!y);if(this!==l&&w>v&&e>=0&&(w=v),w!==this._tTime||s||b){if(_!==this._time&&y&&(w+=this._time-_,e+=this._time-_),n=w,p=this._start,u=!(d=this._ts),b&&(y||(_=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(g=this._yoyo,h=y+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*h+e,t,s);if(n=ve(w%h),w===v?(a=this._repeat,n=y):((a=~~(f=ve(w/h)))&&a===f&&(n=y,a--),n>y&&(n=y)),f=Ne(this._tTime,h),!_&&this._tTime&&f!==a&&this._tTime-f*h-this._dur<=0&&(f=a),g&&1&a&&(n=y-n,m=1),a!==f&&!this._lock){var k=g&&1&f,C=k===(g&&1&a);if(a<f&&(k=!k),_=k?0:w%y?y:w,this._lock=1,this.render(_||(m?0:ve(a*h)),t,!y)._lock=0,this._tTime=w,!t&&this.parent&&ft(this,"onRepeat"),this.vars.repeatRefresh&&!m&&(this.invalidate()._lock=1),_&&_!==this._time||u!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(y=this._dur,v=this._tDur,C&&(this._lock=2,_=k?y:-1e-4,this.render(_,!0),this.vars.repeatRefresh&&!m&&this.invalidate()),this._lock=0,!this._ts&&!u)return this;Rt(this,m)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,s){var n;if(s>t)for(n=e._first;n&&n._start<=s;){if("isPause"===n.data&&n._start>t)return n;n=n._next}else for(n=e._last;n&&n._start>=s;){if("isPause"===n.data&&n._start<t)return n;n=n._prev}}(this,ve(_),ve(n)),c&&(w-=n-(n=c._start))),this._tTime=w,this._time=n,this._act=!d,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,_=0),!_&&n&&!t&&!a&&(ft(this,"onStart"),this._tTime!==w))return this;if(n>=_&&e>=0)for(i=this._first;i;){if(r=i._next,(i._act||n>=i._start)&&i._ts&&c!==i){if(i.parent!==this)return this.render(e,t,s);if(i.render(i._ts>0?(n-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(n-i._start)*i._ts,t,s),n!==this._time||!this._ts&&!u){c=0,r&&(w+=this._zTime=-1e-8);break}}i=r}else{i=this._last;for(var T=e<0?e:n;i;){if(r=i._prev,(i._act||T<=i._end)&&i._ts&&c!==i){if(i.parent!==this)return this.render(e,t,s);if(i.render(i._ts>0?(T-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(T-i._start)*i._ts,t,s||o&&(i._initted||i._startAt)),n!==this._time||!this._ts&&!u){c=0,r&&(w+=this._zTime=T?-1e-8:S);break}}i=r}}if(c&&!t&&(this.pause(),c.render(n>=_?0:-1e-8)._zTime=n>=_?1:-1,this._ts))return this._start=p,je(this),this.render(e,t,s);this._onUpdate&&!t&&ft(this,"onUpdate",!0),(w===v&&this._tTime>=this.totalDuration()||!w&&_)&&(p!==this._start&&Math.abs(d)===Math.abs(this._ts)||this._lock||((e||!y)&&(w===v&&this._ts>0||!w&&this._ts<0)&&Oe(this,1),t||e<0&&!_||!w&&!_&&v||(ft(this,w===v&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(w<v&&this.timeScale()>0)&&this._prom())))}return this},s.add=function(e,t){var s=this;if(R(t)||(t=Je(this,t,e)),!(e instanceof Vt)){if(V(e))return e.forEach((function(e){return s.add(e,t)})),this;if(O(e))return this.addLabel(e,t);if(!D(e))return this;e=Zt.delayedCall(0,e)}return this!==e?qe(this,e,t):this},s.getChildren=function(e,t,s,n){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===s&&(s=!0),void 0===n&&(n=-T);for(var i=[],r=this._first;r;)r._start>=n&&(r instanceof Zt?t&&i.push(r):(s&&i.push(r),e&&i.push.apply(i,r.getChildren(!0,t,s)))),r=r._next;return i},s.getById=function(e){for(var t=this.getChildren(1,1,1),s=t.length;s--;)if(t[s].vars.id===e)return t[s]},s.remove=function(e){return O(e)?this.removeLabel(e):D(e)?this.killTweensOf(e):(e.parent===this&&Me(this,e),e===this._recent&&(this._recent=this._last),De(this))},s.totalTime=function(t,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ve(xt.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,s),this._forcing=0,this):this._tTime},s.addLabel=function(e,t){return this.labels[e]=Je(this,t),this},s.removeLabel=function(e){return delete this.labels[e],this},s.addPause=function(e,t,s){var n=Zt.delayedCall(0,t||te,s);return n.data="isPause",this._hasPause=1,qe(this,n,Je(this,e))},s.removePause=function(e){var t=this._first;for(e=Je(this,e);t;)t._start===e&&"isPause"===t.data&&Oe(t),t=t._next},s.killTweensOf=function(e,t,s){for(var n=this.getTweensOf(e,s),i=n.length;i--;)zt!==n[i]&&n[i].kill(e,t);return this},s.getTweensOf=function(e,t){for(var s,n=[],i=nt(e),r=this._first,o=R(t);r;)r instanceof Zt?we(r._targets,i)&&(o?(!zt||r._initted&&r._ts)&&r.globalTime(0)<=t&&r.globalTime(r.totalDuration())>t:!t||r.isActive())&&n.push(r):(s=r.getTweensOf(i,t)).length&&n.push.apply(n,s),r=r._next;return n},s.tweenTo=function(e,t){t=t||{};var s,n=this,i=Je(n,e),r=t,o=r.startAt,a=r.onStart,l=r.onStartParams,h=r.immediateRender,u=Zt.to(n,Se({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(o&&"time"in o?o.time:n._time))/n.timeScale())||S,onStart:function(){if(n.pause(),!s){var e=t.duration||Math.abs((i-(o&&"time"in o?o.time:n._time))/n.timeScale());u._dur!==e&&Ge(u,e,0,1).render(u._time,!0,!0),s=1}a&&a.apply(u,l||[])}},t));return h?u.render(0):u},s.tweenFromTo=function(e,t,s){return this.tweenTo(t,Se({startAt:{time:Je(this,e)}},s))},s.recent=function(){return this._recent},s.nextLabel=function(e){return void 0===e&&(e=this._time),pt(this,Je(this,e))},s.previousLabel=function(e){return void 0===e&&(e=this._time),pt(this,Je(this,e),1)},s.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+S)},s.shiftChildren=function(e,t,s){void 0===s&&(s=0);for(var n,i=this._first,r=this.labels;i;)i._start>=s&&(i._start+=e,i._end+=e),i=i._next;if(t)for(n in r)r[n]>=s&&(r[n]+=e);return De(this)},s.invalidate=function(t){var s=this._first;for(this._lock=0;s;)s.invalidate(t),s=s._next;return e.prototype.invalidate.call(this,t)},s.clear=function(e){void 0===e&&(e=!0);for(var t,s=this._first;s;)t=s._next,this.remove(s),s=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),De(this)},s.totalDuration=function(e){var t,s,n,i=0,r=this,o=r._last,a=T;if(arguments.length)return r.timeScale((r._repeat<0?r.duration():r.totalDuration())/(r.reversed()?-e:e));if(r._dirty){for(n=r.parent;o;)t=o._prev,o._dirty&&o.totalDuration(),(s=o._start)>a&&r._sort&&o._ts&&!r._lock?(r._lock=1,qe(r,o,s-o._delay,1)._lock=0):a=s,s<0&&o._ts&&(i-=s,(!n&&!r._dp||n&&n.smoothChildTiming)&&(r._start+=s/r._ts,r._time-=s,r._tTime-=s),r.shiftChildren(-s,!1,-1/0),a=0),o._end>i&&o._ts&&(i=o._end),o=t;Ge(r,r===l&&r._time>i?r._time:i,1,1),r._dirty=0}return r._tDur},t.updateRoot=function(e){if(l._ts&&(ke(l,Be(e,l)),p=xt.frame),xt.frame>=ue){ue+=k.autoSleep||120;var t=l._first;if((!t||!t._ts)&&k.autoSleep&&xt._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||xt.sleep()}}},t}(Vt);Se(qt.prototype,{_lock:0,_hasPause:0,_forcing:0});var zt,Ut,Ht=function(e,t,s,n,i,r,o){var a,l,h,u,c,d,p,f,g=new ps(this._pt,e,t,0,1,as,null,i),m=0,_=0;for(g.b=s,g.e=n,s+="",(p=~(n+="").indexOf("random("))&&(n=ct(n)),r&&(r(f=[s,n],e,t),s=f[0],n=f[1]),l=s.match(H)||[];a=H.exec(n);)u=a[0],c=n.substring(m,a.index),h?h=(h+1)%5:"rgba("===c.substr(-5)&&(h=1),u!==l[_++]&&(d=parseFloat(l[_-1])||0,g._pt={_next:g._pt,p:c||1===_?c:",",s:d,c:"="===u.charAt(1)?ye(d,u)-d:parseFloat(u)-d,m:h&&h<4?Math.round:0},m=H.lastIndex);return g.c=m<n.length?n.substring(m,n.length):"",g.fp=o,(W.test(n)||p)&&(g.e=0),this._pt=g,g},Wt=function(e,t,s,n,i,r,o,a,l,h){D(n)&&(n=n(i||0,e,r));var u,c=e[t],d="get"!==s?s:D(c)?l?e[t.indexOf("set")||!D(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():c,p=D(c)?l?ss:ts:es;if(O(n)&&(~n.indexOf("random(")&&(n=ct(n)),"="===n.charAt(1)&&((u=ye(d,n)+(et(d)||0))||0===u)&&(n=u)),!h||d!==n||Ut)return isNaN(d*n)||""===n?(!c&&!(t in e)&&Q(t,n),Ht.call(this,e,t,d,n,p,a||k.stringFilter,l)):(u=new ps(this._pt,e,t,+d||0,n-(d||0),"boolean"==typeof c?os:rs,0,p),l&&(u.fp=l),o&&u.modifier(o,this,e),this._pt=u)},Gt=function(e,t,s,n,i,r){var o,a,l,h;if(le[e]&&!1!==(o=new le[e]).init(i,o.rawVars?t[e]:function(e,t,s,n,i){if(D(e)&&(e=Jt(e,i,t,s,n)),!F(e)||e.style&&e.nodeType||V(e)||$(e))return O(e)?Jt(e,i,t,s,n):e;var r,o={};for(r in e)o[r]=Jt(e[r],i,t,s,n);return o}(t[e],n,i,r,s),s,n,r)&&(s._pt=a=new ps(s._pt,i,e,0,1,o.render,o,0,o.priority),s!==f))for(l=s._ptLookup[s._targets.indexOf(i)],h=o._props.length;h--;)l[o._props[h]]=a;return o},Yt=function e(t,s,n){var i,a,h,u,c,d,p,f,g,m,_,v,y,w=t.vars,b=w.ease,k=w.startAt,E=w.immediateRender,x=w.lazy,I=w.onUpdate,P=w.runBackwards,A=w.yoyoEase,M=w.keyframes,O=w.autoRevert,D=t._dur,R=t._startAt,L=t._targets,F=t.parent,B=F&&"nested"===F.data?F.vars.targets:L,j="auto"===t._overwrite&&!r,$=t.timeline;if($&&(!M||!b)&&(b="none"),t._ease=Lt(b,C.ease),t._yEase=A?Dt(Lt(!0===A?b:A,C.ease)):0,A&&t._yoyo&&!t._repeat&&(A=t._yEase,t._yEase=t._ease,t._ease=A),t._from=!$&&!!w.runBackwards,!$||M&&!w.stagger){if(v=(f=L[0]?fe(L[0]).harness:0)&&w[f.prop],i=Ie(w,re),R&&(R._zTime<0&&R.progress(1),s<0&&P&&E&&!O?R.render(-1,!0):R.revert(P&&D?ne:se),R._lazy=0),k){if(Oe(t._startAt=Zt.set(L,Se({data:"isStart",overwrite:!1,parent:F,immediateRender:!0,lazy:!R&&N(x),startAt:null,delay:0,onUpdate:I&&function(){return ft(t,"onUpdate")},stagger:0},k))),t._startAt._dp=0,t._startAt._sat=t,s<0&&(o||!E&&!O)&&t._startAt.revert(ne),E&&D&&s<=0&&n<=0)return void(s&&(t._zTime=s))}else if(P&&D&&!R)if(s&&(E=!1),h=Se({overwrite:!1,data:"isFromStart",lazy:E&&!R&&N(x),immediateRender:E,stagger:0,parent:F},i),v&&(h[f.prop]=v),Oe(t._startAt=Zt.set(L,h)),t._startAt._dp=0,t._startAt._sat=t,s<0&&(o?t._startAt.revert(ne):t._startAt.render(-1,!0)),t._zTime=s,E){if(!s)return}else e(t._startAt,S,S);for(t._pt=t._ptCache=0,x=D&&N(x)||x&&!D,a=0;a<L.length;a++){if(p=(c=L[a])._gsap||pe(L)[a]._gsap,t._ptLookup[a]=m={},ae[p.id]&&oe.length&&be(),_=B===L?a:B.indexOf(c),f&&!1!==(g=new f).init(c,v||i,t,_,B)&&(t._pt=u=new ps(t._pt,c,g.name,0,1,g.render,g,0,g.priority),g._props.forEach((function(e){m[e]=u})),g.priority&&(d=1)),!f||v)for(h in i)le[h]&&(g=Gt(h,i,t,_,c,B))?g.priority&&(d=1):m[h]=u=Wt.call(t,c,h,"get",i[h],_,B,0,w.stringFilter);t._op&&t._op[a]&&t.kill(c,t._op[a]),j&&t._pt&&(zt=t,l.killTweensOf(c,m,t.globalTime(s)),y=!t.parent,zt=0),t._pt&&x&&(ae[p.id]=1)}d&&ds(t),t._onInit&&t._onInit(t)}t._onUpdate=I,t._initted=(!t._op||t._pt)&&!y,M&&s<=0&&$.render(T,!0,!0)},Kt=function(e,t,s,n){var i,r,o=t.ease||n||"power1.inOut";if(V(t))r=s[e]||(s[e]=[]),t.forEach((function(e,s){return r.push({t:s/(t.length-1)*100,v:e,e:o})}));else for(i in t)r=s[i]||(s[i]=[]),"ease"===i||r.push({t:parseFloat(e),v:t[i],e:o})},Jt=function(e,t,s,n,i){return D(e)?e.call(t,s,n,i):O(e)&&~e.indexOf("random(")?ct(e):e},Xt=de+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Qt={};me(Xt+",id,stagger,delay,duration,paused,scrollTrigger",(function(e){return Qt[e]=1}));var Zt=function(e){function t(t,s,i,o){var a;"number"==typeof s&&(i.duration=s,s=i,i=null);var h,u,c,d,p,f,g,m,_=(a=e.call(this,o?s:Pe(s))||this).vars,v=_.duration,y=_.delay,w=_.immediateRender,b=_.stagger,C=_.overwrite,T=_.keyframes,S=_.defaults,E=_.scrollTrigger,x=_.yoyoEase,I=s.parent||l,P=(V(t)||$(t)?R(t[0]):"length"in s)?[t]:nt(t);if(a._targets=P.length?pe(P):Z("GSAP target "+t+" not found. https://gsap.com",!k.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=C,T||b||j(v)||j(y)){if(s=a.vars,(h=a.timeline=new qt({data:"nested",defaults:S||{},targets:I&&"nested"===I.data?I.vars.targets:P})).kill(),h.parent=h._dp=n(a),h._start=0,b||j(v)||j(y)){if(d=P.length,g=b&&ot(b),F(b))for(p in b)~Xt.indexOf(p)&&(m||(m={}),m[p]=b[p]);for(u=0;u<d;u++)(c=Ie(s,Qt)).stagger=0,x&&(c.yoyoEase=x),m&&Ee(c,m),f=P[u],c.duration=+Jt(v,n(a),u,f,P),c.delay=(+Jt(y,n(a),u,f,P)||0)-a._delay,!b&&1===d&&c.delay&&(a._delay=y=c.delay,a._start+=y,c.delay=0),h.to(f,c,g?g(u,f,P):0),h._ease=Pt.none;h.duration()?v=y=0:a.timeline=0}else if(T){Pe(Se(h.vars.defaults,{ease:"none"})),h._ease=Lt(T.ease||s.ease||"none");var A,M,O,D=0;if(V(T))T.forEach((function(e){return h.to(P,e,">")})),h.duration();else{for(p in c={},T)"ease"===p||"easeEach"===p||Kt(p,T[p],c,T.easeEach);for(p in c)for(A=c[p].sort((function(e,t){return e.t-t.t})),D=0,u=0;u<A.length;u++)(O={ease:(M=A[u]).e,duration:(M.t-(u?A[u-1].t:0))/100*v})[p]=M.v,h.to(P,O,D),D+=O.duration;h.duration()<v&&h.to({},{duration:v-h.duration()})}}v||a.duration(v=h.duration())}else a.timeline=0;return!0!==C||r||(zt=n(a),l.killTweensOf(P),zt=0),qe(I,n(a),i),s.reversed&&a.reverse(),s.paused&&a.paused(!0),(w||!v&&!T&&a._start===ve(I._time)&&N(w)&&Le(n(a))&&"nested"!==I.data)&&(a._tTime=-1e-8,a.render(Math.max(0,-y)||0)),E&&ze(n(a),E),a}i(t,e);var s=t.prototype;return s.render=function(e,t,s){var n,i,r,a,l,h,u,c,d,p=this._time,f=this._tDur,g=this._dur,m=e<0,_=e>f-S&&!m?f:e<S?0:e;if(g){if(_!==this._tTime||!e||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(n=_,c=this.timeline,this._repeat){if(a=g+this._rDelay,this._repeat<-1&&m)return this.totalTime(100*a+e,t,s);if(n=ve(_%a),_===f?(r=this._repeat,n=g):(r=~~(l=ve(_/a)))&&r===l?(n=g,r--):n>g&&(n=g),(h=this._yoyo&&1&r)&&(d=this._yEase,n=g-n),l=Ne(this._tTime,a),n===p&&!s&&this._initted&&r===l)return this._tTime=_,this;r!==l&&(c&&this._yEase&&Rt(c,h),this.vars.repeatRefresh&&!h&&!this._lock&&n!==a&&this._initted&&(this._lock=s=1,this.render(ve(a*r),!0).invalidate()._lock=0))}if(!this._initted){if(Ue(this,m?e:n,s,t,_))return this._tTime=0,this;if(!(p===this._time||s&&this.vars.repeatRefresh&&r!==l))return this;if(g!==this._dur)return this.render(e,t,s)}if(this._tTime=_,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(d||this._ease)(n/g),this._from&&(this.ratio=u=1-u),n&&!p&&!t&&!r&&(ft(this,"onStart"),this._tTime!==_))return this;for(i=this._pt;i;)i.r(u,i.d),i=i._next;c&&c.render(e<0?e:c._dur*c._ease(n/this._dur),t,s)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(m&&Re(this,e,0,s),ft(this,"onUpdate")),this._repeat&&r!==l&&this.vars.onRepeat&&!t&&this.parent&&ft(this,"onRepeat"),_!==this._tDur&&_||this._tTime!==_||(m&&!this._onUpdate&&Re(this,e,0,!0),(e||!g)&&(_===this._tDur&&this._ts>0||!_&&this._ts<0)&&Oe(this,1),t||m&&!p||!(_||p||h)||(ft(this,_===f?"onComplete":"onReverseComplete",!0),this._prom&&!(_<f&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,s,n){var i,r,a,l=e.ratio,h=t<0||!t&&(!e._start&&He(e)&&(e._initted||!We(e))||(e._ts<0||e._dp._ts<0)&&!We(e))?0:1,u=e._rDelay,c=0;if(u&&e._repeat&&(c=Ze(0,e._tDur,t),r=Ne(c,u),e._yoyo&&1&r&&(h=1-h),r!==Ne(e._tTime,u)&&(l=1-h,e.vars.repeatRefresh&&e._initted&&e.invalidate())),h!==l||o||n||e._zTime===S||!t&&e._zTime){if(!e._initted&&Ue(e,t,n,s,c))return;for(a=e._zTime,e._zTime=t||(s?S:0),s||(s=t&&!a),e.ratio=h,e._from&&(h=1-h),e._time=0,e._tTime=c,i=e._pt;i;)i.r(h,i.d),i=i._next;t<0&&Re(e,t,0,!0),e._onUpdate&&!s&&ft(e,"onUpdate"),c&&e._repeat&&!s&&e.parent&&ft(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===h&&(h&&Oe(e,1),s||o||(ft(e,h?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,s);return this},s.targets=function(){return this._targets},s.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},s.resetTo=function(e,t,s,n,i){g||xt.wake(),this._ts||this.play();var r=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Yt(this,r),function(e,t,s,n,i,r,o,a){var l,h,u,c,d=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!d)for(d=e._ptCache[t]=[],u=e._ptLookup,c=e._targets.length;c--;){if((l=u[c][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return Ut=1,e.vars[t]="+=0",Yt(e,o),Ut=0,a?Z(t+" not eligible for reset"):1;d.push(l)}for(c=d.length;c--;)(l=(h=d[c])._pt||h).s=!n&&0!==n||i?l.s+(n||0)+r*l.c:n,l.c=s-l.s,h.e&&(h.e=_e(s)+et(h.e)),h.b&&(h.b=l.s+et(h.b))}(this,e,t,s,n,this._ease(r/this._dur),r,i)?this.resetTo(e,t,s,n,1):($e(this,0),this.parent||Ae(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},s.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?gt(this):this.scrollTrigger&&this.scrollTrigger.kill(!!o),this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,zt&&!0!==zt.vars.overwrite)._first||gt(this),this.parent&&s!==this.timeline.totalDuration()&&Ge(this,this._dur*this.timeline._tDur/s,0,1),this}var n,i,r,a,l,h,u,c=this._targets,d=e?nt(e):c,p=this._ptLookup,f=this._pt;if((!t||"all"===t)&&function(e,t){for(var s=e.length,n=s===t.length;n&&s--&&e[s]===t[s];);return s<0}(c,d))return"all"===t&&(this._pt=0),gt(this);for(n=this._op=this._op||[],"all"!==t&&(O(t)&&(l={},me(t,(function(e){return l[e]=1})),t=l),t=function(e,t){var s,n,i,r,o=e[0]?fe(e[0]).harness:0,a=o&&o.aliases;if(!a)return t;for(n in s=Ee({},t),a)if(n in s)for(i=(r=a[n].split(",")).length;i--;)s[r[i]]=s[n];return s}(c,t)),u=c.length;u--;)if(~d.indexOf(c[u]))for(l in i=p[u],"all"===t?(n[u]=t,a=i,r={}):(r=n[u]=n[u]||{},a=t),a)(h=i&&i[l])&&("kill"in h.d&&!0!==h.d.kill(l)||Me(this,h,"_pt"),delete i[l]),"all"!==r&&(r[l]=1);return this._initted&&!this._pt&&f&&gt(this),this},t.to=function(e,s){return new t(e,s,arguments[2])},t.from=function(e,t){return Xe(1,arguments)},t.delayedCall=function(e,s,n,i){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:s,onReverseComplete:s,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:i})},t.fromTo=function(e,t,s){return Xe(2,arguments)},t.set=function(e,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(e,s)},t.killTweensOf=function(e,t,s){return l.killTweensOf(e,t,s)},t}(Vt);Se(Zt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),me("staggerTo,staggerFrom,staggerFromTo",(function(e){Zt[e]=function(){var t=new qt,s=tt.call(arguments,0);return s.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,s)}}));var es=function(e,t,s){return e[t]=s},ts=function(e,t,s){return e[t](s)},ss=function(e,t,s,n){return e[t](n.fp,s)},ns=function(e,t,s){return e.setAttribute(t,s)},is=function(e,t){return D(e[t])?ts:L(e[t])&&e.setAttribute?ns:es},rs=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},os=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},as=function(e,t){var s=t._pt,n="";if(!e&&t.b)n=t.b;else if(1===e&&t.e)n=t.e;else{for(;s;)n=s.p+(s.m?s.m(s.s+s.c*e):Math.round(1e4*(s.s+s.c*e))/1e4)+n,s=s._next;n+=t.c}t.set(t.t,t.p,n,t)},ls=function(e,t){for(var s=t._pt;s;)s.r(e,s.d),s=s._next},hs=function(e,t,s,n){for(var i,r=this._pt;r;)i=r._next,r.p===n&&r.modifier(e,t,s),r=i},us=function(e){for(var t,s,n=this._pt;n;)s=n._next,n.p===e&&!n.op||n.op===e?Me(this,n,"_pt"):n.dep||(t=1),n=s;return!t},cs=function(e,t,s,n){n.mSet(e,t,n.m.call(n.tween,s,n.mt),n)},ds=function(e){for(var t,s,n,i,r=e._pt;r;){for(t=r._next,s=n;s&&s.pr>r.pr;)s=s._next;(r._prev=s?s._prev:i)?r._prev._next=r:n=r,(r._next=s)?s._prev=r:i=r,r=t}e._pt=n},ps=function(){function e(e,t,s,n,i,r,o,a,l){this.t=t,this.s=n,this.c=i,this.p=s,this.r=r||rs,this.d=o||this,this.set=a||es,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,s){this.mSet=this.mSet||this.set,this.set=cs,this.m=e,this.mt=s,this.tween=t},e}();me(de+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return re[e]=1})),K.TweenMax=K.TweenLite=Zt,K.TimelineLite=K.TimelineMax=qt,l=new qt({sortChildren:!1,defaults:C,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),k.stringFilter=Et;var fs=[],gs={},ms=[],_s=0,vs=0,ys=function(e){return(gs[e]||ms).map((function(e){return e()}))},ws=function(){var e=Date.now(),t=[];e-_s>2&&(ys("matchMediaInit"),fs.forEach((function(e){var s,n,i,r,o=e.queries,a=e.conditions;for(n in o)(s=h.matchMedia(o[n]).matches)&&(i=1),s!==a[n]&&(a[n]=s,r=1);r&&(e.revert(),i&&t.push(e))})),ys("matchMediaRevert"),t.forEach((function(e){return e.onMatch(e,(function(t){return e.add(null,t)}))})),_s=e,ys("matchMedia"))},bs=function(){function e(e,t){this.selector=t&&it(t),this.data=[],this._r=[],this.isReverted=!1,this.id=vs++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,s){D(e)&&(s=t,t=e,e=D);var n=this,i=function(){var e,i=a,r=n.selector;return i&&i!==n&&i.data.push(n),s&&(n.selector=it(s)),a=n,e=t.apply(n,arguments),D(e)&&n._r.push(e),a=i,n.selector=r,n.isReverted=!1,e};return n.last=i,e===D?i(n,(function(e){return n.add(null,e)})):e?n[e]=i:i},t.ignore=function(e){var t=a;a=null,e(this),a=t},t.getTweens=function(){var t=[];return this.data.forEach((function(s){return s instanceof e?t.push.apply(t,s.getTweens()):s instanceof Zt&&!(s.parent&&"nested"===s.parent.data)&&t.push(s)})),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var s=this;if(e?function(){for(var t,n=s.getTweens(),i=s.data.length;i--;)"isFlip"===(t=s.data[i]).data&&(t.revert(),t.getChildren(!0,!0,!1).forEach((function(e){return n.splice(n.indexOf(e),1)})));for(n.map((function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}})).sort((function(e,t){return t.g-e.g||-1/0})).forEach((function(t){return t.t.revert(e)})),i=s.data.length;i--;)(t=s.data[i])instanceof qt?"nested"!==t.data&&(t.scrollTrigger&&t.scrollTrigger.revert(),t.kill()):!(t instanceof Zt)&&t.revert&&t.revert(e);s._r.forEach((function(t){return t(e,s)})),s.isReverted=!0}():this.data.forEach((function(e){return e.kill&&e.kill()})),this.clear(),t)for(var n=fs.length;n--;)fs[n].id===this.id&&fs.splice(n,1)},t.revert=function(e){this.kill(e||{})},e}(),ks=function(){function e(e){this.contexts=[],this.scope=e,a&&a.data.push(this)}var t=e.prototype;return t.add=function(e,t,s){F(e)||(e={matches:e});var n,i,r,o=new bs(0,s||this.scope),l=o.conditions={};for(i in a&&!o.selector&&(o.selector=a.selector),this.contexts.push(o),t=o.add("onMatch",t),o.queries=e,e)"all"===i?r=1:(n=h.matchMedia(e[i]))&&(fs.indexOf(o)<0&&fs.push(o),(l[i]=n.matches)&&(r=1),n.addListener?n.addListener(ws):n.addEventListener("change",ws));return r&&t(o,(function(e){return o.add(null,e)})),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach((function(t){return t.kill(e,!0)}))},e}(),Cs={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];t.forEach((function(e){return _t(e)}))},timeline:function(e){return new qt(e)},getTweensOf:function(e,t){return l.getTweensOf(e,t)},getProperty:function(e,t,s,n){O(e)&&(e=nt(e)[0]);var i=fe(e||{}).get,r=s?Te:Ce;return"native"===s&&(s=""),e?t?r((le[t]&&le[t].get||i)(e,t,s,n)):function(t,s,n){return r((le[t]&&le[t].get||i)(e,t,s,n))}:e},quickSetter:function(e,t,s){if((e=nt(e)).length>1){var n=e.map((function(e){return Es.quickSetter(e,t,s)})),i=n.length;return function(e){for(var t=i;t--;)n[t](e)}}e=e[0]||{};var r=le[t],o=fe(e),a=o.harness&&(o.harness.aliases||{})[t]||t,l=r?function(t){var n=new r;f._pt=0,n.init(e,s?t+s:t,f,0,[e]),n.render(1,n),f._pt&&ls(1,f)}:o.set(e,a);return r?l:function(t){return l(e,a,s?t+s:t,o,1)}},quickTo:function(e,t,s){var n,i=Es.to(e,Se(((n={})[t]="+=0.1",n.paused=!0,n.stagger=0,n),s||{})),r=function(e,s,n){return i.resetTo(t,e,s,n)};return r.tween=i,r},isTweening:function(e){return l.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Lt(e.ease,C.ease)),xe(C,e||{})},config:function(e){return xe(k,e||{})},registerEffect:function(e){var t=e.name,s=e.effect,n=e.plugins,i=e.defaults,r=e.extendTimeline;(n||"").split(",").forEach((function(e){return e&&!le[e]&&!K[e]&&Z(t+" effect requires "+e+" plugin.")})),he[t]=function(e,t,n){return s(nt(e),Se(t||{},i),n)},r&&(qt.prototype[t]=function(e,s,n){return this.add(he[t](e,F(s)?s:(n=s)&&{},this),n)})},registerEase:function(e,t){Pt[e]=Lt(t)},parseEase:function(e,t){return arguments.length?Lt(e,t):Pt},getById:function(e){return l.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var s,n,i=new qt(e);for(i.smoothChildTiming=N(e.smoothChildTiming),l.remove(i),i._dp=0,i._time=i._tTime=l._time,s=l._first;s;)n=s._next,!t&&!s._dur&&s instanceof Zt&&s.vars.onComplete===s._targets[0]||qe(i,s,s._start-s._delay),s=n;return qe(l,i,0),i},context:function(e,t){return e?new bs(e,t):a},matchMedia:function(e){return new ks(e)},matchMediaRefresh:function(){return fs.forEach((function(e){var t,s,n=e.conditions;for(s in n)n[s]&&(n[s]=!1,t=1);t&&e.revert()}))||ws()},addEventListener:function(e,t){var s=gs[e]||(gs[e]=[]);~s.indexOf(t)||s.push(t)},removeEventListener:function(e,t){var s=gs[e],n=s&&s.indexOf(t);n>=0&&s.splice(n,1)},utils:{wrap:function e(t,s,n){var i=s-t;return V(t)?ut(t,e(0,t.length),s):Qe(n,(function(e){return(i+(e-t)%i)%i+t}))},wrapYoyo:function e(t,s,n){var i=s-t,r=2*i;return V(t)?ut(t,e(0,t.length-1),s):Qe(n,(function(e){return t+((e=(r+(e-t)%r)%r||0)>i?r-e:e)}))},distribute:ot,random:ht,snap:lt,normalize:function(e,t,s){return dt(e,t,0,1,s)},getUnit:et,clamp:function(e,t,s){return Qe(s,(function(s){return Ze(e,t,s)}))},splitColor:bt,toArray:nt,selector:it,mapRange:dt,pipe:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(s){return e(parseFloat(s))+(t||et(s))}},interpolate:function e(t,s,n,i){var r=isNaN(t+s)?0:function(e){return(1-e)*t+e*s};if(!r){var o,a,l,h,u,c=O(t),d={};if(!0===n&&(i=1)&&(n=null),c)t={p:t},s={p:s};else if(V(t)&&!V(s)){for(l=[],h=t.length,u=h-2,a=1;a<h;a++)l.push(e(t[a-1],t[a]));h--,r=function(e){e*=h;var t=Math.min(u,~~e);return l[t](e-t)},n=s}else i||(t=Ee(V(t)?[]:{},t));if(!l){for(o in s)Wt.call(d,t,o,"get",s[o]);r=function(e){return ls(e,d)||(c?t.p:t)}}}return Qe(n,r)},shuffle:rt},install:X,effects:he,ticker:xt,updateRoot:qt.updateRoot,plugins:le,globalTimeline:l,core:{PropTween:ps,globals:ee,Tween:Zt,Timeline:qt,Animation:Vt,getCache:fe,_removeLinkedListItem:Me,reverting:function(){return o},context:function(e){return e&&a&&(a.data.push(e),e._ctx=a),a},suppressOverwrites:function(e){return r=e}}};me("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return Cs[e]=Zt[e]})),xt.add(qt.updateRoot),f=Cs.to({},{duration:0});var Ts=function(e,t){for(var s=e._pt;s&&s.p!==t&&s.op!==t&&s.fp!==t;)s=s._next;return s},Ss=function(e,t){return{name:e,rawVars:1,init:function(e,s,n){n._onInit=function(e){var n,i;if(O(s)&&(n={},me(s,(function(e){return n[e]=1})),s=n),t){for(i in n={},s)n[i]=t(s[i]);s=n}!function(e,t){var s,n,i,r=e._targets;for(s in t)for(n=r.length;n--;)(i=e._ptLookup[n][s])&&(i=i.d)&&(i._pt&&(i=Ts(i,s)),i&&i.modifier&&i.modifier(t[s],e,r[n],s))}(e,s)}}}},Es=Cs.registerPlugin({name:"attr",init:function(e,t,s,n,i){var r,o,a;for(r in this.tween=s,t)a=e.getAttribute(r)||"",(o=this.add(e,"setAttribute",(a||0)+"",t[r],n,i,0,0,r)).op=r,o.b=a,this._props.push(r)},render:function(e,t){for(var s=t._pt;s;)o?s.set(s.t,s.p,s.b,s):s.r(e,s.d),s=s._next}},{name:"endArray",init:function(e,t){for(var s=t.length;s--;)this.add(e,s,e[s]||0,t[s],0,0,0,0,0,1)}},Ss("roundProps",at),Ss("modifiers"),Ss("snap",lt))||Cs;Zt.version=qt.version=Es.version="3.12.7",d=1,B()&&It(),Pt.Power0,Pt.Power1,Pt.Power2,Pt.Power3,Pt.Power4,Pt.Linear,Pt.Quad,Pt.Cubic,Pt.Quart,Pt.Quint,Pt.Strong,Pt.Elastic,Pt.Back,Pt.SteppedEase,Pt.Bounce,Pt.Sine,Pt.Expo,Pt.Circ;var xs,Is,Ps,As,Ms,Os,Ds,Rs,Ls={},Fs=180/Math.PI,Ns=Math.PI/180,Bs=Math.atan2,js=/([A-Z])/g,$s=/(left|right|width|margin|padding|x)/i,Vs=/[\s,\(]\S/,qs={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},zs=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Us=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Hs=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},Ws=function(e,t){var s=t.s+t.c*e;t.set(t.t,t.p,~~(s+(s<0?-.5:.5))+t.u,t)},Gs=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Ys=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},Ks=function(e,t,s){return e.style[t]=s},Js=function(e,t,s){return e.style.setProperty(t,s)},Xs=function(e,t,s){return e._gsap[t]=s},Qs=function(e,t,s){return e._gsap.scaleX=e._gsap.scaleY=s},Zs=function(e,t,s,n,i){var r=e._gsap;r.scaleX=r.scaleY=s,r.renderTransform(i,r)},en=function(e,t,s,n,i){var r=e._gsap;r[t]=s,r.renderTransform(i,r)},tn="transform",sn=tn+"Origin",nn=function e(t,s){var n=this,i=this.target,r=i.style,o=i._gsap;if(t in Ls&&r){if(this.tfm=this.tfm||{},"transform"===t)return qs.transform.split(",").forEach((function(t){return e.call(n,t,s)}));if(~(t=qs[t]||t).indexOf(",")?t.split(",").forEach((function(e){return n.tfm[e]=kn(i,e)})):this.tfm[t]=o.x?o[t]:kn(i,t),t===sn&&(this.tfm.zOrigin=o.zOrigin),this.props.indexOf(tn)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(sn,s,"")),t=tn}(r||s)&&this.props.push(t,s,r[t])},rn=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},on=function(){var e,t,s=this.props,n=this.target,i=n.style,r=n._gsap;for(e=0;e<s.length;e+=3)s[e+1]?2===s[e+1]?n[s[e]](s[e+2]):n[s[e]]=s[e+2]:s[e+2]?i[s[e]]=s[e+2]:i.removeProperty("--"===s[e].substr(0,2)?s[e]:s[e].replace(js,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)r[t]=this.tfm[t];r.svg&&(r.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),(e=Ds())&&e.isStart||i[tn]||(rn(i),r.zOrigin&&i[sn]&&(i[sn]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},an=function(e,t){var s={target:e,props:[],revert:on,save:nn};return e._gsap||Es.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach((function(e){return s.save(e)})),s},ln=function(e,t){var s=Is.createElementNS?Is.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Is.createElement(e);return s&&s.style?s:Is.createElement(e)},hn=function e(t,s,n){var i=getComputedStyle(t);return i[s]||i.getPropertyValue(s.replace(js,"-$1").toLowerCase())||i.getPropertyValue(s)||!n&&e(t,cn(s)||s,1)||""},un="O,Moz,ms,Ms,Webkit".split(","),cn=function(e,t,s){var n=(t||Ms).style,i=5;if(e in n&&!s)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(un[i]+e in n););return i<0?null:(3===i?"ms":i>=0?un[i]:"")+e},dn=function(){"undefined"!=typeof window&&window.document&&(xs=window,Is=xs.document,Ps=Is.documentElement,Ms=ln("div")||{style:{}},ln("div"),tn=cn(tn),sn=tn+"Origin",Ms.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Rs=!!cn("perspective"),Ds=Es.core.reverting,As=1)},pn=function(e){var t,s=e.ownerSVGElement,n=ln("svg",s&&s.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0);i.style.display="block",n.appendChild(i),Ps.appendChild(n);try{t=i.getBBox()}catch(e){}return n.removeChild(i),Ps.removeChild(n),t},fn=function(e,t){for(var s=t.length;s--;)if(e.hasAttribute(t[s]))return e.getAttribute(t[s])},gn=function(e){var t,s;try{t=e.getBBox()}catch(n){t=pn(e),s=1}return t&&(t.width||t.height)||s||(t=pn(e)),!t||t.width||t.x||t.y?t:{x:+fn(e,["x","cx","x1"])||0,y:+fn(e,["y","cy","y1"])||0,width:0,height:0}},mn=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!gn(e))},_n=function(e,t){if(t){var s,n=e.style;t in Ls&&t!==sn&&(t=tn),n.removeProperty?("ms"!==(s=t.substr(0,2))&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty("--"===s?t:t.replace(js,"-$1").toLowerCase())):n.removeAttribute(t)}},vn=function(e,t,s,n,i,r){var o=new ps(e._pt,t,s,0,1,r?Ys:Gs);return e._pt=o,o.b=n,o.e=i,e._props.push(s),o},yn={deg:1,rad:1,turn:1},wn={grid:1,flex:1},bn=function e(t,s,n,i){var r,o,a,l,h=parseFloat(n)||0,u=(n+"").trim().substr((h+"").length)||"px",c=Ms.style,d=$s.test(s),p="svg"===t.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),g=100,m="px"===i,_="%"===i;if(i===u||!h||yn[i]||yn[u])return h;if("px"!==u&&!m&&(h=e(t,s,n,"px")),l=t.getCTM&&mn(t),(_||"%"===u)&&(Ls[s]||~s.indexOf("adius")))return r=l?t.getBBox()[d?"width":"height"]:t[f],_e(_?h/r*g:h/100*r);if(c[d?"width":"height"]=g+(m?u:i),o="rem"!==i&&~s.indexOf("adius")||"em"===i&&t.appendChild&&!p?t:t.parentNode,l&&(o=(t.ownerSVGElement||{}).parentNode),o&&o!==Is&&o.appendChild||(o=Is.body),(a=o._gsap)&&_&&a.width&&d&&a.time===xt.time&&!a.uncache)return _e(h/a.width*g);if(!_||"height"!==s&&"width"!==s)(_||"%"===u)&&!wn[hn(o,"display")]&&(c.position=hn(t,"position")),o===t&&(c.position="static"),o.appendChild(Ms),r=Ms[f],o.removeChild(Ms),c.position="absolute";else{var v=t.style[s];t.style[s]=g+i,r=t[f],v?t.style[s]=v:_n(t,s)}return d&&_&&((a=fe(o)).time=xt.time,a.width=o[f]),_e(m?r*h/g:r&&h?g/r*h:0)},kn=function(e,t,s,n){var i;return As||dn(),t in qs&&"transform"!==t&&~(t=qs[t]).indexOf(",")&&(t=t.split(",")[0]),Ls[t]&&"transform"!==t?(i=Dn(e,n),i="transformOrigin"!==t?i[t]:i.svg?i.origin:Rn(hn(e,sn))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||n||~(i+"").indexOf("calc("))&&(i=En[t]&&En[t](e,t,s)||hn(e,t)||ge(e,t)||("opacity"===t?1:0)),s&&!~(i+"").trim().indexOf(" ")?bn(e,t,i,s)+s:i},Cn=function(e,t,s,n){if(!s||"none"===s){var i=cn(t,e,1),r=i&&hn(e,i,1);r&&r!==s?(t=i,s=r):"borderColor"===t&&(s=hn(e,"borderTopColor"))}var o,a,l,h,u,c,d,p,f,g,m,_=new ps(this._pt,e.style,t,0,1,as),v=0,y=0;if(_.b=s,_.e=n,s+="","auto"==(n+="")&&(c=e.style[t],e.style[t]=n,n=hn(e,t)||n,c?e.style[t]=c:_n(e,t)),Et(o=[s,n]),n=o[1],l=(s=o[0]).match(U)||[],(n.match(U)||[]).length){for(;a=U.exec(n);)d=a[0],f=n.substring(v,a.index),u?u=(u+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(u=1),d!==(c=l[y++]||"")&&(h=parseFloat(c)||0,m=c.substr((h+"").length),"="===d.charAt(1)&&(d=ye(h,d)+m),p=parseFloat(d),g=d.substr((p+"").length),v=U.lastIndex-g.length,g||(g=g||k.units[t]||m,v===n.length&&(n+=g,_.e+=g)),m!==g&&(h=bn(e,t,c,g)||0),_._pt={_next:_._pt,p:f||1===y?f:",",s:h,c:p-h,m:u&&u<4||"zIndex"===t?Math.round:0});_.c=v<n.length?n.substring(v,n.length):""}else _.r="display"===t&&"none"===n?Ys:Gs;return W.test(n)&&(_.e=0),this._pt=_,_},Tn={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Sn=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var s,n,i,r=t.t,o=r.style,a=t.u,l=r._gsap;if("all"===a||!0===a)o.cssText="",n=1;else for(i=(a=a.split(",")).length;--i>-1;)s=a[i],Ls[s]&&(n=1,s="transformOrigin"===s?sn:tn),_n(r,s);n&&(_n(r,tn),l&&(l.svg&&r.removeAttribute("transform"),o.scale=o.rotate=o.translate="none",Dn(r,1),l.uncache=1,rn(o)))}},En={clearProps:function(e,t,s,n,i){if("isFromStart"!==i.data){var r=e._pt=new ps(e._pt,t,s,0,0,Sn);return r.u=n,r.pr=-10,r.tween=i,e._props.push(s),1}}},xn=[1,0,0,1,0,0],In={},Pn=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},An=function(e){var t=hn(e,tn);return Pn(t)?xn:t.substr(7).match(z).map(_e)},Mn=function(e,t){var s,n,i,r,o=e._gsap||fe(e),a=e.style,l=An(e);return o.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?xn:l:(l!==xn||e.offsetParent||e===Ps||o.svg||(i=a.display,a.display="block",(s=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(r=1,n=e.nextElementSibling,Ps.appendChild(e)),l=An(e),i?a.display=i:_n(e,"display"),r&&(n?s.insertBefore(e,n):s?s.appendChild(e):Ps.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},On=function(e,t,s,n,i,r){var o,a,l,h=e._gsap,u=i||Mn(e,!0),c=h.xOrigin||0,d=h.yOrigin||0,p=h.xOffset||0,f=h.yOffset||0,g=u[0],m=u[1],_=u[2],v=u[3],y=u[4],w=u[5],b=t.split(" "),k=parseFloat(b[0])||0,C=parseFloat(b[1])||0;s?u!==xn&&(a=g*v-m*_)&&(l=k*(-m/a)+C*(g/a)-(g*w-m*y)/a,k=k*(v/a)+C*(-_/a)+(_*w-v*y)/a,C=l):(k=(o=gn(e)).x+(~b[0].indexOf("%")?k/100*o.width:k),C=o.y+(~(b[1]||b[0]).indexOf("%")?C/100*o.height:C)),n||!1!==n&&h.smooth?(y=k-c,w=C-d,h.xOffset=p+(y*g+w*_)-y,h.yOffset=f+(y*m+w*v)-w):h.xOffset=h.yOffset=0,h.xOrigin=k,h.yOrigin=C,h.smooth=!!n,h.origin=t,h.originIsAbsolute=!!s,e.style[sn]="0px 0px",r&&(vn(r,h,"xOrigin",c,k),vn(r,h,"yOrigin",d,C),vn(r,h,"xOffset",p,h.xOffset),vn(r,h,"yOffset",f,h.yOffset)),e.setAttribute("data-svg-origin",k+" "+C)},Dn=function(e,t){var s=e._gsap||new $t(e);if("x"in s&&!t&&!s.uncache)return s;var n,i,r,o,a,l,h,u,c,d,p,f,g,m,_,v,y,w,b,C,T,S,E,x,I,P,A,M,O,D,R,L,F=e.style,N=s.scaleX<0,B="px",j="deg",$=getComputedStyle(e),V=hn(e,sn)||"0";return n=i=r=l=h=u=c=d=p=0,o=a=1,s.svg=!(!e.getCTM||!mn(e)),$.translate&&("none"===$.translate&&"none"===$.scale&&"none"===$.rotate||(F[tn]=("none"!==$.translate?"translate3d("+($.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==$.rotate?"rotate("+$.rotate+") ":"")+("none"!==$.scale?"scale("+$.scale.split(" ").join(",")+") ":"")+("none"!==$[tn]?$[tn]:"")),F.scale=F.rotate=F.translate="none"),m=Mn(e,s.svg),s.svg&&(s.uncache?(I=e.getBBox(),V=s.xOrigin-I.x+"px "+(s.yOrigin-I.y)+"px",x=""):x=!t&&e.getAttribute("data-svg-origin"),On(e,x||V,!!x||s.originIsAbsolute,!1!==s.smooth,m)),f=s.xOrigin||0,g=s.yOrigin||0,m!==xn&&(w=m[0],b=m[1],C=m[2],T=m[3],n=S=m[4],i=E=m[5],6===m.length?(o=Math.sqrt(w*w+b*b),a=Math.sqrt(T*T+C*C),l=w||b?Bs(b,w)*Fs:0,(c=C||T?Bs(C,T)*Fs+l:0)&&(a*=Math.abs(Math.cos(c*Ns))),s.svg&&(n-=f-(f*w+g*C),i-=g-(f*b+g*T))):(L=m[6],D=m[7],A=m[8],M=m[9],O=m[10],R=m[11],n=m[12],i=m[13],r=m[14],h=(_=Bs(L,O))*Fs,_&&(x=S*(v=Math.cos(-_))+A*(y=Math.sin(-_)),I=E*v+M*y,P=L*v+O*y,A=S*-y+A*v,M=E*-y+M*v,O=L*-y+O*v,R=D*-y+R*v,S=x,E=I,L=P),u=(_=Bs(-C,O))*Fs,_&&(v=Math.cos(-_),R=T*(y=Math.sin(-_))+R*v,w=x=w*v-A*y,b=I=b*v-M*y,C=P=C*v-O*y),l=(_=Bs(b,w))*Fs,_&&(x=w*(v=Math.cos(_))+b*(y=Math.sin(_)),I=S*v+E*y,b=b*v-w*y,E=E*v-S*y,w=x,S=I),h&&Math.abs(h)+Math.abs(l)>359.9&&(h=l=0,u=180-u),o=_e(Math.sqrt(w*w+b*b+C*C)),a=_e(Math.sqrt(E*E+L*L)),_=Bs(S,E),c=Math.abs(_)>2e-4?_*Fs:0,p=R?1/(R<0?-R:R):0),s.svg&&(x=e.getAttribute("transform"),s.forceCSS=e.setAttribute("transform","")||!Pn(hn(e,tn)),x&&e.setAttribute("transform",x))),Math.abs(c)>90&&Math.abs(c)<270&&(N?(o*=-1,c+=l<=0?180:-180,l+=l<=0?180:-180):(a*=-1,c+=c<=0?180:-180)),t=t||s.uncache,s.x=n-((s.xPercent=n&&(!t&&s.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-n)?-50:0)))?e.offsetWidth*s.xPercent/100:0)+B,s.y=i-((s.yPercent=i&&(!t&&s.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*s.yPercent/100:0)+B,s.z=r+B,s.scaleX=_e(o),s.scaleY=_e(a),s.rotation=_e(l)+j,s.rotationX=_e(h)+j,s.rotationY=_e(u)+j,s.skewX=c+j,s.skewY=d+j,s.transformPerspective=p+B,(s.zOrigin=parseFloat(V.split(" ")[2])||!t&&s.zOrigin||0)&&(F[sn]=Rn(V)),s.xOffset=s.yOffset=0,s.force3D=k.force3D,s.renderTransform=s.svg?Vn:Rs?$n:Fn,s.uncache=0,s},Rn=function(e){return(e=e.split(" "))[0]+" "+e[1]},Ln=function(e,t,s){var n=et(t);return _e(parseFloat(t)+parseFloat(bn(e,"x",s+"px",n)))+n},Fn=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,$n(e,t)},Nn="0deg",Bn="0px",jn=") ",$n=function(e,t){var s=t||this,n=s.xPercent,i=s.yPercent,r=s.x,o=s.y,a=s.z,l=s.rotation,h=s.rotationY,u=s.rotationX,c=s.skewX,d=s.skewY,p=s.scaleX,f=s.scaleY,g=s.transformPerspective,m=s.force3D,_=s.target,v=s.zOrigin,y="",w="auto"===m&&e&&1!==e||!0===m;if(v&&(u!==Nn||h!==Nn)){var b,k=parseFloat(h)*Ns,C=Math.sin(k),T=Math.cos(k);k=parseFloat(u)*Ns,b=Math.cos(k),r=Ln(_,r,C*b*-v),o=Ln(_,o,-Math.sin(k)*-v),a=Ln(_,a,T*b*-v+v)}g!==Bn&&(y+="perspective("+g+jn),(n||i)&&(y+="translate("+n+"%, "+i+"%) "),(w||r!==Bn||o!==Bn||a!==Bn)&&(y+=a!==Bn||w?"translate3d("+r+", "+o+", "+a+") ":"translate("+r+", "+o+jn),l!==Nn&&(y+="rotate("+l+jn),h!==Nn&&(y+="rotateY("+h+jn),u!==Nn&&(y+="rotateX("+u+jn),c===Nn&&d===Nn||(y+="skew("+c+", "+d+jn),1===p&&1===f||(y+="scale("+p+", "+f+jn),_.style[tn]=y||"translate(0, 0)"},Vn=function(e,t){var s,n,i,r,o,a=t||this,l=a.xPercent,h=a.yPercent,u=a.x,c=a.y,d=a.rotation,p=a.skewX,f=a.skewY,g=a.scaleX,m=a.scaleY,_=a.target,v=a.xOrigin,y=a.yOrigin,w=a.xOffset,b=a.yOffset,k=a.forceCSS,C=parseFloat(u),T=parseFloat(c);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=Ns,p*=Ns,s=Math.cos(d)*g,n=Math.sin(d)*g,i=Math.sin(d-p)*-m,r=Math.cos(d-p)*m,p&&(f*=Ns,o=Math.tan(p-f),i*=o=Math.sqrt(1+o*o),r*=o,f&&(o=Math.tan(f),s*=o=Math.sqrt(1+o*o),n*=o)),s=_e(s),n=_e(n),i=_e(i),r=_e(r)):(s=g,r=m,n=i=0),(C&&!~(u+"").indexOf("px")||T&&!~(c+"").indexOf("px"))&&(C=bn(_,"x",u,"px"),T=bn(_,"y",c,"px")),(v||y||w||b)&&(C=_e(C+v-(v*s+y*i)+w),T=_e(T+y-(v*n+y*r)+b)),(l||h)&&(o=_.getBBox(),C=_e(C+l/100*o.width),T=_e(T+h/100*o.height)),o="matrix("+s+","+n+","+i+","+r+","+C+","+T+")",_.setAttribute("transform",o),k&&(_.style[tn]=o)},qn=function(e,t,s,n,i){var r,o,a=360,l=O(i),h=parseFloat(i)*(l&&~i.indexOf("rad")?Fs:1)-n,u=n+h+"deg";return l&&("short"===(r=i.split("_")[1])&&(h%=a)!=h%180&&(h+=h<0?a:-360),"cw"===r&&h<0?h=(h+36e9)%a-~~(h/a)*a:"ccw"===r&&h>0&&(h=(h-36e9)%a-~~(h/a)*a)),e._pt=o=new ps(e._pt,t,s,n,h,Us),o.e=u,o.u="deg",e._props.push(s),o},zn=function(e,t){for(var s in t)e[s]=t[s];return e},Un=function(e,t,s){var n,i,r,o,a,l,h,u=zn({},s._gsap),c=s.style;for(i in u.svg?(r=s.getAttribute("transform"),s.setAttribute("transform",""),c[tn]=t,n=Dn(s,1),_n(s,tn),s.setAttribute("transform",r)):(r=getComputedStyle(s)[tn],c[tn]=t,n=Dn(s,1),c[tn]=r),Ls)(r=u[i])!==(o=n[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(a=et(r)!==(h=et(o))?bn(s,i,r,h):parseFloat(r),l=parseFloat(o),e._pt=new ps(e._pt,n,i,a,l-a,zs),e._pt.u=h||0,e._props.push(i));zn(n,u)};me("padding,margin,Width,Radius",(function(e,t){var s="Top",n="Right",i="Bottom",r="Left",o=(t<3?[s,n,i,r]:[s+r,s+n,i+n,i+r]).map((function(s){return t<2?e+s:"border"+s+e}));En[t>1?"border"+e:e]=function(e,t,s,n,i){var r,a;if(arguments.length<4)return r=o.map((function(t){return kn(e,t,s)})),5===(a=r.join(" ")).split(r[0]).length?r[0]:a;r=(n+"").split(" "),a={},o.forEach((function(e,t){return a[e]=r[t]=r[t]||r[(t-1)/2|0]})),e.init(t,a,i)}}));var Hn,Wn,Gn={name:"css",register:dn,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,s,n,i){var r,o,a,l,h,u,c,d,p,f,g,m,_,v,y,w,b,C,T,S,E=this._props,x=e.style,I=s.vars.startAt;for(c in As||dn(),this.styles=this.styles||an(e),w=this.styles.props,this.tween=s,t)if("autoRound"!==c&&(o=t[c],!le[c]||!Gt(c,t,s,n,e,i)))if(h=typeof o,u=En[c],"function"===h&&(h=typeof(o=o.call(s,n,e,i))),"string"===h&&~o.indexOf("random(")&&(o=ct(o)),u)u(this,e,c,o,s)&&(y=1);else if("--"===c.substr(0,2))r=(getComputedStyle(e).getPropertyValue(c)+"").trim(),o+="",Tt.lastIndex=0,Tt.test(r)||(d=et(r),p=et(o)),p?d!==p&&(r=bn(e,c,r,p)+p):d&&(o+=d),this.add(x,"setProperty",r,o,n,i,0,0,c),E.push(c),w.push(c,0,x[c]);else if("undefined"!==h){if(I&&c in I?(r="function"==typeof I[c]?I[c].call(s,n,e,i):I[c],O(r)&&~r.indexOf("random(")&&(r=ct(r)),et(r+"")||"auto"===r||(r+=k.units[c]||et(kn(e,c))||""),"="===(r+"").charAt(1)&&(r=kn(e,c))):r=kn(e,c),l=parseFloat(r),(f="string"===h&&"="===o.charAt(1)&&o.substr(0,2))&&(o=o.substr(2)),a=parseFloat(o),c in qs&&("autoAlpha"===c&&(1===l&&"hidden"===kn(e,"visibility")&&a&&(l=0),w.push("visibility",0,x.visibility),vn(this,x,"visibility",l?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==c&&"transform"!==c&&~(c=qs[c]).indexOf(",")&&(c=c.split(",")[0])),g=c in Ls)if(this.styles.save(c),m||((_=e._gsap).renderTransform&&!t.parseTransform||Dn(e,t.parseTransform),v=!1!==t.smoothOrigin&&_.smooth,(m=this._pt=new ps(this._pt,x,tn,0,1,_.renderTransform,_,0,-1)).dep=1),"scale"===c)this._pt=new ps(this._pt,_,"scaleY",_.scaleY,(f?ye(_.scaleY,f+a):a)-_.scaleY||0,zs),this._pt.u=0,E.push("scaleY",c),c+="X";else{if("transformOrigin"===c){w.push(sn,0,x[sn]),C=void 0,T=void 0,S=void 0,T=(C=(b=o).split(" "))[0],S=C[1]||"50%","top"!==T&&"bottom"!==T&&"left"!==S&&"right"!==S||(b=T,T=S,S=b),C[0]=Tn[T]||T,C[1]=Tn[S]||S,o=C.join(" "),_.svg?On(e,o,0,v,0,this):((p=parseFloat(o.split(" ")[2])||0)!==_.zOrigin&&vn(this,_,"zOrigin",_.zOrigin,p),vn(this,x,c,Rn(r),Rn(o)));continue}if("svgOrigin"===c){On(e,o,1,v,0,this);continue}if(c in In){qn(this,_,c,l,f?ye(l,f+o):o);continue}if("smoothOrigin"===c){vn(this,_,"smooth",_.smooth,o);continue}if("force3D"===c){_[c]=o;continue}if("transform"===c){Un(this,o,e);continue}}else c in x||(c=cn(c)||c);if(g||(a||0===a)&&(l||0===l)&&!Vs.test(o)&&c in x)a||(a=0),(d=(r+"").substr((l+"").length))!==(p=et(o)||(c in k.units?k.units[c]:d))&&(l=bn(e,c,r,p)),this._pt=new ps(this._pt,g?_:x,c,l,(f?ye(l,f+a):a)-l,g||"px"!==p&&"zIndex"!==c||!1===t.autoRound?zs:Ws),this._pt.u=p||0,d!==p&&"%"!==p&&(this._pt.b=r,this._pt.r=Hs);else if(c in x)Cn.call(this,e,c,r,f?f+o:o);else if(c in e)this.add(e,c,r||e[c],f?f+o:o,n,i);else if("parseTransform"!==c){Q(c,o);continue}g||(c in x?w.push(c,0,x[c]):"function"==typeof e[c]?w.push(c,2,e[c]()):w.push(c,1,r||e[c])),E.push(c)}y&&ds(this)},render:function(e,t){if(t.tween._time||!Ds())for(var s=t._pt;s;)s.r(e,s.d),s=s._next;else t.styles.revert()},get:kn,aliases:qs,getSetter:function(e,t,s){var n=qs[t];return n&&n.indexOf(",")<0&&(t=n),t in Ls&&t!==sn&&(e._gsap.x||kn(e,"x"))?s&&Os===s?"scale"===t?Qs:Xs:(Os=s||{})&&("scale"===t?Zs:en):e.style&&!L(e.style[t])?Ks:~t.indexOf("-")?Js:is(e,t)},core:{_removeProperty:_n,_getMatrix:Mn}};Es.utils.checkPrefix=cn,Es.core.getStyleSaver=an,Wn=me("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(Hn="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){Ls[e]=1})),me(Hn,(function(e){k.units[e]="deg",In[e]=1})),qs[Wn[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+Hn,me("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");qs[t[1]]=Wn[t[0]]})),me("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){k.units[e]="px"})),Es.registerPlugin(Gn);var Yn=Es.registerPlugin(Gn)||Es;function Kn(){const e=document.querySelector(".burger"),t=document.querySelector(".header__list");if(!Kn||!t)return;const s=t.querySelectorAll(".header__list-item"),n=t.querySelectorAll(".header__list-link"),i=t=>{e.classList.toggle("active",t),document.body.style.overflow=t?"hidden":"visible"};Yn.matchMedia().add("(max-width: 1024px)",(()=>{const r=Yn.timeline({paused:!0,onStart:()=>i(!0),onReverseComplete:()=>i(!1)});r.to(t,{x:"0",duration:.5,ease:"expo"}).fromTo(s,{x:"-100%"},{x:0,duration:.5,ease:"expo",stagger:.3});const o=()=>{e.classList.contains("active")?r.reverse():r.play()},a=e=>{e.preventDefault();let t=e.target.href;r.reverse(),setTimeout((()=>{window.location.href=t}),1e3)};return e.addEventListener("click",o),n.forEach((e=>e.addEventListener("click",a))),()=>{e.removeEventListener("click",o),n.forEach((e=>e.removeEventListener("click",a)))}}))}function Jn(e){return"string"==typeof e||e instanceof String}function Xn(e){var t;return"object"==typeof e&&null!=e&&"Object"===(null==e||null==(t=e.constructor)?void 0:t.name)}function Qn(e,t){return Array.isArray(t)?Qn(e,((e,s)=>t.includes(s))):Object.entries(e).reduce(((e,s)=>{let[n,i]=s;return t(i,n)&&(e[n]=i),e}),{})}Yn.core.Tween;const Zn="NONE",ei="LEFT",ti="FORCE_LEFT",si="RIGHT",ni="FORCE_RIGHT";function ii(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function ri(e,t){if(t===e)return!0;const s=Array.isArray(t),n=Array.isArray(e);let i;if(s&&n){if(t.length!=e.length)return!1;for(i=0;i<t.length;i++)if(!ri(t[i],e[i]))return!1;return!0}if(s!=n)return!1;if(t&&e&&"object"==typeof t&&"object"==typeof e){const s=t instanceof Date,n=e instanceof Date;if(s&&n)return t.getTime()==e.getTime();if(s!=n)return!1;const r=t instanceof RegExp,o=e instanceof RegExp;if(r&&o)return t.toString()==e.toString();if(r!=o)return!1;const a=Object.keys(t);for(i=0;i<a.length;i++)if(!Object.prototype.hasOwnProperty.call(e,a[i]))return!1;for(i=0;i<a.length;i++)if(!ri(e[a[i]],t[a[i]]))return!1;return!0}return!(!t||!e||"function"!=typeof t||"function"!=typeof e)&&t.toString()===e.toString()}class oi{constructor(e){for(Object.assign(this,e);this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start;if(this.insertedCount)for(;this.value.slice(this.cursorPos)!==this.oldValue.slice(this.oldSelection.end);)this.value.length-this.cursorPos<this.oldValue.length-this.oldSelection.end?++this.oldSelection.end:++this.cursorPos}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){return!this.removedCount||this.insertedCount?Zn:this.oldSelection.end!==this.cursorPos&&this.oldSelection.start!==this.cursorPos||this.oldSelection.end!==this.oldSelection.start?ei:si}}function ai(e,t){return new ai.InputMask(e,t)}function li(e){if(null==e)throw new Error("mask property should be defined");return e instanceof RegExp?ai.MaskedRegExp:Jn(e)?ai.MaskedPattern:e===Date?ai.MaskedDate:e===Number?ai.MaskedNumber:Array.isArray(e)||e===Array?ai.MaskedDynamic:ai.Masked&&e.prototype instanceof ai.Masked?e:ai.Masked&&e instanceof ai.Masked?e.constructor:e instanceof Function?ai.MaskedFunction:(console.warn("Mask not found for mask",e),ai.Masked)}function hi(e){if(!e)throw new Error("Options in not defined");if(ai.Masked){if(e.prototype instanceof ai.Masked)return{mask:e};const{mask:t,...s}=e instanceof ai.Masked?{mask:e}:Xn(e)&&e.mask instanceof ai.Masked?e:{};if(t){const e=t.mask;return{...Qn(t,((e,t)=>!t.startsWith("_"))),mask:t.constructor,_mask:e,...s}}}return Xn(e)?{...e}:{mask:e}}function ui(e){if(ai.Masked&&e instanceof ai.Masked)return e;const t=hi(e),s=li(t.mask);if(!s)throw new Error("Masked class is not found for provided mask "+t.mask+", appropriate module needs to be imported manually before creating mask.");return t.mask===s&&delete t.mask,t._mask&&(t.mask=t._mask,delete t._mask),new s(t)}ai.createMask=ui;class ci{get selectionStart(){let e;try{e=this._unsafeSelectionStart}catch{}return null!=e?e:this.value.length}get selectionEnd(){let e;try{e=this._unsafeSelectionEnd}catch{}return null!=e?e:this.value.length}select(e,t){if(null!=e&&null!=t&&(e!==this.selectionStart||t!==this.selectionEnd))try{this._unsafeSelect(e,t)}catch{}}get isActive(){return!1}}ai.MaskElement=ci;class di extends ci{constructor(e){super(),this.input=e,this._onKeydown=this._onKeydown.bind(this),this._onInput=this._onInput.bind(this),this._onBeforeinput=this._onBeforeinput.bind(this),this._onCompositionEnd=this._onCompositionEnd.bind(this)}get rootElement(){var e,t,s;return null!=(e=null==(t=(s=this.input).getRootNode)?void 0:t.call(s))?e:document}get isActive(){return this.input===this.rootElement.activeElement}bindEvents(e){this.input.addEventListener("keydown",this._onKeydown),this.input.addEventListener("input",this._onInput),this.input.addEventListener("beforeinput",this._onBeforeinput),this.input.addEventListener("compositionend",this._onCompositionEnd),this.input.addEventListener("drop",e.drop),this.input.addEventListener("click",e.click),this.input.addEventListener("focus",e.focus),this.input.addEventListener("blur",e.commit),this._handlers=e}_onKeydown(e){return this._handlers.redo&&(90===e.keyCode&&e.shiftKey&&(e.metaKey||e.ctrlKey)||89===e.keyCode&&e.ctrlKey)?(e.preventDefault(),this._handlers.redo(e)):this._handlers.undo&&90===e.keyCode&&(e.metaKey||e.ctrlKey)?(e.preventDefault(),this._handlers.undo(e)):void(e.isComposing||this._handlers.selectionChange(e))}_onBeforeinput(e){return"historyUndo"===e.inputType&&this._handlers.undo?(e.preventDefault(),this._handlers.undo(e)):"historyRedo"===e.inputType&&this._handlers.redo?(e.preventDefault(),this._handlers.redo(e)):void 0}_onCompositionEnd(e){this._handlers.input(e)}_onInput(e){e.isComposing||this._handlers.input(e)}unbindEvents(){this.input.removeEventListener("keydown",this._onKeydown),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("beforeinput",this._onBeforeinput),this.input.removeEventListener("compositionend",this._onCompositionEnd),this.input.removeEventListener("drop",this._handlers.drop),this.input.removeEventListener("click",this._handlers.click),this.input.removeEventListener("focus",this._handlers.focus),this.input.removeEventListener("blur",this._handlers.commit),this._handlers={}}}ai.HTMLMaskElement=di;class pi extends di{constructor(e){super(e),this.input=e}get _unsafeSelectionStart(){return null!=this.input.selectionStart?this.input.selectionStart:this.value.length}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(e,t){this.input.setSelectionRange(e,t)}get value(){return this.input.value}set value(e){this.input.value=e}}ai.HTMLMaskElement=di;class fi extends di{get _unsafeSelectionStart(){const e=this.rootElement,t=e.getSelection&&e.getSelection(),s=t&&t.anchorOffset,n=t&&t.focusOffset;return null==n||null==s||s<n?s:n}get _unsafeSelectionEnd(){const e=this.rootElement,t=e.getSelection&&e.getSelection(),s=t&&t.anchorOffset,n=t&&t.focusOffset;return null==n||null==s||s>n?s:n}_unsafeSelect(e,t){if(!this.rootElement.createRange)return;const s=this.rootElement.createRange();s.setStart(this.input.firstChild||this.input,e),s.setEnd(this.input.lastChild||this.input,t);const n=this.rootElement,i=n.getSelection&&n.getSelection();i&&(i.removeAllRanges(),i.addRange(s))}get value(){return this.input.textContent||""}set value(e){this.input.textContent=e}}ai.HTMLContenteditableMaskElement=fi;class gi{constructor(){this.states=[],this.currentIndex=0}get currentState(){return this.states[this.currentIndex]}get isEmpty(){return 0===this.states.length}push(e){this.currentIndex<this.states.length-1&&(this.states.length=this.currentIndex+1),this.states.push(e),this.states.length>gi.MAX_LENGTH&&this.states.shift(),this.currentIndex=this.states.length-1}go(e){return this.currentIndex=Math.min(Math.max(this.currentIndex+e,0),this.states.length-1),this.currentState}undo(){return this.go(-1)}redo(){return this.go(1)}clear(){this.states.length=0,this.currentIndex=0}}gi.MAX_LENGTH=100,ai.InputMask=class{constructor(e,t){this.el=e instanceof ci?e:e.isContentEditable&&"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName?new fi(e):new pi(e),this.masked=ui(t),this._listeners={},this._value="",this._unmaskedValue="",this._rawInputValue="",this.history=new gi,this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this._onUndo=this._onUndo.bind(this),this._onRedo=this._onRedo.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}maskEquals(e){var t;return null==e||(null==(t=this.masked)?void 0:t.maskEquals(e))}get mask(){return this.masked.mask}set mask(e){if(this.maskEquals(e))return;if(!(e instanceof ai.Masked)&&this.masked.constructor===li(e))return void this.masked.updateOptions({mask:e});const t=e instanceof ai.Masked?e:ui({mask:e});t.unmaskedValue=this.masked.unmaskedValue,this.masked=t}get value(){return this._value}set value(e){this.value!==e&&(this.masked.value=e,this.updateControl("auto"))}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(e){this.unmaskedValue!==e&&(this.masked.unmaskedValue=e,this.updateControl("auto"))}get rawInputValue(){return this._rawInputValue}set rawInputValue(e){this.rawInputValue!==e&&(this.masked.rawInputValue=e,this.updateControl(),this.alignCursor())}get typedValue(){return this.masked.typedValue}set typedValue(e){this.masked.typedValueEquals(e)||(this.masked.typedValue=e,this.updateControl("auto"))}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange,undo:this._onUndo,redo:this._onRedo})}_unbindEvents(){this.el&&this.el.unbindEvents()}_fireEvent(e,t){const s=this._listeners[e];s&&s.forEach((e=>e(t)))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(e){this.el&&this.el.isActive&&(this.el.select(e,e),this._saveSelection())}_saveSelection(){this.displayValue!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value,this._value=this.masked.value,this._unmaskedValue=this.masked.unmaskedValue,this._rawInputValue=this.masked.rawInputValue}updateControl(e){const t=this.masked.unmaskedValue,s=this.masked.value,n=this.masked.rawInputValue,i=this.displayValue,r=this.unmaskedValue!==t||this.value!==s||this._rawInputValue!==n;this._unmaskedValue=t,this._value=s,this._rawInputValue=n,this.el.value!==i&&(this.el.value=i),"auto"===e?this.alignCursor():null!=e&&(this.cursorPos=e),r&&this._fireChangeEvents(),this._historyChanging||!r&&!this.history.isEmpty||this.history.push({unmaskedValue:t,selection:{start:this.selectionStart,end:this.cursorPos}})}updateOptions(e){const{mask:t,...s}=e,n=!this.maskEquals(t),i=this.masked.optionsIsChanged(s);n&&(this.mask=t),i&&this.masked.updateOptions(s),(n||i)&&this.updateControl()}updateCursor(e){null!=e&&(this.cursorPos=e,this._delayUpdateCursor(e))}_delayUpdateCursor(e){this._abortUpdateCursor(),this._changingCursorPos=e,this._cursorChanging=setTimeout((()=>{this.el&&(this.cursorPos=this._changingCursorPos,this._abortUpdateCursor())}),10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,ei))}alignCursorFriendly(){this.selectionStart===this.cursorPos&&this.alignCursor()}on(e,t){return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),this}off(e,t){if(!this._listeners[e])return this;if(!t)return delete this._listeners[e],this;const s=this._listeners[e].indexOf(t);return s>=0&&this._listeners[e].splice(s,1),this}_onInput(e){this._inputEvent=e,this._abortUpdateCursor();const t=new oi({value:this.el.value,cursorPos:this.cursorPos,oldValue:this.displayValue,oldSelection:this._selection}),s=this.masked.rawInputValue,n=this.masked.splice(t.startChangePos,t.removed.length,t.inserted,t.removeDirection,{input:!0,raw:!0}).offset,i=s===this.masked.rawInputValue?t.removeDirection:Zn;let r=this.masked.nearestInputPos(t.startChangePos+n,i);i!==Zn&&(r=this.masked.nearestInputPos(r,Zn)),this.updateControl(r),delete this._inputEvent}_onChange(){this.displayValue!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}_onDrop(e){e.preventDefault(),e.stopPropagation()}_onFocus(e){this.alignCursorFriendly()}_onClick(e){this.alignCursorFriendly()}_onUndo(){this._applyHistoryState(this.history.undo())}_onRedo(){this._applyHistoryState(this.history.redo())}_applyHistoryState(e){e&&(this._historyChanging=!0,this.unmaskedValue=e.unmaskedValue,this.el.select(e.selection.start,e.selection.end),this._saveSelection(),this._historyChanging=!1)}destroy(){this._unbindEvents(),this._listeners.length=0,delete this.el}};class mi{static normalize(e){return Array.isArray(e)?e:[e,new mi]}constructor(e){Object.assign(this,{inserted:"",rawInserted:"",tailShift:0,skip:!1},e)}aggregate(e){return this.inserted+=e.inserted,this.rawInserted+=e.rawInserted,this.tailShift+=e.tailShift,this.skip=this.skip||e.skip,this}get offset(){return this.tailShift+this.inserted.length}get consumed(){return Boolean(this.rawInserted)||this.skip}equals(e){return this.inserted===e.inserted&&this.tailShift===e.tailShift&&this.rawInserted===e.rawInserted&&this.skip===e.skip}}ai.ChangeDetails=mi;class _i{constructor(e,t,s){void 0===e&&(e=""),void 0===t&&(t=0),this.value=e,this.from=t,this.stop=s}toString(){return this.value}extend(e){this.value+=String(e)}appendTo(e){return e.append(this.toString(),{tail:!0}).aggregate(e._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(e){Object.assign(this,e)}unshift(e){if(!this.value.length||null!=e&&this.from>=e)return"";const t=this.value[0];return this.value=this.value.slice(1),t}shift(){if(!this.value.length)return"";const e=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),e}}class vi{constructor(e){this._value="",this._update({...vi.DEFAULTS,...e}),this._initialized=!0}updateOptions(e){this.optionsIsChanged(e)&&this.withValueRefresh(this._update.bind(this,e))}_update(e){Object.assign(this,e)}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value}reset(){this._value=""}get value(){return this._value}set value(e){this.resolve(e,{input:!0})}resolve(e,t){void 0===t&&(t={input:!0}),this.reset(),this.append(e,t,""),this.doCommit()}get unmaskedValue(){return this.value}set unmaskedValue(e){this.resolve(e,{})}get typedValue(){return this.parse?this.parse(this.value,this):this.unmaskedValue}set typedValue(e){this.format?this.value=this.format(e,this):this.unmaskedValue=String(e)}get rawInputValue(){return this.extractInput(0,this.displayValue.length,{raw:!0})}set rawInputValue(e){this.resolve(e,{raw:!0})}get displayValue(){return this.value}get isComplete(){return!0}get isFilled(){return this.isComplete}nearestInputPos(e,t){return e}totalInputPositions(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),Math.min(this.displayValue.length,t-e)}extractInput(e,t,s){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),this.displayValue.slice(e,t)}extractTail(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),new _i(this.extractInput(e,t),e)}appendTail(e){return Jn(e)&&(e=new _i(String(e))),e.appendTo(this)}_appendCharRaw(e,t){return e?(this._value+=e,new mi({inserted:e,rawInserted:e})):new mi}_appendChar(e,t,s){void 0===t&&(t={});const n=this.state;let i;if([e,i]=this.doPrepareChar(e,t),e&&(i=i.aggregate(this._appendCharRaw(e,t)),!i.rawInserted&&"pad"===this.autofix)){const s=this.state;this.state=n;let r=this.pad(t);const o=this._appendCharRaw(e,t);r=r.aggregate(o),o.rawInserted||r.equals(i)?i=r:this.state=s}if(i.inserted){let e,r=!1!==this.doValidate(t);if(r&&null!=s){const t=this.state;if(!0===this.overwrite){e=s.state;for(let e=0;e<i.rawInserted.length;++e)s.unshift(this.displayValue.length-i.tailShift)}let n=this.appendTail(s);if(r=n.rawInserted.length===s.toString().length,!(r&&n.inserted||"shift"!==this.overwrite)){this.state=t,e=s.state;for(let e=0;e<i.rawInserted.length;++e)s.shift();n=this.appendTail(s),r=n.rawInserted.length===s.toString().length}r&&n.inserted&&(this.state=t)}r||(i=new mi,this.state=n,s&&e&&(s.state=e))}return i}_appendPlaceholder(){return new mi}_appendEager(){return new mi}append(e,t,s){if(!Jn(e))throw new Error("value should be string");const n=Jn(s)?new _i(String(s)):s;let i;null!=t&&t.tail&&(t._beforeTailState=this.state),[e,i]=this.doPrepare(e,t);for(let s=0;s<e.length;++s){const r=this._appendChar(e[s],t,n);if(!r.rawInserted&&!this.doSkipInvalid(e[s],t,n))break;i.aggregate(r)}return(!0===this.eager||"append"===this.eager)&&null!=t&&t.input&&e&&i.aggregate(this._appendEager()),null!=n&&(i.tailShift+=this.appendTail(n).tailShift),i}remove(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),this._value=this.displayValue.slice(0,e)+this.displayValue.slice(t),new mi}withValueRefresh(e){if(this._refreshing||!this._initialized)return e();this._refreshing=!0;const t=this.rawInputValue,s=this.value,n=e();return this.rawInputValue=t,this.value&&this.value!==s&&0===s.indexOf(this.value)&&(this.append(s.slice(this.displayValue.length),{},""),this.doCommit()),delete this._refreshing,n}runIsolated(e){if(this._isolated||!this._initialized)return e(this);this._isolated=!0;const t=this.state,s=e(this);return this.state=t,delete this._isolated,s}doSkipInvalid(e,t,s){return Boolean(this.skipInvalid)}doPrepare(e,t){return void 0===t&&(t={}),mi.normalize(this.prepare?this.prepare(e,this,t):e)}doPrepareChar(e,t){return void 0===t&&(t={}),mi.normalize(this.prepareChar?this.prepareChar(e,this,t):e)}doValidate(e){return(!this.validate||this.validate(this.value,this,e))&&(!this.parent||this.parent.doValidate(e))}doCommit(){this.commit&&this.commit(this.value,this)}splice(e,t,s,n,i){void 0===s&&(s=""),void 0===n&&(n=Zn),void 0===i&&(i={input:!0});const r=e+t,o=this.extractTail(r),a=!0===this.eager||"remove"===this.eager;let l;a&&(n=function(e){switch(e){case ei:return ti;case si:return ni;default:return e}}(n),l=this.extractInput(0,r,{raw:!0}));let h=e;const u=new mi;if(n!==Zn&&(h=this.nearestInputPos(e,t>1&&0!==e&&!a?Zn:n),u.tailShift=h-e),u.aggregate(this.remove(h)),a&&n!==Zn&&l===this.rawInputValue)if(n===ti){let e;for(;l===this.rawInputValue&&(e=this.displayValue.length);)u.aggregate(new mi({tailShift:-1})).aggregate(this.remove(e-1))}else n===ni&&o.unshift();return u.aggregate(this.append(s,i,o))}maskEquals(e){return this.mask===e}optionsIsChanged(e){return!ri(this,e)}typedValueEquals(e){const t=this.typedValue;return e===t||vi.EMPTY_VALUES.includes(e)&&vi.EMPTY_VALUES.includes(t)||!!this.format&&this.format(e,this)===this.format(this.typedValue,this)}pad(e){return new mi}}vi.DEFAULTS={skipInvalid:!0},vi.EMPTY_VALUES=[void 0,null,""],ai.Masked=vi;class yi{constructor(e,t){void 0===e&&(e=[]),void 0===t&&(t=0),this.chunks=e,this.from=t}toString(){return this.chunks.map(String).join("")}extend(e){if(!String(e))return;e=Jn(e)?new _i(String(e)):e;const t=this.chunks[this.chunks.length-1],s=t&&(t.stop===e.stop||null==e.stop)&&e.from===t.from+t.toString().length;if(e instanceof _i)s?t.extend(e.toString()):this.chunks.push(e);else if(e instanceof yi){if(null==e.stop){let t;for(;e.chunks.length&&null==e.chunks[0].stop;)t=e.chunks.shift(),t.from+=e.from,this.extend(t)}e.toString()&&(e.stop=e.blockIndex,this.chunks.push(e))}}appendTo(e){if(!(e instanceof ai.MaskedPattern))return new _i(this.toString()).appendTo(e);const t=new mi;for(let s=0;s<this.chunks.length;++s){const n=this.chunks[s],i=e._mapPosToBlock(e.displayValue.length),r=n.stop;let o;if(null!=r&&(!i||i.index<=r)&&((n instanceof yi||e._stops.indexOf(r)>=0)&&t.aggregate(e._appendPlaceholder(r)),o=n instanceof yi&&e._blocks[r]),o){const s=o.appendTail(n);t.aggregate(s);const i=n.toString().slice(s.rawInserted.length);i&&t.aggregate(e.append(i,{tail:!0}))}else t.aggregate(e.append(n.toString(),{tail:!0}))}return t}get state(){return{chunks:this.chunks.map((e=>e.state)),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(e){const{chunks:t,...s}=e;Object.assign(this,s),this.chunks=t.map((e=>{const t="chunks"in e?new yi:new _i;return t.state=e,t}))}unshift(e){if(!this.chunks.length||null!=e&&this.from>=e)return"";const t=null!=e?e-this.from:e;let s=0;for(;s<this.chunks.length;){const e=this.chunks[s],n=e.unshift(t);if(e.toString()){if(!n)break;++s}else this.chunks.splice(s,1);if(n)return n}return""}shift(){if(!this.chunks.length)return"";let e=this.chunks.length-1;for(;0<=e;){const t=this.chunks[e],s=t.shift();if(t.toString()){if(!s)break;--e}else this.chunks.splice(e,1);if(s)return s}return""}}class wi{constructor(e,t){this.masked=e,this._log=[];const{offset:s,index:n}=e._mapPosToBlock(t)||(t<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=s,this.index=n,this.ok=!1}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(e){Object.assign(this,e)}pushState(){this._log.push(this.state)}popState(){const e=this._log.pop();return e&&(this.state=e),e}bindBlock(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.displayValue.length))}_pushLeft(e){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=(null==(t=this.block)?void 0:t.displayValue.length)||0){var t;if(e())return this.ok=!0}return this.ok=!1}_pushRight(e){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(e())return this.ok=!0;return this.ok=!1}pushLeftBeforeFilled(){return this._pushLeft((()=>{if(!this.block.isFixed&&this.block.value)return this.offset=this.block.nearestInputPos(this.offset,ti),0!==this.offset||void 0}))}pushLeftBeforeInput(){return this._pushLeft((()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,ei),!0}))}pushLeftBeforeRequired(){return this._pushLeft((()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,ei),!0}))}pushRightBeforeFilled(){return this._pushRight((()=>{if(!this.block.isFixed&&this.block.value)return this.offset=this.block.nearestInputPos(this.offset,ni),this.offset!==this.block.value.length||void 0}))}pushRightBeforeInput(){return this._pushRight((()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,Zn),!0}))}pushRightBeforeRequired(){return this._pushRight((()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,Zn),!0}))}}class bi{constructor(e){Object.assign(this,e),this._value="",this.isFixed=!0}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get rawInputValue(){return this._isRawInput?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=!1,this._value=""}remove(e,t){return void 0===e&&(e=0),void 0===t&&(t=this._value.length),this._value=this._value.slice(0,e)+this._value.slice(t),this._value||(this._isRawInput=!1),new mi}nearestInputPos(e,t){void 0===t&&(t=Zn);const s=this._value.length;switch(t){case ei:case ti:return 0;default:return s}}totalInputPositions(e,t){return void 0===e&&(e=0),void 0===t&&(t=this._value.length),this._isRawInput?t-e:0}extractInput(e,t,s){return void 0===e&&(e=0),void 0===t&&(t=this._value.length),void 0===s&&(s={}),s.raw&&this._isRawInput&&this._value.slice(e,t)||""}get isComplete(){return!0}get isFilled(){return Boolean(this._value)}_appendChar(e,t){if(void 0===t&&(t={}),this.isFilled)return new mi;const s=!0===this.eager||"append"===this.eager,n=this.char===e&&(this.isUnmasking||t.input||t.raw)&&(!t.raw||!s)&&!t.tail,i=new mi({inserted:this.char,rawInserted:n?this.char:""});return this._value=this.char,this._isRawInput=n&&(t.raw||t.input),i}_appendEager(){return this._appendChar(this.char,{tail:!0})}_appendPlaceholder(){const e=new mi;return this.isFilled||(this._value=e.inserted=this.char),e}extractTail(){return new _i("")}appendTail(e){return Jn(e)&&(e=new _i(String(e))),e.appendTo(this)}append(e,t,s){const n=this._appendChar(e[0],t);return null!=s&&(n.tailShift+=this.appendTail(s).tailShift),n}doCommit(){}get state(){return{_value:this._value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value,this._isRawInput=Boolean(e._rawInputValue)}pad(e){return this._appendPlaceholder()}}class ki{constructor(e){const{parent:t,isOptional:s,placeholderChar:n,displayChar:i,lazy:r,eager:o,...a}=e;this.masked=ui(a),Object.assign(this,{parent:t,isOptional:s,placeholderChar:n,displayChar:i,lazy:r,eager:o})}reset(){this.isFilled=!1,this.masked.reset()}remove(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),0===e&&t>=1?(this.isFilled=!1,this.masked.remove(e,t)):new mi}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get rawInputValue(){return this.masked.rawInputValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return Boolean(this.masked.value)||this.isOptional}_appendChar(e,t){if(void 0===t&&(t={}),this.isFilled)return new mi;const s=this.masked.state;let n=this.masked._appendChar(e,this.currentMaskFlags(t));return n.inserted&&!1===this.doValidate(t)&&(n=new mi,this.masked.state=s),n.inserted||this.isOptional||this.lazy||t.input||(n.inserted=this.placeholderChar),n.skip=!n.inserted&&!this.isOptional,this.isFilled=Boolean(n.inserted),n}append(e,t,s){return this.masked.append(e,this.currentMaskFlags(t),s)}_appendPlaceholder(){return this.isFilled||this.isOptional?new mi:(this.isFilled=!0,new mi({inserted:this.placeholderChar}))}_appendEager(){return new mi}extractTail(e,t){return this.masked.extractTail(e,t)}appendTail(e){return this.masked.appendTail(e)}extractInput(e,t,s){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),this.masked.extractInput(e,t,s)}nearestInputPos(e,t){void 0===t&&(t=Zn);const s=this.value.length,n=Math.min(Math.max(e,0),s);switch(t){case ei:case ti:return this.isComplete?n:0;case si:case ni:return this.isComplete?n:s;default:return n}}totalInputPositions(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),this.value.slice(e,t).length}doValidate(e){return this.masked.doValidate(this.currentMaskFlags(e))&&(!this.parent||this.parent.doValidate(this.currentMaskFlags(e)))}doCommit(){this.masked.doCommit()}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue,masked:this.masked.state,isFilled:this.isFilled}}set state(e){this.masked.state=e.masked,this.isFilled=e.isFilled}currentMaskFlags(e){var t;return{...e,_beforeTailState:(null==e||null==(t=e._beforeTailState)?void 0:t.masked)||(null==e?void 0:e._beforeTailState)}}pad(e){return new mi}}ki.DEFAULT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./},ai.MaskedRegExp=class extends vi{updateOptions(e){super.updateOptions(e)}_update(e){const t=e.mask;t&&(e.validate=e=>e.search(t)>=0),super._update(e)}};class Ci extends vi{constructor(e){super({...Ci.DEFAULTS,...e,definitions:Object.assign({},ki.DEFAULT_DEFINITIONS,null==e?void 0:e.definitions)})}updateOptions(e){super.updateOptions(e)}_update(e){e.definitions=Object.assign({},this.definitions,e.definitions),super._update(e),this._rebuildMask()}_rebuildMask(){const e=this.definitions;this._blocks=[],this.exposeBlock=void 0,this._stops=[],this._maskedBlocks={};const t=this.mask;if(!t||!e)return;let s=!1,n=!1;for(let i=0;i<t.length;++i){if(this.blocks){const e=t.slice(i),s=Object.keys(this.blocks).filter((t=>0===e.indexOf(t)));s.sort(((e,t)=>t.length-e.length));const n=s[0];if(n){const{expose:e,repeat:t,...s}=hi(this.blocks[n]),r={lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite,autofix:this.autofix,...s,repeat:t,parent:this},o=null!=t?new ai.RepeatBlock(r):ui(r);o&&(this._blocks.push(o),e&&(this.exposeBlock=o),this._maskedBlocks[n]||(this._maskedBlocks[n]=[]),this._maskedBlocks[n].push(this._blocks.length-1)),i+=n.length-1;continue}}let r=t[i],o=r in e;if(r===Ci.STOP_CHAR){this._stops.push(this._blocks.length);continue}if("{"===r||"}"===r){s=!s;continue}if("["===r||"]"===r){n=!n;continue}if(r===Ci.ESCAPE_CHAR){if(++i,r=t[i],!r)break;o=!1}const a=o?new ki({isOptional:n,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,...hi(e[r]),parent:this}):new bi({char:r,eager:this.eager,isUnmasking:s});this._blocks.push(a)}}get state(){return{...super.state,_blocks:this._blocks.map((e=>e.state))}}set state(e){if(!e)return void this.reset();const{_blocks:t,...s}=e;this._blocks.forEach(((e,s)=>e.state=t[s])),super.state=s}reset(){super.reset(),this._blocks.forEach((e=>e.reset()))}get isComplete(){return this.exposeBlock?this.exposeBlock.isComplete:this._blocks.every((e=>e.isComplete))}get isFilled(){return this._blocks.every((e=>e.isFilled))}get isFixed(){return this._blocks.every((e=>e.isFixed))}get isOptional(){return this._blocks.every((e=>e.isOptional))}doCommit(){this._blocks.forEach((e=>e.doCommit())),super.doCommit()}get unmaskedValue(){return this.exposeBlock?this.exposeBlock.unmaskedValue:this._blocks.reduce(((e,t)=>e+t.unmaskedValue),"")}set unmaskedValue(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.unmaskedValue=e,this.appendTail(t),this.doCommit()}else super.unmaskedValue=e}get value(){return this.exposeBlock?this.exposeBlock.value:this._blocks.reduce(((e,t)=>e+t.value),"")}set value(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.value=e,this.appendTail(t),this.doCommit()}else super.value=e}get typedValue(){return this.exposeBlock?this.exposeBlock.typedValue:super.typedValue}set typedValue(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.typedValue=e,this.appendTail(t),this.doCommit()}else super.typedValue=e}get displayValue(){return this._blocks.reduce(((e,t)=>e+t.displayValue),"")}appendTail(e){return super.appendTail(e).aggregate(this._appendPlaceholder())}_appendEager(){var e;const t=new mi;let s=null==(e=this._mapPosToBlock(this.displayValue.length))?void 0:e.index;if(null==s)return t;this._blocks[s].isFilled&&++s;for(let e=s;e<this._blocks.length;++e){const s=this._blocks[e]._appendEager();if(!s.inserted)break;t.aggregate(s)}return t}_appendCharRaw(e,t){void 0===t&&(t={});const s=this._mapPosToBlock(this.displayValue.length),n=new mi;if(!s)return n;for(let r,o=s.index;r=this._blocks[o];++o){var i;const s=r._appendChar(e,{...t,_beforeTailState:null==(i=t._beforeTailState)||null==(i=i._blocks)?void 0:i[o]});if(n.aggregate(s),s.consumed)break}return n}extractTail(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length);const s=new yi;return e===t||this._forEachBlocksInRange(e,t,((e,t,n,i)=>{const r=e.extractTail(n,i);r.stop=this._findStopBefore(t),r.from=this._blockStartPos(t),r instanceof yi&&(r.blockIndex=t),s.extend(r)})),s}extractInput(e,t,s){if(void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),void 0===s&&(s={}),e===t)return"";let n="";return this._forEachBlocksInRange(e,t,((e,t,i,r)=>{n+=e.extractInput(i,r,s)})),n}_findStopBefore(e){let t;for(let s=0;s<this._stops.length;++s){const n=this._stops[s];if(!(n<=e))break;t=n}return t}_appendPlaceholder(e){const t=new mi;if(this.lazy&&null==e)return t;const s=this._mapPosToBlock(this.displayValue.length);if(!s)return t;const n=s.index,i=null!=e?e:this._blocks.length;return this._blocks.slice(n,i).forEach((s=>{var n;s.lazy&&null==e||t.aggregate(s._appendPlaceholder(null==(n=s._blocks)?void 0:n.length))})),t}_mapPosToBlock(e){let t="";for(let s=0;s<this._blocks.length;++s){const n=this._blocks[s],i=t.length;if(t+=n.displayValue,e<=t.length)return{index:s,offset:e-i}}}_blockStartPos(e){return this._blocks.slice(0,e).reduce(((e,t)=>e+t.displayValue.length),0)}_forEachBlocksInRange(e,t,s){void 0===t&&(t=this.displayValue.length);const n=this._mapPosToBlock(e);if(n){const e=this._mapPosToBlock(t),i=e&&n.index===e.index,r=n.offset,o=e&&i?e.offset:this._blocks[n.index].displayValue.length;if(s(this._blocks[n.index],n.index,r,o),e&&!i){for(let t=n.index+1;t<e.index;++t)s(this._blocks[t],t,0,this._blocks[t].displayValue.length);s(this._blocks[e.index],e.index,0,e.offset)}}}remove(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length);const s=super.remove(e,t);return this._forEachBlocksInRange(e,t,((e,t,n,i)=>{s.aggregate(e.remove(n,i))})),s}nearestInputPos(e,t){if(void 0===t&&(t=Zn),!this._blocks.length)return 0;const s=new wi(this,e);if(t===Zn)return s.pushRightBeforeInput()?s.pos:(s.popState(),s.pushLeftBeforeInput()?s.pos:this.displayValue.length);if(t===ei||t===ti){if(t===ei){if(s.pushRightBeforeFilled(),s.ok&&s.pos===e)return e;s.popState()}if(s.pushLeftBeforeInput(),s.pushLeftBeforeRequired(),s.pushLeftBeforeFilled(),t===ei){if(s.pushRightBeforeInput(),s.pushRightBeforeRequired(),s.ok&&s.pos<=e)return s.pos;if(s.popState(),s.ok&&s.pos<=e)return s.pos;s.popState()}return s.ok?s.pos:t===ti?0:(s.popState(),s.ok?s.pos:(s.popState(),s.ok?s.pos:0))}return t===si||t===ni?(s.pushRightBeforeInput(),s.pushRightBeforeRequired(),s.pushRightBeforeFilled()?s.pos:t===ni?this.displayValue.length:(s.popState(),s.ok?s.pos:(s.popState(),s.ok?s.pos:this.nearestInputPos(e,ei)))):e}totalInputPositions(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length);let s=0;return this._forEachBlocksInRange(e,t,((e,t,n,i)=>{s+=e.totalInputPositions(n,i)})),s}maskedBlock(e){return this.maskedBlocks(e)[0]}maskedBlocks(e){const t=this._maskedBlocks[e];return t?t.map((e=>this._blocks[e])):[]}pad(e){const t=new mi;return this._forEachBlocksInRange(0,this.displayValue.length,(s=>t.aggregate(s.pad(e)))),t}}Ci.DEFAULTS={...vi.DEFAULTS,lazy:!0,placeholderChar:"_"},Ci.STOP_CHAR="`",Ci.ESCAPE_CHAR="\\",Ci.InputDefinition=ki,Ci.FixedDefinition=bi,ai.MaskedPattern=Ci;class Ti extends Ci{get _matchFrom(){return this.maxLength-String(this.from).length}constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){const{to:t=this.to||0,from:s=this.from||0,maxLength:n=this.maxLength||0,autofix:i=this.autofix,...r}=e;this.to=t,this.from=s,this.maxLength=Math.max(String(t).length,n),this.autofix=i;const o=String(this.from).padStart(this.maxLength,"0"),a=String(this.to).padStart(this.maxLength,"0");let l=0;for(;l<a.length&&a[l]===o[l];)++l;r.mask=a.slice(0,l).replace(/0/g,"\\0")+"0".repeat(this.maxLength-l),super._update(r)}get isComplete(){return super.isComplete&&Boolean(this.value)}boundaries(e){let t="",s="";const[,n,i]=e.match(/^(\D*)(\d*)(\D*)/)||[];return i&&(t="0".repeat(n.length)+i,s="9".repeat(n.length)+i),t=t.padEnd(this.maxLength,"0"),s=s.padEnd(this.maxLength,"9"),[t,s]}doPrepareChar(e,t){let s;return void 0===t&&(t={}),[e,s]=super.doPrepareChar(e.replace(/\D/g,""),t),e||(s.skip=!this.isComplete),[e,s]}_appendCharRaw(e,t){if(void 0===t&&(t={}),!this.autofix||this.value.length+1>this.maxLength)return super._appendCharRaw(e,t);const s=String(this.from).padStart(this.maxLength,"0"),n=String(this.to).padStart(this.maxLength,"0"),[i,r]=this.boundaries(this.value+e);return Number(r)<this.from?super._appendCharRaw(s[this.value.length],t):Number(i)>this.to?!t.tail&&"pad"===this.autofix&&this.value.length+1<this.maxLength?super._appendCharRaw(s[this.value.length],t).aggregate(this._appendCharRaw(e,t)):super._appendCharRaw(n[this.value.length],t):super._appendCharRaw(e,t)}doValidate(e){const t=this.value;if(-1===t.search(/[^0]/)&&t.length<=this._matchFrom)return!0;const[s,n]=this.boundaries(t);return this.from<=Number(n)&&Number(s)<=this.to&&super.doValidate(e)}pad(e){const t=new mi;if(this.value.length===this.maxLength)return t;const s=this.value,n=this.maxLength-this.value.length;if(n){this.reset();for(let s=0;s<n;++s)t.aggregate(super._appendCharRaw("0",e));s.split("").forEach((e=>this._appendCharRaw(e)))}return t}}ai.MaskedRange=Ti;class Si extends Ci{static extractPatternOptions(e){const{mask:t,pattern:s,...n}=e;return{...n,mask:Jn(t)?t:s}}constructor(e){super(Si.extractPatternOptions({...Si.DEFAULTS,...e}))}updateOptions(e){super.updateOptions(e)}_update(e){const{mask:t,pattern:s,blocks:n,...i}={...Si.DEFAULTS,...e},r=Object.assign({},Si.GET_DEFAULT_BLOCKS());e.min&&(r.Y.from=e.min.getFullYear()),e.max&&(r.Y.to=e.max.getFullYear()),e.min&&e.max&&r.Y.from===r.Y.to&&(r.m.from=e.min.getMonth()+1,r.m.to=e.max.getMonth()+1,r.m.from===r.m.to&&(r.d.from=e.min.getDate(),r.d.to=e.max.getDate())),Object.assign(r,this.blocks,n),super._update({...i,mask:Jn(t)?t:s,blocks:r})}doValidate(e){const t=this.date;return super.doValidate(e)&&(!this.isComplete||this.isDateExist(this.value)&&null!=t&&(null==this.min||this.min<=t)&&(null==this.max||t<=this.max))}isDateExist(e){return this.format(this.parse(e,this),this).indexOf(e)>=0}get date(){return this.typedValue}set date(e){this.typedValue=e}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(e){super.typedValue=e}maskEquals(e){return e===Date||super.maskEquals(e)}optionsIsChanged(e){return super.optionsIsChanged(Si.extractPatternOptions(e))}}Si.GET_DEFAULT_BLOCKS=()=>({d:{mask:Ti,from:1,to:31,maxLength:2},m:{mask:Ti,from:1,to:12,maxLength:2},Y:{mask:Ti,from:1900,to:9999}}),Si.DEFAULTS={...Ci.DEFAULTS,mask:Date,pattern:"d{.}`m{.}`Y",format:(e,t)=>e?[String(e.getDate()).padStart(2,"0"),String(e.getMonth()+1).padStart(2,"0"),e.getFullYear()].join("."):"",parse:(e,t)=>{const[s,n,i]=e.split(".").map(Number);return new Date(i,n-1,s)}},ai.MaskedDate=Si;class Ei extends vi{constructor(e){super({...Ei.DEFAULTS,...e}),this.currentMask=void 0}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),"mask"in e&&(this.exposeMask=void 0,this.compiledMasks=Array.isArray(e.mask)?e.mask.map((e=>{const{expose:t,...s}=hi(e),n=ui({overwrite:this._overwrite,eager:this._eager,skipInvalid:this._skipInvalid,...s});return t&&(this.exposeMask=n),n})):[])}_appendCharRaw(e,t){void 0===t&&(t={});const s=this._applyDispatch(e,t);return this.currentMask&&s.aggregate(this.currentMask._appendChar(e,this.currentMaskFlags(t))),s}_applyDispatch(e,t,s){void 0===e&&(e=""),void 0===t&&(t={}),void 0===s&&(s="");const n=t.tail&&null!=t._beforeTailState?t._beforeTailState._value:this.value,i=this.rawInputValue,r=t.tail&&null!=t._beforeTailState?t._beforeTailState._rawInputValue:i,o=i.slice(r.length),a=this.currentMask,l=new mi,h=null==a?void 0:a.state;return this.currentMask=this.doDispatch(e,{...t},s),this.currentMask&&(this.currentMask!==a?(this.currentMask.reset(),r&&(this.currentMask.append(r,{raw:!0}),l.tailShift=this.currentMask.value.length-n.length),o&&(l.tailShift+=this.currentMask.append(o,{raw:!0,tail:!0}).tailShift)):h&&(this.currentMask.state=h)),l}_appendPlaceholder(){const e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendPlaceholder()),e}_appendEager(){const e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendEager()),e}appendTail(e){const t=new mi;return e&&t.aggregate(this._applyDispatch("",{},e)),t.aggregate(this.currentMask?this.currentMask.appendTail(e):super.appendTail(e))}currentMaskFlags(e){var t,s;return{...e,_beforeTailState:(null==(t=e._beforeTailState)?void 0:t.currentMaskRef)===this.currentMask&&(null==(s=e._beforeTailState)?void 0:s.currentMask)||e._beforeTailState}}doDispatch(e,t,s){return void 0===t&&(t={}),void 0===s&&(s=""),this.dispatch(e,this,t,s)}doValidate(e){return super.doValidate(e)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(e)))}doPrepare(e,t){void 0===t&&(t={});let[s,n]=super.doPrepare(e,t);if(this.currentMask){let e;[s,e]=super.doPrepare(s,this.currentMaskFlags(t)),n=n.aggregate(e)}return[s,n]}doPrepareChar(e,t){void 0===t&&(t={});let[s,n]=super.doPrepareChar(e,t);if(this.currentMask){let e;[s,e]=super.doPrepareChar(s,this.currentMaskFlags(t)),n=n.aggregate(e)}return[s,n]}reset(){var e;null==(e=this.currentMask)||e.reset(),this.compiledMasks.forEach((e=>e.reset()))}get value(){return this.exposeMask?this.exposeMask.value:this.currentMask?this.currentMask.value:""}set value(e){this.exposeMask?(this.exposeMask.value=e,this.currentMask=this.exposeMask,this._applyDispatch()):super.value=e}get unmaskedValue(){return this.exposeMask?this.exposeMask.unmaskedValue:this.currentMask?this.currentMask.unmaskedValue:""}set unmaskedValue(e){this.exposeMask?(this.exposeMask.unmaskedValue=e,this.currentMask=this.exposeMask,this._applyDispatch()):super.unmaskedValue=e}get typedValue(){return this.exposeMask?this.exposeMask.typedValue:this.currentMask?this.currentMask.typedValue:""}set typedValue(e){if(this.exposeMask)return this.exposeMask.typedValue=e,this.currentMask=this.exposeMask,void this._applyDispatch();let t=String(e);this.currentMask&&(this.currentMask.typedValue=e,t=this.currentMask.unmaskedValue),this.unmaskedValue=t}get displayValue(){return this.currentMask?this.currentMask.displayValue:""}get isComplete(){var e;return Boolean(null==(e=this.currentMask)?void 0:e.isComplete)}get isFilled(){var e;return Boolean(null==(e=this.currentMask)?void 0:e.isFilled)}remove(e,t){const s=new mi;return this.currentMask&&s.aggregate(this.currentMask.remove(e,t)).aggregate(this._applyDispatch()),s}get state(){var e;return{...super.state,_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map((e=>e.state)),currentMaskRef:this.currentMask,currentMask:null==(e=this.currentMask)?void 0:e.state}}set state(e){const{compiledMasks:t,currentMaskRef:s,currentMask:n,...i}=e;t&&this.compiledMasks.forEach(((e,s)=>e.state=t[s])),null!=s&&(this.currentMask=s,this.currentMask.state=n),super.state=i}extractInput(e,t,s){return this.currentMask?this.currentMask.extractInput(e,t,s):""}extractTail(e,t){return this.currentMask?this.currentMask.extractTail(e,t):super.extractTail(e,t)}doCommit(){this.currentMask&&this.currentMask.doCommit(),super.doCommit()}nearestInputPos(e,t){return this.currentMask?this.currentMask.nearestInputPos(e,t):super.nearestInputPos(e,t)}get overwrite(){return this.currentMask?this.currentMask.overwrite:this._overwrite}set overwrite(e){this._overwrite=e}get eager(){return this.currentMask?this.currentMask.eager:this._eager}set eager(e){this._eager=e}get skipInvalid(){return this.currentMask?this.currentMask.skipInvalid:this._skipInvalid}set skipInvalid(e){this._skipInvalid=e}get autofix(){return this.currentMask?this.currentMask.autofix:this._autofix}set autofix(e){this._autofix=e}maskEquals(e){return Array.isArray(e)?this.compiledMasks.every(((t,s)=>{if(!e[s])return;const{mask:n,...i}=e[s];return ri(t,i)&&t.maskEquals(n)})):super.maskEquals(e)}typedValueEquals(e){var t;return Boolean(null==(t=this.currentMask)?void 0:t.typedValueEquals(e))}}Ei.DEFAULTS={...vi.DEFAULTS,dispatch:(e,t,s,n)=>{if(!t.compiledMasks.length)return;const i=t.rawInputValue,r=t.compiledMasks.map(((r,o)=>{const a=t.currentMask===r,l=a?r.displayValue.length:r.nearestInputPos(r.displayValue.length,ti);return r.rawInputValue!==i?(r.reset(),r.append(i,{raw:!0})):a||r.remove(l),r.append(e,t.currentMaskFlags(s)),r.appendTail(n),{index:o,weight:r.rawInputValue.length,totalInputPositions:r.totalInputPositions(0,Math.max(l,r.nearestInputPos(r.displayValue.length,ti)))}}));return r.sort(((e,t)=>t.weight-e.weight||t.totalInputPositions-e.totalInputPositions)),t.compiledMasks[r[0].index]}},ai.MaskedDynamic=Ei;class xi extends Ci{constructor(e){super({...xi.DEFAULTS,...e})}updateOptions(e){super.updateOptions(e)}_update(e){const{enum:t,...s}=e;if(t){const e=t.map((e=>e.length)),n=Math.min(...e),i=Math.max(...e)-n;s.mask="*".repeat(n),i&&(s.mask+="["+"*".repeat(i)+"]"),this.enum=t}super._update(s)}_appendCharRaw(e,t){void 0===t&&(t={});const s=Math.min(this.nearestInputPos(0,ni),this.value.length),n=this.enum.filter((t=>this.matchValue(t,this.unmaskedValue+e,s)));if(n.length){1===n.length&&this._forEachBlocksInRange(0,this.value.length,((e,s)=>{const i=n[0][s];s>=this.value.length||i===e.value||(e.reset(),e._appendChar(i,t))}));const e=super._appendCharRaw(n[0][this.value.length],t);return 1===n.length&&n[0].slice(this.unmaskedValue.length).split("").forEach((t=>e.aggregate(super._appendCharRaw(t)))),e}return new mi({skip:!this.isComplete})}extractTail(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),new _i("",e)}remove(e,t){if(void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),e===t)return new mi;const s=Math.min(super.nearestInputPos(0,ni),this.value.length);let n;for(n=e;n>=0&&!(this.enum.filter((e=>this.matchValue(e,this.value.slice(s,n),s))).length>1);--n);const i=super.remove(n,t);return i.tailShift+=n-e,i}get isComplete(){return this.enum.indexOf(this.value)>=0}}var Ii;xi.DEFAULTS={...Ci.DEFAULTS,matchValue:(e,t,s)=>e.indexOf(t,s)===s},ai.MaskedEnum=xi,ai.MaskedFunction=class extends vi{updateOptions(e){super.updateOptions(e)}_update(e){super._update({...e,validate:e.mask})}};class Pi extends vi{constructor(e){super({...Pi.DEFAULTS,...e})}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),this._updateRegExps()}_updateRegExps(){const e="^"+(this.allowNegative?"[+|\\-]?":""),t=(this.scale?"("+ii(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExp=new RegExp(e+"\\d*"+t),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(ii).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(ii(this.thousandsSeparator),"g")}_removeThousandsSeparators(e){return e.replace(this._thousandsSeparatorRegExp,"")}_insertThousandsSeparators(e){const t=e.split(this.radix);return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),t.join(this.radix)}doPrepareChar(e,t){void 0===t&&(t={});const[s,n]=super.doPrepareChar(this._removeThousandsSeparators(this.scale&&this.mapToRadix.length&&(t.input&&t.raw||!t.input&&!t.raw)?e.replace(this._mapToRadixRegExp,this.radix):e),t);return e&&!s&&(n.skip=!0),!s||this.allowPositive||this.value||"-"===s||n.aggregate(this._appendChar("-")),[s,n]}_separatorsCount(e,t){void 0===t&&(t=!1);let s=0;for(let n=0;n<e;++n)this._value.indexOf(this.thousandsSeparator,n)===n&&(++s,t&&(e+=this.thousandsSeparator.length));return s}_separatorsCountFromSlice(e){return void 0===e&&(e=this._value),this._separatorsCount(this._removeThousandsSeparators(e).length,!0)}extractInput(e,t,s){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),[e,t]=this._adjustRangeWithSeparators(e,t),this._removeThousandsSeparators(super.extractInput(e,t,s))}_appendCharRaw(e,t){void 0===t&&(t={});const s=t.tail&&t._beforeTailState?t._beforeTailState._value:this._value,n=this._separatorsCountFromSlice(s);this._value=this._removeThousandsSeparators(this.value);const i=this._value;this._value+=e;const r=this.number;let o,a=!isNaN(r),l=!1;if(a){let e;null!=this.min&&this.min<0&&this.number<this.min&&(e=this.min),null!=this.max&&this.max>0&&this.number>this.max&&(e=this.max),null!=e&&(this.autofix?(this._value=this.format(e,this).replace(Pi.UNMASKED_RADIX,this.radix),l||(l=i===this._value&&!t.tail)):a=!1),a&&(a=Boolean(this._value.match(this._numberRegExp)))}a?o=new mi({inserted:this._value.slice(i.length),rawInserted:l?"":e,skip:l}):(this._value=i,o=new mi),this._value=this._insertThousandsSeparators(this._value);const h=t.tail&&t._beforeTailState?t._beforeTailState._value:this._value,u=this._separatorsCountFromSlice(h);return o.tailShift+=(u-n)*this.thousandsSeparator.length,o}_findSeparatorAround(e){if(this.thousandsSeparator){const t=e-this.thousandsSeparator.length+1,s=this.value.indexOf(this.thousandsSeparator,t);if(s<=e)return s}return-1}_adjustRangeWithSeparators(e,t){const s=this._findSeparatorAround(e);s>=0&&(e=s);const n=this._findSeparatorAround(t);return n>=0&&(t=n+this.thousandsSeparator.length),[e,t]}remove(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),[e,t]=this._adjustRangeWithSeparators(e,t);const s=this.value.slice(0,e),n=this.value.slice(t),i=this._separatorsCount(s.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(s+n));const r=this._separatorsCountFromSlice(s);return new mi({tailShift:(r-i)*this.thousandsSeparator.length})}nearestInputPos(e,t){if(!this.thousandsSeparator)return e;switch(t){case Zn:case ei:case ti:{const s=this._findSeparatorAround(e-1);if(s>=0){const n=s+this.thousandsSeparator.length;if(e<n||this.value.length<=n||t===ti)return s}break}case si:case ni:{const t=this._findSeparatorAround(e);if(t>=0)return t+this.thousandsSeparator.length}}return e}doCommit(){if(this.value){const e=this.number;let t=e;null!=this.min&&(t=Math.max(t,this.min)),null!=this.max&&(t=Math.min(t,this.max)),t!==e&&(this.unmaskedValue=this.format(t,this));let s=this.value;this.normalizeZeros&&(s=this._normalizeZeros(s)),this.padFractionalZeros&&this.scale>0&&(s=this._padFractionalZeros(s)),this._value=s}super.doCommit()}_normalizeZeros(e){const t=this._removeThousandsSeparators(e).split(this.radix);return t[0]=t[0].replace(/^(\D*)(0*)(\d*)/,((e,t,s,n)=>t+n)),e.length&&!/\d$/.test(t[0])&&(t[0]=t[0]+"0"),t.length>1&&(t[1]=t[1].replace(/0*$/,""),t[1].length||(t.length=1)),this._insertThousandsSeparators(t.join(this.radix))}_padFractionalZeros(e){if(!e)return e;const t=e.split(this.radix);return t.length<2&&t.push(""),t[1]=t[1].padEnd(this.scale,"0"),t.join(this.radix)}doSkipInvalid(e,t,s){void 0===t&&(t={});const n=0===this.scale&&e!==this.thousandsSeparator&&(e===this.radix||e===Pi.UNMASKED_RADIX||this.mapToRadix.includes(e));return super.doSkipInvalid(e,t,s)&&!n}get unmaskedValue(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,Pi.UNMASKED_RADIX)}set unmaskedValue(e){super.unmaskedValue=e}get typedValue(){return this.parse(this.unmaskedValue,this)}set typedValue(e){this.rawInputValue=this.format(e,this).replace(Pi.UNMASKED_RADIX,this.radix)}get number(){return this.typedValue}set number(e){this.typedValue=e}get allowNegative(){return null!=this.min&&this.min<0||null!=this.max&&this.max<0}get allowPositive(){return null!=this.min&&this.min>0||null!=this.max&&this.max>0}typedValueEquals(e){return(super.typedValueEquals(e)||Pi.EMPTY_VALUES.includes(e)&&Pi.EMPTY_VALUES.includes(this.typedValue))&&!(0===e&&""===this.value)}}Ii=Pi,Pi.UNMASKED_RADIX=".",Pi.EMPTY_VALUES=[...vi.EMPTY_VALUES,0],Pi.DEFAULTS={...vi.DEFAULTS,mask:Number,radix:",",thousandsSeparator:"",mapToRadix:[Ii.UNMASKED_RADIX],min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,scale:2,normalizeZeros:!0,padFractionalZeros:!1,parse:Number,format:e=>e.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20})},ai.MaskedNumber=Pi;const Ai={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function Mi(e,t,s){void 0===t&&(t=Ai.MASKED),void 0===s&&(s=Ai.MASKED);const n=ui(e);return e=>n.runIsolated((n=>(n[t]=e,n[s])))}ai.PIPE_TYPE=Ai,ai.createPipe=Mi,ai.pipe=function(e,t,s,n){return Mi(t,s,n)(e)},ai.RepeatBlock=class extends Ci{get repeatFrom(){var e;return null!=(e=Array.isArray(this.repeat)?this.repeat[0]:this.repeat===1/0?0:this.repeat)?e:0}get repeatTo(){var e;return null!=(e=Array.isArray(this.repeat)?this.repeat[1]:this.repeat)?e:1/0}constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){var t,s,n;const{repeat:i,...r}=hi(e);this._blockOpts=Object.assign({},this._blockOpts,r);const o=ui(this._blockOpts);this.repeat=null!=(t=null!=(s=null!=i?i:o.repeat)?s:this.repeat)?t:1/0,super._update({mask:"m".repeat(Math.max(this.repeatTo===1/0&&(null==(n=this._blocks)?void 0:n.length)||0,this.repeatFrom)),blocks:{m:o},eager:o.eager,overwrite:o.overwrite,skipInvalid:o.skipInvalid,lazy:o.lazy,placeholderChar:o.placeholderChar,displayChar:o.displayChar})}_allocateBlock(e){return e<this._blocks.length?this._blocks[e]:this.repeatTo===1/0||this._blocks.length<this.repeatTo?(this._blocks.push(ui(this._blockOpts)),this.mask+="m",this._blocks[this._blocks.length-1]):void 0}_appendCharRaw(e,t){void 0===t&&(t={});const s=new mi;for(let a,l,h=null!=(n=null==(i=this._mapPosToBlock(this.displayValue.length))?void 0:i.index)?n:Math.max(this._blocks.length-1,0);a=null!=(r=this._blocks[h])?r:l=!l&&this._allocateBlock(h);++h){var n,i,r,o;const u=a._appendChar(e,{...t,_beforeTailState:null==(o=t._beforeTailState)||null==(o=o._blocks)?void 0:o[h]});if(u.skip&&l){this._blocks.pop(),this.mask=this.mask.slice(1);break}if(s.aggregate(u),u.consumed)break}return s}_trimEmptyTail(e,t){var s,n;void 0===e&&(e=0);const i=Math.max((null==(s=this._mapPosToBlock(e))?void 0:s.index)||0,this.repeatFrom,0);let r;null!=t&&(r=null==(n=this._mapPosToBlock(t))?void 0:n.index),null==r&&(r=this._blocks.length-1);let o=0;for(let e=r;i<=e&&!this._blocks[e].unmaskedValue;--e,++o);o&&(this._blocks.splice(r-o+1,o),this.mask=this.mask.slice(o))}reset(){super.reset(),this._trimEmptyTail()}remove(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length);const s=super.remove(e,t);return this._trimEmptyTail(e,t),s}totalInputPositions(e,t){return void 0===e&&(e=0),null==t&&this.repeatTo===1/0?1/0:super.totalInputPositions(e,t)}get state(){return super.state}set state(e){this._blocks.length=e._blocks.length,this.mask=this.mask.slice(0,this._blocks.length),super.state=e}};try{globalThis.IMask=ai}catch{}const Oi=function(e,t){if(!e)throw Di(t)},Di=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},Ri=function(e){const t=[];let s=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[s++]=i:i<2048?(t[s++]=i>>6|192,t[s++]=63&i|128):55296==(64512&i)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[s++]=i>>18|240,t[s++]=i>>12&63|128,t[s++]=i>>6&63|128,t[s++]=63&i|128):(t[s++]=i>>12|224,t[s++]=i>>6&63|128,t[s++]=63&i|128)}return t},Li={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){const i=e[t],r=t+1<e.length,o=r?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,h=i>>2,u=(3&i)<<4|o>>4;let c=(15&o)<<2|l>>6,d=63&l;a||(d=64,r||(c=64)),n.push(s[h],s[u],s[c],s[d])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ri(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let s=0,n=0;for(;s<e.length;){const i=e[s++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[s++];t[n++]=String.fromCharCode((31&i)<<6|63&r)}else if(i>239&&i<365){const r=((7&i)<<18|(63&e[s++])<<12|(63&e[s++])<<6|63&e[s++])-65536;t[n++]=String.fromCharCode(55296+(r>>10)),t[n++]=String.fromCharCode(56320+(1023&r))}else{const r=e[s++],o=e[s++];t[n++]=String.fromCharCode((15&i)<<12|(63&r)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){const i=s[e.charAt(t++)],r=t<e.length?s[e.charAt(t)]:0;++t;const o=t<e.length?s[e.charAt(t)]:64;++t;const a=t<e.length?s[e.charAt(t)]:64;if(++t,null==i||null==r||null==o||null==a)throw new Fi;const l=i<<2|r>>4;if(n.push(l),64!==o){const e=r<<4&240|o>>2;if(n.push(e),64!==a){const e=o<<6&192|a;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Fi extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ni=function(e){const t=Ri(e);return Li.encodeByteArray(t,!0)},Bi=function(e){return Ni(e).replace(/\./g,"")},ji=function(e){try{return Li.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $i(e){return Vi(void 0,e)}function Vi(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const s in t)t.hasOwnProperty(s)&&"__proto__"!==s&&(e[s]=Vi(e[s],t[s]));return e}const qi=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==s.g)return s.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&ji(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},zi=()=>{var e;return null===(e=qi())||void 0===e?void 0:e.config};class Ui{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,s))}}}function Hi(e){return e.endsWith(".cloudworkstations.dev")}const Wi={};let Gi=!1;function Yi(e,t){if("undefined"==typeof window||"undefined"==typeof document||!Hi(window.location.host)||Wi[e]===t||Wi[e]||Gi)return;function s(e){return`__firebase__banner__${e}`}Wi[e]=t;const n="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Wi))Wi[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function r(){const e=function(e){let t=document.getElementById(e),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),s=!0),{created:s,element:t}}(n),t=s("text"),r=document.getElementById(t)||document.createElement("span"),o=s("learnmore"),a=document.getElementById(o)||document.createElement("a"),l=s("preprendIcon"),h=document.getElementById(l)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(a,o);const s=function(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Gi=!0,function(){const e=document.getElementById(n);e&&e.remove()}()},e}();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(h,l),t.append(h,r,a,s),document.body.appendChild(t)}i?(r.innerText="Preview backend disconnected.",h.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(h.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',r.innerText="Preview backend running in this workspace."),r.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",r):r()}function Ki(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}class Ji extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name="FirebaseError",Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xi.prototype.create)}}class Xi{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},n=`${this.service}/${e}`,i=this.errors[e],r=i?function(e,t){return e.replace(Qi,((e,s)=>{const n=t[s];return null!=n?String(n):`<${s}?>`}))}(i,s):"Error",o=`${this.serviceName}: ${r} (${n}).`;return new Ji(n,o,s)}}const Qi=/\{\$([^}]+)}/g;function Zi(e){return JSON.parse(e)}function er(e){return JSON.stringify(e)}const tr=function(e){let t={},s={},n={},i="";try{const r=e.split(".");t=Zi(ji(r[0])||""),s=Zi(ji(r[1])||""),i=r[2],n=s.d||{},delete s.d}catch(e){}return{header:t,claims:s,data:n,signature:i}};function sr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nr(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ir(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function rr(e,t,s){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=t.call(s,e[i],i,e));return n}function or(e,t){if(e===t)return!0;const s=Object.keys(e),n=Object.keys(t);for(const i of s){if(!n.includes(i))return!1;const s=e[i],r=t[i];if(ar(s)&&ar(r)){if(!or(s,r))return!1}else if(s!==r)return!1}for(const e of n)if(!s.includes(e))return!1;return!0}function ar(e){return null!==e&&"object"==typeof e}class lr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const s=this.W_;if("string"==typeof e)for(let n=0;n<16;n++)s[n]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let n=0;n<16;n++)s[n]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=s[e-3]^s[e-8]^s[e-14]^s[e-16];s[e]=4294967295&(t<<1|t>>>31)}let n,i,r=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(n=l^o&(a^l),i=1518500249):(n=o^a^l,i=1859775393):e<60?(n=o&a|l&(o|a),i=2400959708):(n=o^a^l,i=3395469782);const t=(r<<5|r>>>27)+n+h+i+s[e]&4294967295;h=l,l=a,a=4294967295&(o<<30|o>>>2),o=r,r=t}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const s=t-this.blockSize;let n=0;const i=this.buf_;let r=this.inbuf_;for(;n<t;){if(0===r)for(;n<=s;)this.compress_(e,n),n+=this.blockSize;if("string"==typeof e){for(;n<t;)if(i[r]=e.charCodeAt(n),++r,++n,r===this.blockSize){this.compress_(i),r=0;break}}else for(;n<t;)if(i[r]=e[n],++r,++n,r===this.blockSize){this.compress_(i),r=0;break}}this.inbuf_=r,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let s=0;for(let t=0;t<5;t++)for(let n=24;n>=0;n-=8)e[s]=this.chain_[t]>>n&255,++s;return e}}function hr(e,t){return`${e} failed: ${t} argument `}const ur=function(e){let t=0;for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);n<128?t++:n<2048?t+=2:n>=55296&&n<=56319?(t+=4,s++):t+=3}return t};function cr(e){return e&&e._delegate?e._delegate:e}class dr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const pr="[DEFAULT]";class fr{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Ui;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const e=this.getOrInitializeService({instanceIdentifier:t});e&&s.resolve(e)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(s)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:s})}catch(e){if(n)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:pr})}catch(e){}for(const[t,s]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const e=this.getOrInitializeService({instanceIdentifier:n});s.resolve(e)}catch(e){}}}}clearInstance(e=pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=pr){return this.instances.has(e)}getOptions(e=pr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[e,t]of this.instancesDeferred.entries())s===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){var s;const n=this.normalizeInstanceIdentifier(t),i=null!==(s=this.onInitCallbacks.get(n))&&void 0!==s?s:new Set;i.add(e),this.onInitCallbacks.set(n,i);const r=this.instances.get(n);return r&&e(r,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const n of s)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===pr?void 0:n),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch(e){}var n;return s||null}normalizeInstanceIdentifier(e=pr){return this.component?this.component.multipleInstances?e:pr:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class gr{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fr(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const mr=[];var _r;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(_r||(_r={}));const vr={debug:_r.DEBUG,verbose:_r.VERBOSE,info:_r.INFO,warn:_r.WARN,error:_r.ERROR,silent:_r.SILENT},yr=_r.INFO,wr={[_r.DEBUG]:"log",[_r.VERBOSE]:"log",[_r.INFO]:"info",[_r.WARN]:"warn",[_r.ERROR]:"error"},br=(e,t,...s)=>{if(t<e.logLevel)return;const n=(new Date).toISOString(),i=wr[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${n}]  ${e.name}:`,...s)};class kr{constructor(e){this.name=e,this._logLevel=yr,this._logHandler=br,this._userLogHandler=null,mr.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _r))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?vr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_r.DEBUG,...e),this._logHandler(this,_r.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_r.VERBOSE,...e),this._logHandler(this,_r.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_r.INFO,...e),this._logHandler(this,_r.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_r.WARN,...e),this._logHandler(this,_r.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_r.ERROR,...e),this._logHandler(this,_r.ERROR,...e)}}let Cr,Tr;const Sr=new WeakMap,Er=new WeakMap,xr=new WeakMap,Ir=new WeakMap,Pr=new WeakMap;let Ar={get(e,t,s){if(e instanceof IDBTransaction){if("done"===t)return Er.get(e);if("objectStoreNames"===t)return e.objectStoreNames||xr.get(e);if("store"===t)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Mr(e[t])},set:(e,t,s)=>(e[t]=s,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Mr(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,s)=>{const n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",r)},i=()=>{t(Mr(e.result)),n()},r=()=>{s(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&Sr.set(t,e)})).catch((()=>{})),Pr.set(t,e),t}(e);if(Ir.has(e))return Ir.get(e);const t=function(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Tr||(Tr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Or(this),e),Mr(Sr.get(this))}:function(...e){return Mr(t.apply(Or(this),e))}:function(e,...s){const n=t.call(Or(this),e,...s);return xr.set(n,e.sort?e.sort():[e]),Mr(n)}:(e instanceof IDBTransaction&&function(e){if(Er.has(e))return;const t=new Promise(((t,s)=>{const n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",r),e.removeEventListener("abort",r)},i=()=>{t(),n()},r=()=>{s(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",r),e.addEventListener("abort",r)}));Er.set(e,t)}(e),s=e,(Cr||(Cr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>s instanceof e))?new Proxy(e,Ar):e);var t,s}(e);return t!==e&&(Ir.set(e,t),Pr.set(t,e)),t}const Or=e=>Pr.get(e),Dr=["get","getKey","getAll","getAllKeys","count"],Rr=["put","add","delete","clear"],Lr=new Map;function Fr(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Lr.get(t))return Lr.get(t);const s=t.replace(/FromIndex$/,""),n=t!==s,i=Rr.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!i&&!Dr.includes(s))return;const r=async function(e,...t){const r=this.transaction(e,i?"readwrite":"readonly");let o=r.store;return n&&(o=o.index(t.shift())),(await Promise.all([o[s](...t),i&&r.done]))[0]};return Lr.set(t,r),r}var Nr;Nr=Ar,Ar={...Nr,get:(e,t,s)=>Fr(e,t)||Nr.get(e,t,s),has:(e,t)=>!!Fr(e,t)||Nr.has(e,t)};class Br{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const jr="@firebase/app",$r="0.13.0",Vr=new kr("@firebase/app"),qr="@firebase/app-compat",zr="@firebase/analytics-compat",Ur="@firebase/analytics",Hr="@firebase/app-check-compat",Wr="@firebase/app-check",Gr="@firebase/auth",Yr="@firebase/auth-compat",Kr="@firebase/database",Jr="@firebase/data-connect",Xr="@firebase/database-compat",Qr="@firebase/functions",Zr="@firebase/functions-compat",eo="@firebase/installations",to="@firebase/installations-compat",so="@firebase/messaging",no="@firebase/messaging-compat",io="@firebase/performance",ro="@firebase/performance-compat",oo="@firebase/remote-config",ao="@firebase/remote-config-compat",lo="@firebase/storage",ho="@firebase/storage-compat",uo="@firebase/firestore",co="@firebase/ai",po="@firebase/firestore-compat",fo="firebase",go="[DEFAULT]",mo={[jr]:"fire-core",[qr]:"fire-core-compat",[Ur]:"fire-analytics",[zr]:"fire-analytics-compat",[Wr]:"fire-app-check",[Hr]:"fire-app-check-compat",[Gr]:"fire-auth",[Yr]:"fire-auth-compat",[Kr]:"fire-rtdb",[Jr]:"fire-data-connect",[Xr]:"fire-rtdb-compat",[Qr]:"fire-fn",[Zr]:"fire-fn-compat",[eo]:"fire-iid",[to]:"fire-iid-compat",[so]:"fire-fcm",[no]:"fire-fcm-compat",[io]:"fire-perf",[ro]:"fire-perf-compat",[oo]:"fire-rc",[ao]:"fire-rc-compat",[lo]:"fire-gcs",[ho]:"fire-gcs-compat",[uo]:"fire-fst",[po]:"fire-fst-compat",[co]:"fire-vertex","fire-js":"fire-js",[fo]:"fire-js-all"},_o=new Map,vo=new Map,yo=new Map;function wo(e,t){try{e.container.addComponent(t)}catch(s){Vr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,s)}}function bo(e){const t=e.name;if(yo.has(t))return Vr.debug(`There were multiple attempts to register component ${t}.`),!1;yo.set(t,e);for(const t of _o.values())wo(t,e);for(const t of vo.values())wo(t,e);return!0}const ko=new Xi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Co{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new dr("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ko.create("app-deleted",{appName:this._name})}}function To(e,t={}){let s=e;"object"!=typeof t&&(t={name:t});const n=Object.assign({name:go,automaticDataCollectionEnabled:!0},t),i=n.name;if("string"!=typeof i||!i)throw ko.create("bad-app-name",{appName:String(i)});if(s||(s=zi()),!s)throw ko.create("no-options");const r=_o.get(i);if(r){if(or(s,r.options)&&or(n,r.config))return r;throw ko.create("duplicate-app",{appName:i})}const o=new gr(i);for(const e of yo.values())o.addComponent(e);const a=new Co(s,n,o);return _o.set(i,a),a}function So(e,t,s){var n;let i=null!==(n=mo[e])&&void 0!==n?n:e;s&&(i+=`-${s}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const e=[`Unable to register library "${i}" with version "${t}":`];return r&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Vr.warn(e.join(" "))}bo(new dr(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Eo="firebase-heartbeat-store";let xo=null;function Io(){return xo||(xo=function(e,t,{blocked:s,upgrade:n,blocking:i,terminated:r}={}){const o=indexedDB.open(e,t),a=Mr(o);return n&&o.addEventListener("upgradeneeded",(e=>{n(Mr(o.result),e.oldVersion,e.newVersion,Mr(o.transaction),e)})),s&&o.addEventListener("blocked",(e=>s(e.oldVersion,e.newVersion,e))),a.then((e=>{r&&e.addEventListener("close",(()=>r())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Eo)}catch(e){console.warn(e)}}}).catch((e=>{throw ko.create("idb-open",{originalErrorMessage:e.message})}))),xo}async function Po(e,t){try{const s=(await Io()).transaction(Eo,"readwrite"),n=s.objectStore(Eo);await n.put(t,Ao(e)),await s.done}catch(e){if(e instanceof Ji)Vr.warn(e.message);else{const t=ko.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});Vr.warn(t.message)}}}function Ao(e){return`${e.name}!${e.options.appId}`}class Mo{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Do(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Oo();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some((e=>e.date===n)))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:s}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,s=e[0].date;for(let n=1;n<e.length;n++)e[n].date<s&&(s=e[n].date,t=n);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Vr.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Oo(),{heartbeatsToSend:s,unsentEntries:n}=function(e,t=1024){const s=[];let n=e.slice();for(const i of e){const e=s.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ro(s)>t){e.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),Ro(s)>t){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}(this._heartbeatsCache.heartbeats),i=Bi(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Vr.warn(e),""}}}function Oo(){return(new Date).toISOString().substring(0,10)}class Do{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Io()).transaction(Eo),s=await t.objectStore(Eo).get(Ao(e));return await t.done,s}catch(e){if(e instanceof Ji)Vr.warn(e.message);else{const t=ko.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Vr.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Po(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Po(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}}}function Ro(e){return Bi(JSON.stringify({version:2,heartbeats:e})).length}bo(new dr("platform-logger",(e=>new Br(e)),"PRIVATE")),bo(new dr("heartbeat",(e=>new Mo(e)),"PRIVATE")),So(jr,$r,""),So(jr,$r,"esm2017"),So("fire-js",""),So("firebase","11.8.0","app");const Lo="@firebase/database",Fo="1.0.18";let No="";class Bo{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),er(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Zi(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class jo{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return sr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const $o=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Bo(t)}}catch(e){}return new jo},Vo=$o("localStorage"),qo=$o("sessionStorage"),zo=new kr("@firebase/database"),Uo=function(){let e=1;return function(){return e++}}(),Ho=function(e){const t=function(e){const t=[];let s=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i>=55296&&i<=56319){const t=i-55296;n++,Oi(n<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(n)-56320)}i<128?t[s++]=i:i<2048?(t[s++]=i>>6|192,t[s++]=63&i|128):i<65536?(t[s++]=i>>12|224,t[s++]=i>>6&63|128,t[s++]=63&i|128):(t[s++]=i>>18|240,t[s++]=i>>12&63|128,t[s++]=i>>6&63|128,t[s++]=63&i|128)}return t}(e),s=new lr;s.update(t);const n=s.digest();return Li.encodeByteArray(n)},Wo=function(...e){let t="";for(let s=0;s<e.length;s++){const n=e[s];Array.isArray(n)||n&&"object"==typeof n&&"number"==typeof n.length?t+=Wo.apply(null,n):t+="object"==typeof n?er(n):n,t+=" "}return t};let Go=null,Yo=!0;const Ko=function(...e){if(!0===Yo&&(Yo=!1,null===Go&&!0===qo.get("logging_enabled")&&(Oi(!0,"Can't turn on custom loggers persistently."),zo.logLevel=_r.VERBOSE,Go=zo.log.bind(zo))),Go){const t=Wo.apply(null,e);Go(t)}},Jo=function(e){return function(...t){Ko(e,...t)}},Xo=function(...e){const t="FIREBASE INTERNAL ERROR: "+Wo(...e);zo.error(t)},Qo=function(...e){const t=`FIREBASE FATAL ERROR: ${Wo(...e)}`;throw zo.error(t),new Error(t)},Zo=function(...e){const t="FIREBASE WARNING: "+Wo(...e);zo.warn(t)},ea=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},ta="[MIN_NAME]",sa="[MAX_NAME]",na=function(e,t){if(e===t)return 0;if(e===ta||t===sa)return-1;if(t===ta||e===sa)return 1;{const s=ca(e),n=ca(t);return null!==s?null!==n?s-n==0?e.length-t.length:s-n:-1:null!==n?1:e<t?-1:1}},ia=function(e,t){return e===t?0:e<t?-1:1},ra=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+er(t))},oa=function(e){if("object"!=typeof e||null===e)return er(e);const t=[];for(const s in e)t.push(s);t.sort();let s="{";for(let n=0;n<t.length;n++)0!==n&&(s+=","),s+=er(t[n]),s+=":",s+=oa(e[t[n]]);return s+="}",s},aa=function(e,t){const s=e.length;if(s<=t)return[e];const n=[];for(let i=0;i<s;i+=t)i+t>s?n.push(e.substring(i,s)):n.push(e.substring(i,i+t));return n};function la(e,t){for(const s in e)e.hasOwnProperty(s)&&t(s,e[s])}const ha=function(e){let t,s,n,i,r;Oi(!ea(e),"Invalid JSON number"),0===e?(s=0,n=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),s=i+1023,n=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(s=0,n=Math.round(e/Math.pow(2,-1074))));const o=[];for(r=52;r;r-=1)o.push(n%2?1:0),n=Math.floor(n/2);for(r=11;r;r-=1)o.push(s%2?1:0),s=Math.floor(s/2);o.push(t?1:0),o.reverse();const a=o.join("");let l="";for(r=0;r<64;r+=8){let e=parseInt(a.substr(r,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},ua=new RegExp("^-?(0*)\\d{1,10}$"),ca=function(e){if(ua.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},da=function(e){try{e()}catch(e){setTimeout((()=>{const t=e.stack||"";throw Zo("Exception was thrown by user callback.",t),e}),Math.floor(0))}},pa=function(e,t){const s=setTimeout(e,t);return"number"==typeof s&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(s):"object"==typeof s&&s.unref&&s.unref(),s};class fa{constructor(e,t){var s;this.appCheckProvider=t,this.appName=e.name,null!=(s=e)&&void 0!==s.settings&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise(((t,s)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,s):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Zo(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ga{constructor(e,t,s){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Ko("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,s)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,s):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zo(e)}}class ma{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ma.OWNER="owner";const _a=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,va="ac",ya="websocket",wa="long_polling";class ba{constructor(e,t,s,n,i=!1,r="",o=!1,a=!1,l=null){this.secure=t,this.namespace=s,this.webSocketOnly=n,this.nodeAdmin=i,this.persistenceKey=r,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vo.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Vo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function ka(e,t,s){let n;if(Oi("string"==typeof t,"typeof type must == string"),Oi("object"==typeof s,"typeof params must == object"),t===ya)n=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==wa)throw new Error("Unknown connection type: "+t);n=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(s.ns=e.namespace);const i=[];return la(s,((e,t)=>{i.push(e+"="+t)})),n+i.join("&")}class Ca{constructor(){this.counters_={}}incrementCounter(e,t=1){sr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return $i(this.counters_)}}const Ta={},Sa={};function Ea(e){const t=e.toString();return Ta[t]||(Ta[t]=new Ca),Ta[t]}class xa{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&da((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Ia="start";class Pa{constructor(e,t,s,n,i,r,o){this.connId=e,this.repoInfo=t,this.applicationId=s,this.appCheckToken=n,this.authToken=i,this.transportSessionId=r,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Jo(e),this.stats_=Ea(t),this.urlFn=e=>(this.appCheckToken&&(e[va]=this.appCheckToken),ka(t,wa,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new xa(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const s=function(){document.body?t||(t=!0,e()):setTimeout(s,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&s()})),window.attachEvent("onload",s))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Aa(((...e)=>{const[t,s,n,i,r]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===Ia)this.id=s,this.password=n;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);s?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(s,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,s]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[Ia]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[va]=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&_a.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Pa.forceAllow_=!0}static forceDisallow(){Pa.forceDisallow_=!0}static isAvailable(){return!(!Pa.forceAllow_&&(Pa.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=er(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=Ni(t),n=aa(s,1840);for(let e=0;e<n.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const s={dframe:"t"};s.id=e,s.pw=t,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=er(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Aa{constructor(e,t,s,n){this.onDisconnect=s,this.urlFn=n,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Uo(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Aa.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const n="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(n),this.myIFrame.doc.close()}catch(e){Ko("frame writing exception"),e.stack&&Ko(e.stack),Ko(e)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ko("No IE domain setting required")}catch(t){const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),s="",n=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+s.length<=1870;){const e=this.pendingSegs.shift();s=s+"&seg"+n+"="+e.seg+"&ts"+n+"="+e.ts+"&d"+n+"="+e.d,n++}return t+=s,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,s){this.pendingSegs.push({seg:e,ts:t,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const s=()=>{this.outstandingRequests.delete(t),this.newRequest_()},n=setTimeout(s,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(n),s()}))}addTag(e,t){setTimeout((()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const e=s.readyState;e&&"loaded"!==e&&"complete"!==e||(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),t())},s.onerror=()=>{Ko("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch(e){}}),Math.floor(1))}}let Ma=null;"undefined"!=typeof MozWebSocket?Ma=MozWebSocket:"undefined"!=typeof WebSocket&&(Ma=WebSocket);class Oa{constructor(e,t,s,n,i,r,o){this.connId=e,this.applicationId=s,this.appCheckToken=n,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Jo(this.connId),this.stats_=Ea(t),this.connURL=Oa.connectionURL_(t,r,o,n,s),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,s,n,i){const r={v:"5"};return"undefined"!=typeof location&&location.hostname&&_a.test(location.hostname)&&(r.r="f"),t&&(r.s=t),s&&(r.ls=s),n&&(r[va]=n),i&&(r.p=i),ka(e,ya,r)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vo.set("previous_websocket_failure",!0);try{let e;this.mySock=new Ma(this.connURL,[],e)}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Oa.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(t);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&null!==Ma&&!Oa.forceDisallow_}static previouslyFailed(){return Vo.isInMemoryStorage||!0===Vo.get("previous_websocket_failure")}markConnectionHealthy(){Vo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Zi(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Oi(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=er(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=aa(t,16384);s.length>1&&this.sendString_(String(s.length));for(let e=0;e<s.length;e++)this.sendString_(s[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Oa.responsesRequiredToBeHealthy=2,Oa.healthyTimeout=3e4;class Da{static get ALL_TRANSPORTS(){return[Pa,Oa]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Oa&&Oa.isAvailable();let s=t&&!Oa.previouslyFailed();if(e.webSocketOnly&&(t||Zo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Oa];else{const e=this.transports_=[];for(const t of Da.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Da.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Da.globalTransportInitialized_=!1;class Ra{constructor(e,t,s,n,i,r,o,a,l,h){this.id=e,this.repoInfo_=t,this.applicationId_=s,this.appCheckToken_=n,this.authToken_=i,this.onMessage_=r,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Jo("c:"+this.id+":"),this.transportManager_=new Da(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,s)}),Math.floor(0));const n=e.healthyTimeout||0;n>0&&(this.healthyTimeout_=pa((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(n)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ra("t",e),s=ra("d",e);if("c"===t)this.onSecondaryControl_(s);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(s)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ra("t",e),s=ra("d",e);"c"===t?this.onControl_(s):"d"===t&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ra("t",e);if("d"in e){const s=e.d;if("h"===t){const e=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(s):"r"===t?this.onReset_(s):"e"===t?Xo("Server Error: "+s):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xo("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,s=e.v,n=e.h;this.sessionId=e.s,this.repoInfo_.host=n,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==s&&Zo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,s),pa((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pa((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class La{put(e,t,s,n){}merge(e,t,s,n){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,s){}onDisconnectMerge(e,t,s){}onDisconnectCancel(e,t){}reportStats(e){}}class Fa{constructor(e){this.allowedEvents_=e,this.listeners_={},Oi(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let e=0;e<s.length;e++)s[e].callback.apply(s[e].context,t)}}on(e,t,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:s});const n=this.getInitialEvent(e);n&&t.apply(s,n)}off(e,t,s){this.validateEventType_(e);const n=this.listeners_[e]||[];for(let e=0;e<n.length;e++)if(n[e].callback===t&&(!s||s===n[e].context))return void n.splice(e,1)}validateEventType_(e){Oi(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Na extends Fa{static getInstance(){return new Na}constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Ki()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return Oi("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ba{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ja(){return new Ba("")}function $a(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Va(e){return e.pieces_.length-e.pieceNum_}function qa(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Ba(e.pieces_,t)}function za(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ua(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Ha(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let s=e.pieceNum_;s<e.pieces_.length-1;s++)t.push(e.pieces_[s]);return new Ba(t,0)}function Wa(e,t){const s=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)s.push(e.pieces_[t]);if(t instanceof Ba)for(let e=t.pieceNum_;e<t.pieces_.length;e++)s.push(t.pieces_[e]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&s.push(e[t])}return new Ba(s,0)}function Ga(e){return e.pieceNum_>=e.pieces_.length}function Ya(e,t){const s=$a(e),n=$a(t);if(null===s)return t;if(s===n)return Ya(qa(e),qa(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ka(e,t){if(Va(e)!==Va(t))return!1;for(let s=e.pieceNum_,n=t.pieceNum_;s<=e.pieces_.length;s++,n++)if(e.pieces_[s]!==t.pieces_[n])return!1;return!0}function Ja(e,t){let s=e.pieceNum_,n=t.pieceNum_;if(Va(e)>Va(t))return!1;for(;s<e.pieces_.length;){if(e.pieces_[s]!==t.pieces_[n])return!1;++s,++n}return!0}class Xa{constructor(e,t){this.errorPrefix_=t,this.parts_=Ua(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=ur(this.parts_[e]);Qa(this)}}function Qa(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Za(e))}function Za(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class el extends Fa{static getInstance(){return new el}constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return Oi("visible"===e,"Unknown event type: "+e),[this.visible_]}}const tl=1e3;class sl extends La{constructor(e,t,s,n,i,r,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=s,this.onConnectStatus_=n,this.onServerInfoUpdate_=i,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=sl.nextPersistentConnectionId_++,this.log_=Jo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=tl,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");el.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Na.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,s){const n=++this.requestNumber_,i={r:n,a:e,b:t};this.log_(er(i)),Oi(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[n]=s)}get(e){this.initConnection_();const t=new Ui,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const s=e.d;"ok"===e.s?t.resolve(s):t.reject(s)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const n=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(n),t.promise}listen(e,t,s,n){this.initConnection_();const i=e._queryIdentifier,r=e._path.toString();this.log_("Listen called for "+r+" "+i),this.listens.has(r)||this.listens.set(r,new Map),Oi(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Oi(!this.listens.get(r).has(i),"listen() called twice for same path/queryId.");const o={onComplete:n,hashFn:t,query:e,tag:s};this.listens.get(r).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(s)}))}sendListen_(e){const t=e.query,s=t._path.toString(),n=t._queryIdentifier;this.log_("Listen on "+s+" for "+n);const i={p:s};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const r=i.d,o=i.s;sl.warnOnListenWarnings_(r,t),(this.listens.get(s)&&this.listens.get(s).get(n))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(s,n),e.onComplete&&e.onComplete(o,r))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&sr(e,"w")){const s=nr(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',s=t._path.toString();Zo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=tr(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=tr(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",s={cred:e};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(t,s,(t=>{const s=t.s,n=t.d||"error";this.authToken_===e&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,n))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,s=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,s)}))}unlisten(e,t){const s=e._path.toString(),n=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+n),Oi(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,n)&&this.connected_&&this.sendUnlisten_(s,n,e._queryObject,t)}sendUnlisten_(e,t,s,n){this.log_("Unlisten on "+e+" for "+t);const i={p:e};n&&(i.q=s,i.t=n),this.sendRequest("n",i)}onDisconnectPut(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:s})}onDisconnectMerge(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:s})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,s,n){const i={p:t,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{n&&setTimeout((()=>{n(e.s,e.d)}),Math.floor(0))}))}put(e,t,s,n){this.putInternal("p",e,t,s,n)}merge(e,t,s,n){this.putInternal("m",e,t,s,n)}putInternal(e,t,s,n,i){this.initConnection_();const r={p:t,d:s};void 0!==i&&(r.h=i),this.outstandingPuts_.push({action:e,request:r,onComplete:n}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,n=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,s,(s=>{this.log_(t+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),n&&n(s.s,s.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+er(e));const t=e.r,s=this.requestCBHash_[t];s&&(delete this.requestCBHash_[t],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Xo("Unrecognized action received from server: "+er(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Oi(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=tl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=tl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=tl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),n=this.id+":"+sl.nextConnectionId_++,i=this.lastSessionId;let r=!1,o=null;const a=function(){o?o.close():(r=!0,s())},l=function(e){Oi(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);r?Ko("getToken() completed but was canceled"):(Ko("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new Ra(n,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,s,(e=>{Zo(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(e){this.log_("Failed to get token: "+e),r||(this.repoInfo_.nodeAdmin&&Zo(e),a())}}}interrupt(e){Ko("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ko("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ir(this.interruptReasons_)&&(this.reconnectDelay_=tl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let s;s=t?t.map((e=>oa(e))).join("$"):"default";const n=this.removeListen_(e,s);n&&n.onComplete&&n.onComplete("permission_denied")}removeListen_(e,t){const s=new Ba(e).toString();let n;if(this.listens.has(s)){const e=this.listens.get(s);n=e.get(t),e.delete(t),0===e.size&&this.listens.delete(s)}else n=void 0;return n}onAuthRevoked_(e,t){Ko("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Ko("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};e["sdk.js."+No.replace(/\./g,"-")]=1,Ki()?e["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Na.getInstance().currentlyOnline();return ir(this.interruptReasons_)&&e}}sl.nextPersistentConnectionId_=0,sl.nextConnectionId_=0;class nl{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new nl(e,t)}}class il{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const s=new nl(ta,e),n=new nl(ta,t);return 0!==this.compare(s,n)}minPost(){return nl.MIN}}let rl;class ol extends il{static get __EMPTY_NODE(){return rl}static set __EMPTY_NODE(e){rl=e}compare(e,t){return na(e.name,t.name)}isDefinedOn(e){throw Di("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return nl.MIN}maxPost(){return new nl(sa,rl)}makePost(e,t){return Oi("string"==typeof e,"KeyIndex indexValue must always be a string."),new nl(e,rl)}toString(){return".key"}}const al=new ol;class ll{constructor(e,t,s,n,i=null){this.isReverse_=n,this.resultGenerator_=i,this.nodeStack_=[];let r=1;for(;!e.isEmpty();)if(r=t?s(e.key,t):1,n&&(r*=-1),r<0)e=this.isReverse_?e.left:e.right;else{if(0===r){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class hl{constructor(e,t,s,n,i){this.key=e,this.value=t,this.color=null!=s?s:hl.RED,this.left=null!=n?n:ul.EMPTY_NODE,this.right=null!=i?i:ul.EMPTY_NODE}copy(e,t,s,n,i){return new hl(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=n?n:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let n=this;const i=s(e,n.key);return n=i<0?n.copy(null,null,null,n.left.insert(e,t,s),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,s)),n.fixUp_()}removeMin_(){if(this.left.isEmpty())return ul.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let s,n;if(s=this,t(e,s.key)<0)s.left.isEmpty()||s.left.isRed_()||s.left.left.isRed_()||(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),s.right.isEmpty()||s.right.isRed_()||s.right.left.isRed_()||(s=s.moveRedRight_()),0===t(e,s.key)){if(s.right.isEmpty())return ul.EMPTY_NODE;n=s.right.min_(),s=s.copy(n.key,n.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,hl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,hl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}hl.RED=!0,hl.BLACK=!1;class ul{constructor(e,t=ul.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ul(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,hl.BLACK,null,null))}remove(e){return new ul(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,hl.BLACK,null,null))}get(e){let t,s=this.root_;for(;!s.isEmpty();){if(t=this.comparator_(e,s.key),0===t)return s.value;t<0?s=s.left:t>0&&(s=s.right)}return null}getPredecessorKey(e){let t,s=this.root_,n=null;for(;!s.isEmpty();){if(t=this.comparator_(e,s.key),0===t){if(s.left.isEmpty())return n?n.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}t<0?s=s.left:t>0&&(n=s,s=s.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ll(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ll(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ll(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ll(this.root_,null,this.comparator_,!0,e)}}function cl(e,t){return na(e.name,t.name)}function dl(e,t){return na(e,t)}let pl;ul.EMPTY_NODE=new class{copy(e,t,s,n,i){return this}insert(e,t,s){return new hl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const fl=function(e){return"number"==typeof e?"number:"+ha(e):"string:"+e},gl=function(e){if(e.isLeafNode()){const t=e.val();Oi("string"==typeof t||"number"==typeof t||"object"==typeof t&&sr(t,".sv"),"Priority must be a string or number.")}else Oi(e===pl||e.isEmpty(),"priority of unexpected type.");Oi(e===pl||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ml,_l,vl;class yl{static set __childrenNodeConstructor(e){ml=e}static get __childrenNodeConstructor(){return ml}constructor(e,t=yl.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Oi(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),gl(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new yl(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:yl.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ga(e)?this:".priority"===$a(e)?this.priorityNode_:yl.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:yl.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const s=$a(e);return null===s?t:t.isEmpty()&&".priority"!==s?this:(Oi(".priority"!==s||1===Va(e),".priority must be the last token in a path"),this.updateImmediateChild(s,yl.__childrenNodeConstructor.EMPTY_NODE.updateChild(qa(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+fl(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?ha(this.value_):this.value_,this.lazyHash_=Ho(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===yl.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof yl.__childrenNodeConstructor?-1:(Oi(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,s=typeof this.value_,n=yl.VALUE_TYPE_ORDER.indexOf(t),i=yl.VALUE_TYPE_ORDER.indexOf(s);return Oi(n>=0,"Unknown leaf type: "+t),Oi(i>=0,"Unknown leaf type: "+s),n===i?"object"===s?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-n}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}yl.VALUE_TYPE_ORDER=["object","boolean","number","string"];const wl=new class extends il{compare(e,t){const s=e.node.getPriority(),n=t.node.getPriority(),i=s.compareTo(n);return 0===i?na(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return nl.MIN}maxPost(){return new nl(sa,new yl("[PRIORITY-POST]",vl))}makePost(e,t){const s=_l(e);return new nl(t,new yl("[PRIORITY-POST]",s))}toString(){return".priority"}},bl=Math.log(2);class kl{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/bl,10)),this.current_=this.count-1;const s=(n=this.count,parseInt(Array(n+1).join("1"),2));var n;this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Cl=function(e,t,s,n){e.sort(t);const i=function(t,n){const r=n-t;let o,a;if(0===r)return null;if(1===r)return o=e[t],a=s?s(o):o,new hl(a,o.node,hl.BLACK,null,null);{const l=parseInt(r/2,10)+t,h=i(t,l),u=i(l+1,n);return o=e[l],a=s?s(o):o,new hl(a,o.node,hl.BLACK,h,u)}},r=function(t){let n=null,r=null,o=e.length;const a=function(t,n){const r=o-t,a=o;o-=t;const h=i(r+1,a),u=e[r],c=s?s(u):u;l(new hl(c,u.node,n,null,h))},l=function(e){n?(n.left=e,n=e):(r=e,n=e)};for(let e=0;e<t.count;++e){const s=t.nextBitIsOne(),n=Math.pow(2,t.count-(e+1));s?a(n,hl.BLACK):(a(n,hl.BLACK),a(n,hl.RED))}return r}(new kl(e.length));return new ul(n||t,r)};let Tl;const Sl={};class El{static get Default(){return Oi(Sl&&wl,"ChildrenNode.ts has not been loaded"),Tl=Tl||new El({".priority":Sl},{".priority":wl}),Tl}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=nr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ul?t:null}hasIndex(e){return sr(this.indexSet_,e.toString())}addIndex(e,t){Oi(e!==al,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let n=!1;const i=t.getIterator(nl.Wrap);let r,o=i.getNext();for(;o;)n=n||e.isDefinedOn(o.node),s.push(o),o=i.getNext();r=n?Cl(s,e.getCompare()):Sl;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const h=Object.assign({},this.indexes_);return h[a]=r,new El(h,l)}addToIndexes(e,t){const s=rr(this.indexes_,((s,n)=>{const i=nr(this.indexSet_,n);if(Oi(i,"Missing index implementation for "+n),s===Sl){if(i.isDefinedOn(e.node)){const s=[],n=t.getIterator(nl.Wrap);let r=n.getNext();for(;r;)r.name!==e.name&&s.push(r),r=n.getNext();return s.push(e),Cl(s,i.getCompare())}return Sl}{const n=t.get(e.name);let i=s;return n&&(i=i.remove(new nl(e.name,n))),i.insert(e,e.node)}}));return new El(s,this.indexSet_)}removeFromIndexes(e,t){const s=rr(this.indexes_,(s=>{if(s===Sl)return s;{const n=t.get(e.name);return n?s.remove(new nl(e.name,n)):s}}));return new El(s,this.indexSet_)}}let xl;class Il{static get EMPTY_NODE(){return xl||(xl=new Il(new ul(dl),null,El.Default))}constructor(e,t,s){this.children_=e,this.priorityNode_=t,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&gl(this.priorityNode_),this.children_.isEmpty()&&Oi(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xl}updatePriority(e){return this.children_.isEmpty()?this:new Il(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?xl:t}}getChild(e){const t=$a(e);return null===t?this:this.getImmediateChild(t).getChild(qa(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Oi(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const s=new nl(e,t);let n,i;t.isEmpty()?(n=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(n=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(s,this.children_));const r=n.isEmpty()?xl:this.priorityNode_;return new Il(n,r,i)}}updateChild(e,t){const s=$a(e);if(null===s)return t;{Oi(".priority"!==$a(e)||1===Va(e),".priority must be the last token in a path");const n=this.getImmediateChild(s).updateChild(qa(e),t);return this.updateImmediateChild(s,n)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let s=0,n=0,i=!0;if(this.forEachChild(wl,((r,o)=>{t[r]=o.val(e),s++,i&&Il.INTEGER_REGEXP_.test(r)?n=Math.max(n,Number(r)):i=!1})),!e&&i&&n<2*s){const e=[];for(const s in t)e[s]=t[s];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+fl(this.getPriority().val())+":"),this.forEachChild(wl,((t,s)=>{const n=s.hash();""!==n&&(e+=":"+t+":"+n)})),this.lazyHash_=""===e?"":Ho(e)}return this.lazyHash_}getPredecessorChildName(e,t,s){const n=this.resolveIndex_(s);if(n){const s=n.getPredecessorKey(new nl(e,t));return s?s.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new nl(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new nl(t,this.children_.get(t)):null}forEachChild(e,t){const s=this.resolveIndex_(e);return s?s.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getIteratorFrom(e,(e=>e));{const s=this.children_.getIteratorFrom(e.name,nl.Wrap);let n=s.peek();for(;null!=n&&t.compare(n,e)<0;)s.getNext(),n=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getReverseIteratorFrom(e,(e=>e));{const s=this.children_.getReverseIteratorFrom(e.name,nl.Wrap);let n=s.peek();for(;null!=n&&t.compare(n,e)>0;)s.getNext(),n=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Pl?-1:0}withIndex(e){if(e===al||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Il(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===al||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(wl),s=t.getIterator(wl);let n=e.getNext(),i=s.getNext();for(;n&&i;){if(n.name!==i.name||!n.node.equals(i.node))return!1;n=e.getNext(),i=s.getNext()}return null===n&&null===i}return!1}return!1}}resolveIndex_(e){return e===al?null:this.indexMap_.get(e.toString())}}Il.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Pl=new class extends Il{constructor(){super(new ul(dl),Il.EMPTY_NODE,El.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Il.EMPTY_NODE}isEmpty(){return!1}};function Al(e,t=null){if(null===e)return Il.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),Oi(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new yl(e,Al(t));if(e instanceof Array){let s=Il.EMPTY_NODE;return la(e,((t,n)=>{if(sr(e,t)&&"."!==t.substring(0,1)){const e=Al(n);!e.isLeafNode()&&e.isEmpty()||(s=s.updateImmediateChild(t,e))}})),s.updatePriority(Al(t))}{const s=[];let n=!1;if(la(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Al(t);i.isEmpty()||(n=n||!i.getPriority().isEmpty(),s.push(new nl(e,i)))}})),0===s.length)return Il.EMPTY_NODE;const i=Cl(s,cl,(e=>e.name),dl);if(n){const e=Cl(s,wl.getCompare());return new Il(i,Al(t),new El({".priority":e},{".priority":wl}))}return new Il(i,Al(t),El.Default)}}Object.defineProperties(nl,{MIN:{value:new nl(ta,Il.EMPTY_NODE)},MAX:{value:new nl(sa,Pl)}}),ol.__EMPTY_NODE=Il.EMPTY_NODE,yl.__childrenNodeConstructor=Il,pl=Pl,vl=Pl,function(e){_l=e}(Al);class Ml extends il{constructor(e){super(),this.indexPath_=e,Oi(!Ga(e)&&".priority"!==$a(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const s=this.extractChild(e.node),n=this.extractChild(t.node),i=s.compareTo(n);return 0===i?na(e.name,t.name):i}makePost(e,t){const s=Al(e),n=Il.EMPTY_NODE.updateChild(this.indexPath_,s);return new nl(t,n)}maxPost(){const e=Il.EMPTY_NODE.updateChild(this.indexPath_,Pl);return new nl(sa,e)}toString(){return Ua(this.indexPath_,0).join("/")}}const Ol=new class extends il{compare(e,t){const s=e.node.compareTo(t.node);return 0===s?na(e.name,t.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return nl.MIN}maxPost(){return nl.MAX}makePost(e,t){const s=Al(e);return new nl(t,s)}toString(){return".value"}};function Dl(e){return{type:"value",snapshotNode:e}}function Rl(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ll(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Fl(e,t,s){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:s}}class Nl{constructor(e){this.index_=e}updateChild(e,t,s,n,i,r){Oi(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(n).equals(s.getChild(n))&&o.isEmpty()===s.isEmpty()?e:(null!=r&&(s.isEmpty()?e.hasChild(t)?r.trackChildChange(Ll(t,o)):Oi(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?r.trackChildChange(Rl(t,s)):r.trackChildChange(Fl(t,s,o))),e.isLeafNode()&&s.isEmpty()?e:e.updateImmediateChild(t,s).withIndex(this.index_))}updateFullNode(e,t,s){return null!=s&&(e.isLeafNode()||e.forEachChild(wl,((e,n)=>{t.hasChild(e)||s.trackChildChange(Ll(e,n))})),t.isLeafNode()||t.forEachChild(wl,((t,n)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(n)||s.trackChildChange(Fl(t,n,i))}else s.trackChildChange(Rl(t,n))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Il.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Bl{constructor(e){this.indexedFilter_=new Nl(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Bl.getStartPost_(e),this.endPost_=Bl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&s}updateChild(e,t,s,n,i,r){return this.matches(new nl(t,s))||(s=Il.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,s,n,i,r)}updateFullNode(e,t,s){t.isLeafNode()&&(t=Il.EMPTY_NODE);let n=t.withIndex(this.index_);n=n.updatePriority(Il.EMPTY_NODE);const i=this;return t.forEachChild(wl,((e,t)=>{i.matches(new nl(e,t))||(n=n.updateImmediateChild(e,Il.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,n,s)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class jl{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Bl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,s,n,i,r){return this.rangedFilter_.matches(new nl(t,s))||(s=Il.EMPTY_NODE),e.getImmediateChild(t).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,s,n,i,r):this.fullLimitUpdateChild_(e,t,s,i,r)}updateFullNode(e,t,s){let n;if(t.isLeafNode()||t.isEmpty())n=Il.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;n=Il.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;e.hasNext()&&s<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;n=n.updateImmediateChild(t.name,t.node),s++}}}else{let e;n=t.withIndex(this.index_),n=n.updatePriority(Il.EMPTY_NODE),e=this.reverse_?n.getReverseIterator(this.index_):n.getIterator(this.index_);let s=0;for(;e.hasNext();){const t=e.getNext();s<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?s++:n=n.updateImmediateChild(t.name,Il.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,n,s)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,s,n,i){let r;if(this.reverse_){const e=this.index_.getCompare();r=(t,s)=>e(s,t)}else r=this.index_.getCompare();const o=e;Oi(o.numChildren()===this.limit_,"");const a=new nl(t,s),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),h=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=n.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=n.getChildAfterChild(this.index_,u,this.reverse_);const c=null==u?1:r(u,a);if(h&&!s.isEmpty()&&c>=0)return null!=i&&i.trackChildChange(Fl(t,s,e)),o.updateImmediateChild(t,s);{null!=i&&i.trackChildChange(Ll(t,e));const s=o.updateImmediateChild(t,Il.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(Rl(u.name,u.node)),s.updateImmediateChild(u.name,u.node)):s}}return s.isEmpty()?e:h&&r(l,a)>=0?(null!=i&&(i.trackChildChange(Ll(l.name,l.node)),i.trackChildChange(Rl(t,s))),o.updateImmediateChild(t,s).updateImmediateChild(l.name,Il.EMPTY_NODE)):e}}class $l{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wl}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Oi(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Oi(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ta}hasEnd(){return this.endSet_}getIndexEndValue(){return Oi(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Oi(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:sa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Oi(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===wl}copy(){const e=new $l;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Vl(e){const t={};if(e.isDefault())return t;let s;if(e.index_===wl?s="$priority":e.index_===Ol?s="$value":e.index_===al?s="$key":(Oi(e.index_ instanceof Ml,"Unrecognized index type!"),s=e.index_.toString()),t.orderBy=er(s),e.startSet_){const s=e.startAfterSet_?"startAfter":"startAt";t[s]=er(e.indexStartValue_),e.startNameSet_&&(t[s]+=","+er(e.indexStartName_))}if(e.endSet_){const s=e.endBeforeSet_?"endBefore":"endAt";t[s]=er(e.indexEndValue_),e.endNameSet_&&(t[s]+=","+er(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function ql(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let s=e.viewFrom_;""===s&&(s=e.isViewFromLeft()?"l":"r"),t.vf=s}return e.index_!==wl&&(t.i=e.index_.toString()),t}class zl extends La{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Oi(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,s,n){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=s,this.appCheckTokenProvider_=n,this.log_=Jo("p:rest:"),this.listens_={}}listen(e,t,s,n){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const r=zl.getListenId_(e,s),o={};this.listens_[r]=o;const a=Vl(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,s),nr(this.listens_,r)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",n(t,null)}}))}unlisten(e,t){const s=zl.getListenId_(e,t);delete this.listens_[s]}get(e){const t=Vl(e._queryParams),s=e._path.toString(),n=new Ui;return this.restRequest_(s+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(s,i,!1,null),n.resolve(i)):n.reject(new Error(i))})),n.promise}refreshAuthToken(e){}restRequest_(e,t={},s){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([n,i])=>{n&&n.accessToken&&(t.auth=n.accessToken),i&&i.token&&(t.ac=i.token);const r=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function(e){const t=[];for(const[s,n]of Object.entries(e))Array.isArray(n)?n.forEach((e=>{t.push(encodeURIComponent(s)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(s)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}(t);this.log_("Sending REST request for "+r);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(s&&4===o.readyState){this.log_("REST Response for "+r+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=Zi(o.responseText)}catch(e){Zo("Failed to parse JSON response for "+r+": "+o.responseText)}s(null,e)}else 401!==o.status&&404!==o.status&&Zo("Got unsuccessful REST response for "+r+" Status: "+o.status),s(o.status);s=null}},o.open("GET",r,!0),o.send()}))}}class Ul{constructor(){this.rootNode_=Il.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Hl(){return{value:null,children:new Map}}function Wl(e,t,s){if(Ga(t))e.value=s,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,s);else{const n=$a(t);e.children.has(n)||e.children.set(n,Hl()),Wl(e.children.get(n),t=qa(t),s)}}function Gl(e,t,s){null!==e.value?s(t,e.value):function(e,t){e.children.forEach(((e,s)=>{t(s,e)}))}(e,((e,n)=>{Gl(n,new Ba(t.toString()+"/"+e),s)}))}class Yl{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&la(this.last_,((e,s)=>{t[e]=t[e]-s})),this.last_=e,t}}class Kl{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Yl(e);const s=1e4+2e4*Math.random();pa(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),t={};let s=!1;la(e,((e,n)=>{n>0&&sr(this.statsToReport_,e)&&(t[e]=n,s=!0)})),s&&this.server_.reportStats(t),pa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Jl;function Xl(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Jl||(Jl={}));class Ql{constructor(e,t,s){this.path=e,this.affectedTree=t,this.revert=s,this.type=Jl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ga(this.path)){if(null!=this.affectedTree.value)return Oi(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ba(e));return new Ql(ja(),t,this.revert)}}return Oi($a(this.path)===e,"operationForChild called for unrelated child."),new Ql(qa(this.path),this.affectedTree,this.revert)}}class Zl{constructor(e,t){this.source=e,this.path=t,this.type=Jl.LISTEN_COMPLETE}operationForChild(e){return Ga(this.path)?new Zl(this.source,ja()):new Zl(this.source,qa(this.path))}}class eh{constructor(e,t,s){this.source=e,this.path=t,this.snap=s,this.type=Jl.OVERWRITE}operationForChild(e){return Ga(this.path)?new eh(this.source,ja(),this.snap.getImmediateChild(e)):new eh(this.source,qa(this.path),this.snap)}}class th{constructor(e,t,s){this.source=e,this.path=t,this.children=s,this.type=Jl.MERGE}operationForChild(e){if(Ga(this.path)){const t=this.children.subtree(new Ba(e));return t.isEmpty()?null:t.value?new eh(this.source,ja(),t.value):new th(this.source,ja(),t)}return Oi($a(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new th(this.source,qa(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class sh{constructor(e,t,s){this.node_=e,this.fullyInitialized_=t,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ga(e))return this.isFullyInitialized()&&!this.filtered_;const t=$a(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class nh{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ih(e,t,s,n,i,r){const o=n.filter((e=>e.type===s));o.sort(((t,s)=>function(e,t,s){if(null==t.childName||null==s.childName)throw Di("Should only compare child_ events.");const n=new nl(t.childName,t.snapshotNode),i=new nl(s.childName,s.snapshotNode);return e.index_.compare(n,i)}(e,t,s))),o.forEach((s=>{const n=function(e,t,s){return"value"===t.type||"child_removed"===t.type||(t.prevName=s.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,s,r);i.forEach((i=>{i.respondsTo(s.type)&&t.push(i.createEvent(n,e.query_))}))}))}function rh(e,t){return{eventCache:e,serverCache:t}}function oh(e,t,s,n){return rh(new sh(t,s,n),e.serverCache)}function ah(e,t,s,n){return rh(e.eventCache,new sh(t,s,n))}function lh(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function hh(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let uh;class ch{static fromObject(e){let t=new ch(null);return la(e,((e,s)=>{t=t.set(new Ba(e),s)})),t}constructor(e,t=(()=>(uh||(uh=new ul(ia)),uh))()){this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ja(),value:this.value};if(Ga(e))return null;{const s=$a(e),n=this.children.get(s);if(null!==n){const i=n.findRootMostMatchingPathAndValue(qa(e),t);return null!=i?{path:Wa(new Ba(s),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Ga(e))return this;{const t=$a(e),s=this.children.get(t);return null!==s?s.subtree(qa(e)):new ch(null)}}set(e,t){if(Ga(e))return new ch(t,this.children);{const s=$a(e),n=(this.children.get(s)||new ch(null)).set(qa(e),t),i=this.children.insert(s,n);return new ch(this.value,i)}}remove(e){if(Ga(e))return this.children.isEmpty()?new ch(null):new ch(null,this.children);{const t=$a(e),s=this.children.get(t);if(s){const n=s.remove(qa(e));let i;return i=n.isEmpty()?this.children.remove(t):this.children.insert(t,n),null===this.value&&i.isEmpty()?new ch(null):new ch(this.value,i)}return this}}get(e){if(Ga(e))return this.value;{const t=$a(e),s=this.children.get(t);return s?s.get(qa(e)):null}}setTree(e,t){if(Ga(e))return t;{const s=$a(e),n=(this.children.get(s)||new ch(null)).setTree(qa(e),t);let i;return i=n.isEmpty()?this.children.remove(s):this.children.insert(s,n),new ch(this.value,i)}}fold(e){return this.fold_(ja(),e)}fold_(e,t){const s={};return this.children.inorderTraversal(((n,i)=>{s[n]=i.fold_(Wa(e,n),t)})),t(e,this.value,s)}findOnPath(e,t){return this.findOnPath_(e,ja(),t)}findOnPath_(e,t,s){const n=!!this.value&&s(t,this.value);if(n)return n;if(Ga(e))return null;{const n=$a(e),i=this.children.get(n);return i?i.findOnPath_(qa(e),Wa(t,n),s):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ja(),t)}foreachOnPath_(e,t,s){if(Ga(e))return this;{this.value&&s(t,this.value);const n=$a(e),i=this.children.get(n);return i?i.foreachOnPath_(qa(e),Wa(t,n),s):new ch(null)}}foreach(e){this.foreach_(ja(),e)}foreach_(e,t){this.children.inorderTraversal(((s,n)=>{n.foreach_(Wa(e,s),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,s)=>{s.value&&e(t,s.value)}))}}class dh{constructor(e){this.writeTree_=e}static empty(){return new dh(new ch(null))}}function ph(e,t,s){if(Ga(t))return new dh(new ch(s));{const n=e.writeTree_.findRootMostValueAndPath(t);if(null!=n){const i=n.path;let r=n.value;const o=Ya(i,t);return r=r.updateChild(o,s),new dh(e.writeTree_.set(i,r))}{const n=new ch(s),i=e.writeTree_.setTree(t,n);return new dh(i)}}}function fh(e,t,s){let n=e;return la(s,((e,s)=>{n=ph(n,Wa(t,e),s)})),n}function gh(e,t){if(Ga(t))return dh.empty();{const s=e.writeTree_.setTree(t,new ch(null));return new dh(s)}}function mh(e,t){return null!=_h(e,t)}function _h(e,t){const s=e.writeTree_.findRootMostValueAndPath(t);return null!=s?e.writeTree_.get(s.path).getChild(Ya(s.path,t)):null}function vh(e){const t=[],s=e.writeTree_.value;return null!=s?s.isLeafNode()||s.forEachChild(wl,((e,s)=>{t.push(new nl(e,s))})):e.writeTree_.children.inorderTraversal(((e,s)=>{null!=s.value&&t.push(new nl(e,s.value))})),t}function yh(e,t){if(Ga(t))return e;{const s=_h(e,t);return new dh(null!=s?new ch(s):e.writeTree_.subtree(t))}}function wh(e){return e.writeTree_.isEmpty()}function bh(e,t){return kh(ja(),e.writeTree_,t)}function kh(e,t,s){if(null!=t.value)return s.updateChild(e,t.value);{let n=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Oi(null!==i.value,"Priority writes must always be leaf nodes"),n=i.value):s=kh(Wa(e,t),i,s)})),s.getChild(e).isEmpty()||null===n||(s=s.updateChild(Wa(e,".priority"),n)),s}}function Ch(e,t){return Rh(t,e)}function Th(e,t){if(e.snap)return Ja(e.path,t);for(const s in e.children)if(e.children.hasOwnProperty(s)&&Ja(Wa(e.path,s),t))return!0;return!1}function Sh(e){return e.visible}function Eh(e,t,s){let n=dh.empty();for(let i=0;i<e.length;++i){const r=e[i];if(t(r)){const e=r.path;let t;if(r.snap)Ja(s,e)?(t=Ya(s,e),n=ph(n,t,r.snap)):Ja(e,s)&&(t=Ya(e,s),n=ph(n,ja(),r.snap.getChild(t)));else{if(!r.children)throw Di("WriteRecord should have .snap or .children");if(Ja(s,e))t=Ya(s,e),n=fh(n,t,r.children);else if(Ja(e,s))if(t=Ya(e,s),Ga(t))n=fh(n,ja(),r.children);else{const e=nr(r.children,$a(t));if(e){const s=e.getChild(qa(t));n=ph(n,ja(),s)}}}}}return n}function xh(e,t,s,n,i){if(n||i){const r=yh(e.visibleWrites,t);if(!i&&wh(r))return s;if(i||null!=s||mh(r,ja())){const r=function(e){return(e.visible||i)&&(!n||!~n.indexOf(e.writeId))&&(Ja(e.path,t)||Ja(t,e.path))};return bh(Eh(e.allWrites,r,t),s||Il.EMPTY_NODE)}return null}{const n=_h(e.visibleWrites,t);if(null!=n)return n;{const n=yh(e.visibleWrites,t);return wh(n)?s:null!=s||mh(n,ja())?bh(n,s||Il.EMPTY_NODE):null}}}function Ih(e,t,s,n){return xh(e.writeTree,e.treePath,t,s,n)}function Ph(e,t){return function(e,t,s){let n=Il.EMPTY_NODE;const i=_h(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(wl,((e,t)=>{n=n.updateImmediateChild(e,t)})),n;if(s){const i=yh(e.visibleWrites,t);return s.forEachChild(wl,((e,t)=>{const s=bh(yh(i,new Ba(e)),t);n=n.updateImmediateChild(e,s)})),vh(i).forEach((e=>{n=n.updateImmediateChild(e.name,e.node)})),n}return vh(yh(e.visibleWrites,t)).forEach((e=>{n=n.updateImmediateChild(e.name,e.node)})),n}(e.writeTree,e.treePath,t)}function Ah(e,t,s,n){return function(e,t,s,n,i){Oi(n||i,"Either existingEventSnap or existingServerSnap must exist");const r=Wa(t,s);if(mh(e.visibleWrites,r))return null;{const t=yh(e.visibleWrites,r);return wh(t)?i.getChild(s):bh(t,i.getChild(s))}}(e.writeTree,e.treePath,t,s,n)}function Mh(e,t){return function(e,t){return _h(e.visibleWrites,t)}(e.writeTree,Wa(e.treePath,t))}function Oh(e,t,s){return function(e,t,s,n){const i=Wa(t,s),r=_h(e.visibleWrites,i);return null!=r?r:n.isCompleteForChild(s)?bh(yh(e.visibleWrites,i),n.getNode().getImmediateChild(s)):null}(e.writeTree,e.treePath,t,s)}function Dh(e,t){return Rh(Wa(e.treePath,t),e.writeTree)}function Rh(e,t){return{treePath:e,writeTree:t}}class Lh{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,s=e.childName;Oi("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Oi(".priority"!==s,"Only non-priority child changes can be tracked.");const n=this.changeMap.get(s);if(n){const i=n.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(s,Fl(s,e.snapshotNode,n.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(s);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(s,Ll(s,n.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(s,Rl(s,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Di("Illegal combination of changes: "+e+" occurred after "+n);this.changeMap.set(s,Fl(s,e.snapshotNode,n.oldSnap))}}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}const Fh=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,s){return null}};class Nh{constructor(e,t,s=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=s}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new sh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Oh(this.writes_,e,t)}}getChildAfterChild(e,t,s){const n=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:hh(this.viewCache_),i=function(e,t,s,n,i,r){return function(e,t,s,n,i,r,o){let a;const l=yh(e.visibleWrites,t),h=_h(l,ja());if(null!=h)a=h;else{if(null==s)return[];a=bh(l,s)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),s=r?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o);let i=s.getNext();for(;i&&e.length<1;)0!==t(i,n)&&e.push(i),i=s.getNext();return e}}(e.writeTree,e.treePath,t,s,0,i,r)}(this.writes_,n,t,0,s,e);return 0===i.length?null:i[0]}}function Bh(e,t,s,n,i,r){const o=t.eventCache;if(null!=Mh(n,s))return t;{let a,l;if(Ga(s))if(Oi(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const s=hh(t),i=Ph(n,s instanceof Il?s:Il.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,r)}else{const s=Ih(n,hh(t));a=e.filter.updateFullNode(t.eventCache.getNode(),s,r)}else{const h=$a(s);if(".priority"===h){Oi(1===Va(s),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const r=Ah(n,s,i,l);a=null!=r?e.filter.updatePriority(i,r):o.getNode()}else{const u=qa(s);let c;if(o.isCompleteForChild(h)){l=t.serverCache.getNode();const e=Ah(n,s,o.getNode(),l);c=null!=e?o.getNode().getImmediateChild(h).updateChild(u,e):o.getNode().getImmediateChild(h)}else c=Oh(n,h,t.serverCache);a=null!=c?e.filter.updateChild(o.getNode(),h,c,u,i,r):o.getNode()}}return oh(t,a,o.isFullyInitialized()||Ga(s),e.filter.filtersNodes())}}function jh(e,t,s,n,i,r,o,a){const l=t.serverCache;let h;const u=o?e.filter:e.filter.getIndexedFilter();if(Ga(s))h=u.updateFullNode(l.getNode(),n,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(s,n);h=u.updateFullNode(l.getNode(),e,null)}else{const e=$a(s);if(!l.isCompleteForPath(s)&&Va(s)>1)return t;const i=qa(s),r=l.getNode().getImmediateChild(e).updateChild(i,n);h=".priority"===e?u.updatePriority(l.getNode(),r):u.updateChild(l.getNode(),e,r,i,Fh,null)}const c=ah(t,h,l.isFullyInitialized()||Ga(s),u.filtersNodes());return Bh(e,c,s,i,new Nh(i,c,r),a)}function $h(e,t,s,n,i,r,o){const a=t.eventCache;let l,h;const u=new Nh(i,t,r);if(Ga(s))h=e.filter.updateFullNode(t.eventCache.getNode(),n,o),l=oh(t,h,!0,e.filter.filtersNodes());else{const i=$a(s);if(".priority"===i)h=e.filter.updatePriority(t.eventCache.getNode(),n),l=oh(t,h,a.isFullyInitialized(),a.isFiltered());else{const r=qa(s),h=a.getNode().getImmediateChild(i);let c;if(Ga(r))c=n;else{const e=u.getCompleteChild(i);c=null!=e?".priority"===za(r)&&e.getChild(Ha(r)).isEmpty()?e:e.updateChild(r,n):Il.EMPTY_NODE}l=h.equals(c)?t:oh(t,e.filter.updateChild(a.getNode(),i,c,r,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return l}function Vh(e,t){return e.eventCache.isCompleteForChild(t)}function qh(e,t,s){return s.foreach(((e,s)=>{t=t.updateChild(e,s)})),t}function zh(e,t,s,n,i,r,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,h=t;l=Ga(s)?n:new ch(null).setTree(s,n);const u=t.serverCache.getNode();return l.children.inorderTraversal(((s,n)=>{if(u.hasChild(s)){const l=qh(0,t.serverCache.getNode().getImmediateChild(s),n);h=jh(e,h,new Ba(s),l,i,r,o,a)}})),l.children.inorderTraversal(((s,n)=>{const l=!t.serverCache.isCompleteForChild(s)&&null===n.value;if(!u.hasChild(s)&&!l){const l=qh(0,t.serverCache.getNode().getImmediateChild(s),n);h=jh(e,h,new Ba(s),l,i,r,o,a)}})),h}class Uh{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,n=new Nl(s.getIndex()),i=(r=s).loadsAllData()?new Nl(r.getIndex()):r.hasLimit()?new jl(r):new Bl(r);var r;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=n.updateFullNode(Il.EMPTY_NODE,o.getNode(),null),h=i.updateFullNode(Il.EMPTY_NODE,a.getNode(),null),u=new sh(l,o.isFullyInitialized(),n.filtersNodes()),c=new sh(h,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=rh(c,u),this.eventGenerator_=new nh(this.query_)}get query(){return this.query_}}function Hh(e,t){const s=hh(e.viewCache_);return s&&(e.query._queryParams.loadsAllData()||!Ga(t)&&!s.getImmediateChild($a(t)).isEmpty())?s.getChild(t):null}function Wh(e){return 0===e.eventRegistrations_.length}function Gh(e,t,s){const n=[];if(s){Oi(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(s,i);t&&n.push(t)}))}if(t){let s=[];for(let n=0;n<e.eventRegistrations_.length;++n){const i=e.eventRegistrations_[n];if(i.matches(t)){if(t.hasAnyCallback()){s=s.concat(e.eventRegistrations_.slice(n+1));break}}else s.push(i)}e.eventRegistrations_=s}else e.eventRegistrations_=[];return n}function Yh(e,t,s,n){t.type===Jl.MERGE&&null!==t.source.queryId&&(Oi(hh(e.viewCache_),"We should always have a full cache before handling merges"),Oi(lh(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,r=function(e,t,s,n,i){const r=new Lh;let o,a;if(s.type===Jl.OVERWRITE){const l=s;l.source.fromUser?o=$h(e,t,l.path,l.snap,n,i,r):(Oi(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!Ga(l.path),o=jh(e,t,l.path,l.snap,n,i,a,r))}else if(s.type===Jl.MERGE){const l=s;l.source.fromUser?o=function(e,t,s,n,i,r,o){let a=t;return n.foreach(((n,l)=>{const h=Wa(s,n);Vh(t,$a(h))&&(a=$h(e,a,h,l,i,r,o))})),n.foreach(((n,l)=>{const h=Wa(s,n);Vh(t,$a(h))||(a=$h(e,a,h,l,i,r,o))})),a}(e,t,l.path,l.children,n,i,r):(Oi(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=zh(e,t,l.path,l.children,n,i,a,r))}else if(s.type===Jl.ACK_USER_WRITE){const a=s;o=a.revert?function(e,t,s,n,i,r){let o;if(null!=Mh(n,s))return t;{const a=new Nh(n,t,i),l=t.eventCache.getNode();let h;if(Ga(s)||".priority"===$a(s)){let s;if(t.serverCache.isFullyInitialized())s=Ih(n,hh(t));else{const e=t.serverCache.getNode();Oi(e instanceof Il,"serverChildren would be complete if leaf node"),s=Ph(n,e)}h=e.filter.updateFullNode(l,s,r)}else{const i=$a(s);let u=Oh(n,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),h=null!=u?e.filter.updateChild(l,i,u,qa(s),a,r):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Il.EMPTY_NODE,qa(s),a,r):l,h.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Ih(n,hh(t)),o.isLeafNode()&&(h=e.filter.updateFullNode(h,o,r)))}return o=t.serverCache.isFullyInitialized()||null!=Mh(n,ja()),oh(t,h,o,e.filter.filtersNodes())}}(e,t,a.path,n,i,r):function(e,t,s,n,i,r,o){if(null!=Mh(i,s))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=n.value){if(Ga(s)&&l.isFullyInitialized()||l.isCompleteForPath(s))return jh(e,t,s,l.getNode().getChild(s),i,r,a,o);if(Ga(s)){let n=new ch(null);return l.getNode().forEachChild(al,((e,t)=>{n=n.set(new Ba(e),t)})),zh(e,t,s,n,i,r,a,o)}return t}{let h=new ch(null);return n.foreach(((e,t)=>{const n=Wa(s,e);l.isCompleteForPath(n)&&(h=h.set(e,l.getNode().getChild(n)))})),zh(e,t,s,h,i,r,a,o)}}(e,t,a.path,a.affectedTree,n,i,r)}else{if(s.type!==Jl.LISTEN_COMPLETE)throw Di("Unknown operation type: "+s.type);o=function(e,t,s,n,i){const r=t.serverCache;return Bh(e,ah(t,r.getNode(),r.isFullyInitialized()||Ga(s),r.isFiltered()),s,n,Fh,i)}(e,t,s.path,n,r)}const l=r.getChanges();return function(e,t,s){const n=t.eventCache;if(n.isFullyInitialized()){const i=n.getNode().isLeafNode()||n.getNode().isEmpty(),r=lh(e);(s.length>0||!e.eventCache.isFullyInitialized()||i&&!n.getNode().equals(r)||!n.getNode().getPriority().equals(r.getPriority()))&&s.push(Dl(lh(t)))}}(t,o,l),{viewCache:o,changes:l}}(e.processor_,i,t,s,n);var o,a;return o=e.processor_,a=r.viewCache,Oi(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Oi(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Oi(r.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=r.viewCache,Kh(e,r.changes,r.viewCache.eventCache.getNode(),null)}function Kh(e,t,s,n){const i=n?[n]:e.eventRegistrations_;return function(e,t,s,n){const i=[],r=[];return t.forEach((t=>{var s;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&r.push((s=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:s}))})),ih(e,i,"child_removed",t,n,s),ih(e,i,"child_added",t,n,s),ih(e,i,"child_moved",r,n,s),ih(e,i,"child_changed",t,n,s),ih(e,i,"value",t,n,s),i}(e.eventGenerator_,t,s,i)}let Jh,Xh;class Qh{constructor(){this.views=new Map}}function Zh(e,t,s,n){const i=t.source.queryId;if(null!==i){const r=e.views.get(i);return Oi(null!=r,"SyncTree gave us an op for an invalid query."),Yh(r,t,s,n)}{let i=[];for(const r of e.views.values())i=i.concat(Yh(r,t,s,n));return i}}function eu(e,t,s,n,i){const r=t._queryIdentifier,o=e.views.get(r);if(!o){let e=Ih(s,i?n:null),r=!1;e?r=!0:n instanceof Il?(e=Ph(s,n),r=!1):(e=Il.EMPTY_NODE,r=!1);const o=rh(new sh(e,r,!1),new sh(n,i,!1));return new Uh(t,o)}return o}function tu(e){const t=[];for(const s of e.views.values())s.query._queryParams.loadsAllData()||t.push(s);return t}function su(e,t){let s=null;for(const n of e.views.values())s=s||Hh(n,t);return s}function nu(e,t){if(t._queryParams.loadsAllData())return ou(e);{const s=t._queryIdentifier;return e.views.get(s)}}function iu(e,t){return null!=nu(e,t)}function ru(e){return null!=ou(e)}function ou(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let au=1;class lu{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ch(null),this.pendingWriteTree_={visibleWrites:dh.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function hu(e,t,s,n,i){return function(e,t,s,n,i){Oi(n>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:s,writeId:n,visible:i}),i&&(e.visibleWrites=ph(e.visibleWrites,t,s)),e.lastWriteId=n}(e.pendingWriteTree_,t,s,n,i),i?gu(e,new eh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,s)):[]}function uu(e,t,s=!1){const n=function(e,t){for(let s=0;s<e.allWrites.length;s++){const n=e.allWrites[s];if(n.writeId===t)return n}return null}(e.pendingWriteTree_,t);if(function(e,t){const s=e.allWrites.findIndex((e=>e.writeId===t));Oi(s>=0,"removeWrite called with nonexistent writeId.");const n=e.allWrites[s];e.allWrites.splice(s,1);let i=n.visible,r=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=s&&Th(t,n.path)?i=!1:Ja(n.path,t.path)&&(r=!0)),o--}return!!i&&(r?(function(e){e.visibleWrites=Eh(e.allWrites,Sh,ja()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(n.snap?e.visibleWrites=gh(e.visibleWrites,n.path):la(n.children,(t=>{e.visibleWrites=gh(e.visibleWrites,Wa(n.path,t))})),!0))}(e.pendingWriteTree_,t)){let t=new ch(null);return null!=n.snap?t=t.set(ja(),!0):la(n.children,(e=>{t=t.set(new Ba(e),!0)})),gu(e,new Ql(n.path,t,s))}return[]}function cu(e,t,s){return gu(e,new eh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,s))}function du(e,t,s,n,i=!1){const r=t._path,o=e.syncPointTree_.get(r);let a=[];if(o&&("default"===t._queryIdentifier||iu(o,t))){const l=function(e,t,s,n){const i=t._queryIdentifier,r=[];let o=[];const a=ru(e);if("default"===i)for(const[t,i]of e.views.entries())o=o.concat(Gh(i,s,n)),Wh(i)&&(e.views.delete(t),i.query._queryParams.loadsAllData()||r.push(i.query));else{const t=e.views.get(i);t&&(o=o.concat(Gh(t,s,n)),Wh(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||r.push(t.query)))}return a&&!ru(e)&&r.push(new(Oi(Jh,"Reference.ts has not been loaded"),Jh)(t._repo,t._path)),{removed:r,events:o}}(o,t,s,n);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(r));const h=l.removed;if(a=l.events,!i){const s=-1!==h.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(r,((e,t)=>ru(t)));if(s&&!i){const t=e.syncPointTree_.subtree(r);if(!t.isEmpty()){const s=function(e){return e.fold(((e,t,s)=>{if(t&&ru(t))return[ou(t)];{let e=[];return t&&(e=tu(t)),la(s,((t,s)=>{e=e.concat(s)})),e}}))}(t);for(let t=0;t<s.length;++t){const n=s[t],i=n.query,r=vu(e,n);e.listenProvider_.startListening(Tu(i),yu(e,i),r.hashFn,r.onComplete)}}}if(!i&&h.length>0&&!n)if(s){const s=null;e.listenProvider_.stopListening(Tu(t),s)}else h.forEach((t=>{const s=e.queryToTagMap.get(wu(t));e.listenProvider_.stopListening(Tu(t),s)}))}!function(e,t){for(let s=0;s<t.length;++s){const n=t[s];if(!n._queryParams.loadsAllData()){const t=wu(n),s=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(s)}}}(e,h)}return a}function pu(e,t,s,n){const i=bu(e,n);if(null!=i){const n=ku(i),r=n.path,o=n.queryId,a=Ya(r,t);return Cu(e,r,new eh(Xl(o),a,s))}return[]}function fu(e,t,s){const n=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,s)=>{const n=su(s,Ya(e,t));if(n)return n}));return xh(n,t,i,s,!0)}function gu(e,t){return mu(t,e.syncPointTree_,null,Ch(e.pendingWriteTree_,ja()))}function mu(e,t,s,n){if(Ga(e.path))return _u(e,t,s,n);{const i=t.get(ja());null==s&&null!=i&&(s=su(i,ja()));let r=[];const o=$a(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=s?s.getImmediateChild(o):null,t=Dh(n,o);r=r.concat(mu(a,l,e,t))}return i&&(r=r.concat(Zh(i,e,n,s))),r}}function _u(e,t,s,n){const i=t.get(ja());null==s&&null!=i&&(s=su(i,ja()));let r=[];return t.children.inorderTraversal(((t,i)=>{const o=s?s.getImmediateChild(t):null,a=Dh(n,t),l=e.operationForChild(t);l&&(r=r.concat(_u(l,i,o,a)))})),i&&(r=r.concat(Zh(i,e,n,s))),r}function vu(e,t){const s=t.query,n=yu(e,s);return{hashFn:()=>(function(e){return e.viewCache_.serverCache.getNode()}(t)||Il.EMPTY_NODE).hash(),onComplete:t=>{if("ok"===t)return n?function(e,t,s){const n=bu(e,s);if(n){const s=ku(n),i=s.path,r=s.queryId,o=Ya(i,t);return Cu(e,i,new Zl(Xl(r),o))}return[]}(e,s._path,n):function(e,t){return gu(e,new Zl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,s._path);{const n=function(e,t){let s="Unknown Error";"too_big"===e?s="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?s="Client doesn't have permission to access the desired data.":"unavailable"===e&&(s="The service is unavailable");const n=new Error(e+" at "+t._path.toString()+": "+s);return n.code=e.toUpperCase(),n}(t,s);return du(e,s,null,n)}}}}function yu(e,t){const s=wu(t);return e.queryToTagMap.get(s)}function wu(e){return e._path.toString()+"$"+e._queryIdentifier}function bu(e,t){return e.tagToQueryMap.get(t)}function ku(e){const t=e.indexOf("$");return Oi(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Ba(e.substr(0,t))}}function Cu(e,t,s){const n=e.syncPointTree_.get(t);return Oi(n,"Missing sync point for query tag that we're tracking"),Zh(n,s,Ch(e.pendingWriteTree_,t),null)}function Tu(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Oi(Xh,"Reference.ts has not been loaded"),Xh)(e._repo,e._path):e}class Su{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Su(t)}node(){return this.node_}}class Eu{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Wa(this.path_,e);return new Eu(this.syncTree_,t)}node(){return fu(this.syncTree_,this.path_)}}const xu=function(e,t,s){return e&&"object"==typeof e?(Oi(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Iu(e[".sv"],t,s):"object"==typeof e[".sv"]?Pu(e[".sv"],t):void Oi(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Iu=function(e,t,s){if("timestamp"===e)return s.timestamp;Oi(!1,"Unexpected server value: "+e)},Pu=function(e,t,s){e.hasOwnProperty("increment")||Oi(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const n=e.increment;"number"!=typeof n&&Oi(!1,"Unexpected increment value: "+n);const i=t.node();if(Oi(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return n;const r=i.getValue();return"number"!=typeof r?n:r+n},Au=function(e,t,s){return Mu(e,new Su(t),s)};function Mu(e,t,s){const n=e.getPriority().val(),i=xu(n,t.getImmediateChild(".priority"),s);let r;if(e.isLeafNode()){const n=e,r=xu(n.getValue(),t,s);return r!==n.getValue()||i!==n.getPriority().val()?new yl(r,Al(i)):e}{const n=e;return r=n,i!==n.getPriority().val()&&(r=r.updatePriority(new yl(i))),n.forEachChild(wl,((e,n)=>{const i=Mu(n,t.getImmediateChild(e),s);i!==n&&(r=r.updateImmediateChild(e,i))})),r}}class Ou{constructor(e="",t=null,s={children:{},childCount:0}){this.name=e,this.parent=t,this.node=s}}function Du(e,t){let s=t instanceof Ba?t:new Ba(t),n=e,i=$a(s);for(;null!==i;){const e=nr(n.node.children,i)||{children:{},childCount:0};n=new Ou(i,n,e),s=qa(s),i=$a(s)}return n}function Ru(e){return e.node.value}function Lu(e,t){e.node.value=t,$u(e)}function Fu(e){return e.node.childCount>0}function Nu(e,t){la(e.node.children,((s,n)=>{t(new Ou(s,e,n))}))}function Bu(e,t,s,n){s&&!n&&t(e),Nu(e,(e=>{Bu(e,t,!0,n)})),s&&n&&t(e)}function ju(e){return new Ba(null===e.parent?e.name:ju(e.parent)+"/"+e.name)}function $u(e){null!==e.parent&&function(e,t,s){const n=function(e){return void 0===Ru(e)&&!Fu(e)}(s),i=sr(e.node.children,t);n&&i?(delete e.node.children[t],e.node.childCount--,$u(e)):n||i||(e.node.children[t]=s.node,e.node.childCount++,$u(e))}(e.parent,e.name,e)}const Vu=/[\[\].#$\/\u0000-\u001F\u007F]/,qu=/[\[\].#$\u0000-\u001F\u007F]/,zu=10485760,Uu=function(e){return"string"==typeof e&&0!==e.length&&!Vu.test(e)},Hu=function(e){return"string"==typeof e&&0!==e.length&&!qu.test(e)},Wu=function(e,t,s,n){n&&void 0===t||Gu(hr(e,"value"),t,s)},Gu=function(e,t,s){const n=s instanceof Ba?new Xa(s,e):s;if(void 0===t)throw new Error(e+"contains undefined "+Za(n));if("function"==typeof t)throw new Error(e+"contains a function "+Za(n)+" with contents = "+t.toString());if(ea(t))throw new Error(e+"contains "+t.toString()+" "+Za(n));if("string"==typeof t&&t.length>zu/3&&ur(t)>zu)throw new Error(e+"contains a string greater than "+zu+" utf8 bytes "+Za(n)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let s=!1,i=!1;if(la(t,((t,r)=>{if(".value"===t)s=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Uu(t)))throw new Error(e+" contains an invalid key ("+t+") "+Za(n)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ur(t),Qa(e)}(n,t),Gu(e,r,n),function(e){const t=e.parts_.pop();e.byteLength_-=ur(t),e.parts_.length>0&&(e.byteLength_-=1)}(n)})),s&&i)throw new Error(e+' contains ".value" child '+Za(n)+" in addition to actual children.")}},Yu=function(e,t,s,n){if(!(n&&void 0===s||Hu(s)))throw new Error(hr(e,t)+'was an invalid path = "'+s+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ku=function(e,t){if(".info"===$a(t))throw new Error(e+" failed = Can't modify data under /.info/")};class Ju{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Xu(e,t){let s=null;for(let n=0;n<t.length;n++){const i=t[n],r=i.getPath();null===s||Ka(r,s.path)||(e.eventLists_.push(s),s=null),null===s&&(s={events:[],path:r}),s.events.push(i)}s&&e.eventLists_.push(s)}function Qu(e,t,s){Xu(e,s),function(e,t){e.recursionDepth_++;let s=!0;for(let n=0;n<e.eventLists_.length;n++){const i=e.eventLists_[n];i&&(t(i.path)?(Zu(e.eventLists_[n]),e.eventLists_[n]=null):s=!1)}s&&(e.eventLists_=[]),e.recursionDepth_--}(e,(e=>Ja(e,t)||Ja(t,e)))}function Zu(e){for(let t=0;t<e.events.length;t++){const s=e.events[t];if(null!==s){e.events[t]=null;const n=s.getEventRunner();Go&&Ko("event: "+s.toString()),da(n)}}}class ec{constructor(e,t,s,n){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=s,this.appCheckProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ju,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hl(),this.transactionQueueTree_=new Ou,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tc(e){const t=e.infoData_.getNode(new Ba(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function sc(e){return(t=(t={timestamp:tc(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function nc(e,t,s,n,i){e.dataUpdateCount++;const r=new Ba(t);s=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,s):s;let o=[];if(i)if(n){const t=rr(s,(e=>Al(e)));o=function(e,t,s,n){const i=bu(e,n);if(i){const n=ku(i),r=n.path,o=n.queryId,a=Ya(r,t),l=ch.fromObject(s);return Cu(e,r,new th(Xl(o),a,l))}return[]}(e.serverSyncTree_,r,t,i)}else{const t=Al(s);o=pu(e.serverSyncTree_,r,t,i)}else if(n){const t=rr(s,(e=>Al(e)));o=function(e,t,s){const n=ch.fromObject(s);return gu(e,new th({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}(e.serverSyncTree_,r,t)}else{const t=Al(s);o=cu(e.serverSyncTree_,r,t)}let a=r;o.length>0&&(a=uc(e,r)),Qu(e.eventQueue_,a,o)}function ic(e,t){rc(e,"connected",t),!1===t&&function(e){ac(e,"onDisconnectEvents");const t=sc(e),s=Hl();Gl(e.onDisconnect_,ja(),((n,i)=>{const r=function(e,t,s,n){return Mu(t,new Eu(s,e),n)}(n,i,e.serverSyncTree_,t);Wl(s,n,r)}));let n=[];Gl(s,ja(),((t,s)=>{n=n.concat(cu(e.serverSyncTree_,t,s));const i=gc(e,t);uc(e,i)})),e.onDisconnect_=Hl(),Qu(e.eventQueue_,ja(),n)}(e)}function rc(e,t,s){const n=new Ba("/.info/"+t),i=Al(s);e.infoData_.updateSnapshot(n,i);const r=cu(e.infoSyncTree_,n,i);Qu(e.eventQueue_,n,r)}function oc(e){return e.nextWriteId_++}function ac(e,...t){let s="";e.persistentConnection_&&(s=e.persistentConnection_.id+":"),Ko(s,...t)}function lc(e,t,s){return fu(e.serverSyncTree_,t,s)||Il.EMPTY_NODE}function hc(e,t=e.transactionQueueTree_){if(t||fc(e,t),Ru(t)){const s=dc(e,t);Oi(s.length>0,"Sending zero length transaction queue"),s.every((e=>0===e.status))&&function(e,t,s){const n=s.map((e=>e.currentWriteId)),i=lc(e,t,n);let r=i;const o=i.hash();for(let e=0;e<s.length;e++){const n=s[e];Oi(0===n.status,"tryToSendTransactionQueue_: items in queue should all be run."),n.status=1,n.retryCount++;const i=Ya(t,n.path);r=r.updateChild(i,n.currentOutputSnapshotRaw)}const a=r.val(!0),l=t;e.server_.put(l.toString(),a,(n=>{ac(e,"transaction put response",{path:l.toString(),status:n});let i=[];if("ok"===n){const n=[];for(let t=0;t<s.length;t++)s[t].status=2,i=i.concat(uu(e.serverSyncTree_,s[t].currentWriteId)),s[t].onComplete&&n.push((()=>s[t].onComplete(null,!0,s[t].currentOutputSnapshotResolved))),s[t].unwatcher();fc(e,Du(e.transactionQueueTree_,t)),hc(e,e.transactionQueueTree_),Qu(e.eventQueue_,t,i);for(let e=0;e<n.length;e++)da(n[e])}else{if("datastale"===n)for(let e=0;e<s.length;e++)3===s[e].status?s[e].status=4:s[e].status=0;else{Zo("transaction at "+l.toString()+" failed: "+n);for(let e=0;e<s.length;e++)s[e].status=4,s[e].abortReason=n}uc(e,t)}}),o)}(e,ju(t),s)}else Fu(t)&&Nu(t,(t=>{hc(e,t)}))}function uc(e,t){const s=cc(e,t),n=ju(s);return function(e,t,s){if(0===t.length)return;const n=[];let i=[];const r=t.filter((e=>0===e.status)).map((e=>e.currentWriteId));for(let a=0;a<t.length;a++){const l=t[a],h=Ya(s,l.path);let u,c=!1;if(Oi(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)c=!0,u=l.abortReason,i=i.concat(uu(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)c=!0,u="maxretry",i=i.concat(uu(e.serverSyncTree_,l.currentWriteId,!0));else{const s=lc(e,l.path,r);l.currentInputSnapshot=s;const n=t[a].update(s.val());if(void 0!==n){Gu("transaction failed: Data returned ",n,l.path);let t=Al(n);"object"==typeof n&&null!=n&&sr(n,".priority")||(t=t.updatePriority(s.getPriority()));const o=l.currentWriteId,a=sc(e),h=Au(t,s,a);l.currentOutputSnapshotRaw=t,l.currentOutputSnapshotResolved=h,l.currentWriteId=oc(e),r.splice(r.indexOf(o),1),i=i.concat(hu(e.serverSyncTree_,l.path,h,l.currentWriteId,l.applyLocally)),i=i.concat(uu(e.serverSyncTree_,o,!0))}else c=!0,u="nodata",i=i.concat(uu(e.serverSyncTree_,l.currentWriteId,!0))}Qu(e.eventQueue_,s,i),i=[],c&&(t[a].status=2,o=t[a].unwatcher,setTimeout(o,Math.floor(0)),t[a].onComplete&&("nodata"===u?n.push((()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot))):n.push((()=>t[a].onComplete(new Error(u),!1,null)))))}var o;fc(e,e.transactionQueueTree_);for(let e=0;e<n.length;e++)da(n[e]);hc(e,e.transactionQueueTree_)}(e,dc(e,s),n),n}function cc(e,t){let s,n=e.transactionQueueTree_;for(s=$a(t);null!==s&&void 0===Ru(n);)n=Du(n,s),s=$a(t=qa(t));return n}function dc(e,t){const s=[];return pc(e,t,s),s.sort(((e,t)=>e.order-t.order)),s}function pc(e,t,s){const n=Ru(t);if(n)for(let e=0;e<n.length;e++)s.push(n[e]);Nu(t,(t=>{pc(e,t,s)}))}function fc(e,t){const s=Ru(t);if(s){let e=0;for(let t=0;t<s.length;t++)2!==s[t].status&&(s[e]=s[t],e++);s.length=e,Lu(t,s.length>0?s:void 0)}Nu(t,(t=>{fc(e,t)}))}function gc(e,t){const s=ju(cc(e,t)),n=Du(e.transactionQueueTree_,t);return function(e,t){let s=e.parent;for(;null!==s;){if(t(s))return!0;s=s.parent}}(n,(t=>{mc(e,t)})),mc(e,n),Bu(n,(t=>{mc(e,t)})),s}function mc(e,t){const s=Ru(t);if(s){const n=[];let i=[],r=-1;for(let t=0;t<s.length;t++)3===s[t].status||(1===s[t].status?(Oi(r===t-1,"All SENT items should be at beginning of queue."),r=t,s[t].status=3,s[t].abortReason="set"):(Oi(0===s[t].status,"Unexpected transaction status in abort"),s[t].unwatcher(),i=i.concat(uu(e.serverSyncTree_,s[t].currentWriteId,!0)),s[t].onComplete&&n.push(s[t].onComplete.bind(null,new Error("set"),!1,null))));-1===r?Lu(t,void 0):s.length=r+1,Qu(e.eventQueue_,ju(t),i);for(let e=0;e<n.length;e++)da(n[e])}}const _c=function(e,t){const s=vc(e),n=s.namespace;"firebase.com"===s.domain&&Qo(s.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===s.domain||Qo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),s.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Zo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===s.scheme||"wss"===s.scheme;return{repoInfo:new ba(s.host,s.secure,n,i,t,"",n!==s.subdomain),path:new Ba(s.pathString)}},vc=function(e){let t="",s="",n="",i="",r="",o=!0,a="https",l=443;if("string"==typeof e){let h=e.indexOf("//");h>=0&&(a=e.substring(0,h-1),e=e.substring(h+2));let u=e.indexOf("/");-1===u&&(u=e.length);let c=e.indexOf("?");-1===c&&(c=e.length),t=e.substring(0,Math.min(u,c)),u<c&&(i=function(e){let t="";const s=e.split("/");for(let n=0;n<s.length;n++)if(s[n].length>0){let i=s[n];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(u,c)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const s of e.split("&")){if(0===s.length)continue;const n=s.split("=");2===n.length?t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Zo(`Invalid query segment '${s}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,c)));h=t.indexOf(":"),h>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(h+1),10)):h=t.length;const p=t.slice(0,h);if("localhost"===p.toLowerCase())s="localhost";else if(p.split(".").length<=2)s=p;else{const e=t.indexOf(".");n=t.substring(0,e).toLowerCase(),s=t.substring(e+1),r=n}"ns"in d&&(r=d.ns)}return{host:t,port:l,domain:s,subdomain:n,secure:o,scheme:a,pathString:i,namespace:r}},yc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",wc=function(){let e=0;const t=[];return function(s){const n=s===e;let i;e=s;const r=new Array(8);for(i=7;i>=0;i--)r[i]=yc.charAt(s%64),s=Math.floor(s/64);Oi(0===s,"Cannot push at time == 0");let o=r.join("");if(n){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=yc.charAt(t[i]);return Oi(20===o.length,"nextPushId: Length should be 20."),o}}();class bc{constructor(e,t,s,n){this.eventType=e,this.eventRegistration=t,this.snapshot=s,this.prevName=n}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+er(this.snapshot.exportVal())}}class kc{constructor(e,t,s){this.eventRegistration=e,this.error=t,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Cc{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Oi(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Tc{constructor(e,t,s,n){this._repo=e,this._path=t,this._queryParams=s,this._orderByCalled=n}get key(){return Ga(this._path)?null:za(this._path)}get ref(){return new Sc(this._repo,this._path)}get _queryIdentifier(){const e=ql(this._queryParams),t=oa(e);return"{}"===t?"default":t}get _queryObject(){return ql(this._queryParams)}isEqual(e){if(!((e=cr(e))instanceof Tc))return!1;const t=this._repo===e._repo,s=Ka(this._path,e._path),n=this._queryIdentifier===e._queryIdentifier;return t&&s&&n}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let s=e.pieceNum_;s<e.pieces_.length;s++)""!==e.pieces_[s]&&(t+="/"+encodeURIComponent(String(e.pieces_[s])));return t||"/"}(this._path)}}class Sc extends Tc{constructor(e,t){super(e,t,new $l,!1)}get parent(){const e=Ha(this._path);return null===e?null:new Sc(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ec{constructor(e,t,s){this._node=e,this.ref=t,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ba(e),s=Ic(this.ref,e);return new Ec(this._node.getChild(t),s,wl)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,((t,s)=>e(new Ec(s,Ic(this.ref,t),wl))))}hasChild(e){const t=new Ba(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function xc(e,t){return(e=cr(e))._checkNotDeleted("ref"),void 0!==t?Ic(e._root,t):e._root}function Ic(e,t){var s;return null===$a((e=cr(e))._path)?((s=t)&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),Yu("child","path",s,!1)):Yu("child","path",t,!1),new Sc(e._repo,Wa(e._path,t))}function Pc(e,t){e=cr(e),Ku("set",e._path),Wu("set",t,e._path,!1);const s=new Ui;return function(e,t,s,n,i){ac(e,"set",{path:t.toString(),value:s,priority:n});const r=sc(e),o=Al(s,n),a=fu(e.serverSyncTree_,t),l=Au(o,a,r),h=oc(e),u=hu(e.serverSyncTree_,t,l,h,!0);Xu(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((s,n)=>{const r="ok"===s;r||Zo("set at "+t+" failed: "+s);const o=uu(e.serverSyncTree_,h,!r);Qu(e.eventQueue_,t,o),function(e,t,s,n){t&&da((()=>{if("ok"===s)t(null);else{const e=(s||"error").toUpperCase();let i=e;n&&(i+=": "+n);const r=new Error(i);r.code=e,t(r)}}))}(0,i,s,n)}));const c=gc(e,t);uc(e,c),Qu(e.eventQueue_,c,[])}(e._repo,e._path,t,null,s.wrapCallback((()=>{}))),s.promise}function Ac(e){e=cr(e);const t=new Cc((()=>{})),s=new Mc(t);return function(e,t,s){const n=function(e,t){const s=t._path;let n=null;e.syncPointTree_.foreachOnPath(s,((e,t)=>{const i=Ya(e,s);n=n||su(t,i)}));let i=e.syncPointTree_.get(s);i?n=n||su(i,ja()):(i=new Qh,e.syncPointTree_=e.syncPointTree_.set(s,i));const r=null!=n,o=r?new sh(n,!0,!1):null;return lh(eu(i,t,Ch(e.pendingWriteTree_,t._path),r?o.getNode():Il.EMPTY_NODE,r).viewCache_)}(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((n=>{const i=Al(n).withIndex(t._queryParams.getIndex());let r;if(function(e,t,s,n=!1){const i=t._path;let r=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const s=Ya(e,i);r=r||su(t,s),o=o||ru(t)}));let a,l=e.syncPointTree_.get(i);l?(o=o||ru(l),r=r||su(l,ja())):(l=new Qh,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=r?a=!0:(a=!1,r=Il.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const s=su(t,ja());s&&(r=r.updateImmediateChild(e,s))})));const h=iu(l,t);if(!h&&!t._queryParams.loadsAllData()){const s=wu(t);Oi(!e.queryToTagMap.has(s),"View does not exist, but we have a tag");const n=au++;e.queryToTagMap.set(s,n),e.tagToQueryMap.set(n,s)}let u=function(e,t,s,n,i,r){const o=eu(e,t,n,i,r);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,s),function(e,t){const s=e.viewCache_.eventCache,n=[];return s.getNode().isLeafNode()||s.getNode().forEachChild(wl,((e,t)=>{n.push(Rl(e,t))})),s.isFullyInitialized()&&n.push(Dl(s.getNode())),Kh(e,n,s.getNode(),t)}(o,s)}(l,t,s,Ch(e.pendingWriteTree_,i),r,a);if(!h&&!o&&!n){const s=nu(l,t);u=u.concat(function(e,t,s){const n=t._path,i=yu(e,t),r=vu(e,s),o=e.listenProvider_.startListening(Tu(t),i,r.hashFn,r.onComplete),a=e.syncPointTree_.subtree(n);if(i)Oi(!ru(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,s)=>{if(!Ga(e)&&t&&ru(t))return[ou(t).query];{let e=[];return t&&(e=e.concat(tu(t).map((e=>e.query)))),la(s,((t,s)=>{e=e.concat(s)})),e}}));for(let s=0;s<t.length;++s){const n=t[s];e.listenProvider_.stopListening(Tu(n),yu(e,n))}}return o}(e,t,s))}}(e.serverSyncTree_,t,s,!0),t._queryParams.loadsAllData())r=cu(e.serverSyncTree_,t._path,i);else{const s=yu(e.serverSyncTree_,t);r=pu(e.serverSyncTree_,t._path,i,s)}return Qu(e.eventQueue_,t._path,r),du(e.serverSyncTree_,t,s,null,!0),i}),(s=>(ac(e,"get for query "+er(t)+" failed: "+s),Promise.reject(new Error(s)))))}(e._repo,e,s).then((t=>new Ec(t,new Sc(e._repo,e._path),e._queryParams.getIndex())))}class Mc{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const s=t._queryParams.getIndex();return new bc("value",this,new Ec(e.snapshotNode,new Sc(t._repo,t._path),s))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new kc(this,e,t):null}matches(e){return e instanceof Mc&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}!function(e){Oi(!Jh,"__referenceConstructor has already been defined"),Jh=e}(Sc),function(e){Oi(!Xh,"__referenceConstructor has already been defined"),Xh=e}(Sc);const Oc={};class Dc{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(e,t,s){if(e.stats_=Ea(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new zl(e.repoInfo_,((t,s,n,i)=>{nc(e,t,s,n,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>ic(e,!0)),0);else{if(null!=s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{er(s)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new sl(e.repoInfo_,t,((t,s,n,i)=>{nc(e,t,s,n,i)}),(t=>{ic(e,t)}),(t=>{!function(e,t){la(t,((t,s)=>{rc(e,t,s)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,s),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(t){const s=t.toString();return Sa[s]||(Sa[s]=new Kl(e.stats_,e.server_)),Sa[s]}(e.repoInfo_),e.infoData_=new Ul,e.infoSyncTree_=new lu({startListening:(t,s,n,i)=>{let r=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(r=cu(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),r},stopListening:()=>{}}),rc(e,"connected",!1),e.serverSyncTree_=new lu({startListening:(t,s,n,i)=>(e.server_.listen(t,n,s,((s,n)=>{const r=i(s,n);Qu(e.eventQueue_,t._path,r)})),[]),stopListening:(t,s)=>{e.server_.unlisten(t,s)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0,Yi("Database",null!==this._repo.repoInfo_.emulatorOptions)),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Sc(this._repo,ja())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const s=Oc[t];s&&s[e.key]===e||Qo(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete s[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Qo("Cannot call "+e+" on a deleted database.")}}sl.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},sl.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},No="11.8.0",bo(new dr("database",((e,{instanceIdentifier:t})=>function(e,t,s,n,i){let r=n||e.options.databaseURL;void 0===r&&(e.options.projectId||Qo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ko("Using default host for project ",e.options.projectId),r=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=_c(r,i),h=l.repoInfo;"undefined"!=typeof process&&process.env&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,r=`http://${a}?ns=${h.namespace}`,l=_c(r,i),h=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new ma(ma.OWNER):new ga(e.name,e.options,t);(function(e,t){const s=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Uu(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==s.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Hu(e)}(s))throw new Error(hr("Invalid Firebase Database URL","url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})(0,l),Ga(l.path)||Qo("Database URL must point to the root of a Firebase Database (not including a child path).");const c=function(e,t,s,n){let i=Oc[t.name];i||(i={},Oc[t.name]=i);let r=i[e.toURLString()];return r&&Qo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new ec(e,!1,s,n),i[e.toURLString()]=r,r}(h,e,u,new fa(e,s));return new Dc(c,e)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),So(Lo,Fo,void 0),So(Lo,Fo,"esm2017");const Rc=function(e=function(e=go){const t=_o.get(e);if(!t&&e===go&&zi())return To();if(!t)throw ko.create("no-app",{appName:e});return t}(),t){const s=function(e){const t=e.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),e.container.getProvider("database")}(e).getImmediate({identifier:t});if(!s._instanceStarted){const e=(()=>{const e=(e=>{var t,s;return null===(s=null===(t=qi())||void 0===t?void 0:t.emulatorHosts)||void 0===s?void 0:s[e]})("database");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),s]:[e.substring(0,t),s]})();e&&function(e,t,s,n={}){(e=cr(e))._checkNotDeleted("useEmulator");const i=`${t}:${s}`,r=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&or(n,r.repoInfo_.emulatorOptions))return;Qo("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(r.repoInfo_.nodeAdmin)n.mockUserToken&&Qo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ma(ma.OWNER);else if(n.mockUserToken){const t="string"==typeof n.mockUserToken?n.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s=t||"demo-project",n=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Bi(JSON.stringify({alg:"none",type:"JWT"})),Bi(JSON.stringify(r)),""].join(".")}(n.mockUserToken,e.app.options.projectId);o=new ma(t)}Hi(t)&&(async function(e){(await fetch(e,{credentials:"include"})).ok}(t),Yi("Database",!0)),function(e,t,s,n){const i=t.lastIndexOf(":"),r=Hi(t.substring(0,i));e.repoInfo_=new ba(t,r,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,s),n&&(e.authTokenProvider_=n)}(r,i,n,o)}(s,...e)}return s}(To({apiKey:"AIzaSyBR9uFLlMQoMgvPcL6HuZGKzPTz3yhV-Fg",authDomain:"plumber-bot.firebaseapp.com",databaseURL:"https://plumber-bot-default-rtdb.europe-west1.firebasedatabase.app",projectId:"plumber-bot",storageBucket:"plumber-bot.firebasestorage.app",messagingSenderId:"48772325776",appId:"1:48772325776:web:74d68484e5a392fe535315",measurementId:"G-SLLKJQL09V"}));function Lc(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function Fc(e,t){void 0===e&&(e={}),void 0===t&&(t={});const s=["__proto__","constructor","prototype"];Object.keys(t).filter((e=>s.indexOf(e)<0)).forEach((s=>{void 0===e[s]?e[s]=t[s]:Lc(t[s])&&Lc(e[s])&&Object.keys(t[s]).length>0&&Fc(e[s],t[s])}))}const Nc={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Bc(){const e="undefined"!=typeof document?document:{};return Fc(e,Nc),e}const jc={document:Nc,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function $c(){const e="undefined"!=typeof window?window:{};return Fc(e,jc),e}function Vc(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function qc(){return Date.now()}function zc(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Uc(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const i=n<0||arguments.length<=n?void 0:arguments[n];if(null!=i&&(s=i,!("undefined"!=typeof window&&void 0!==window.HTMLElement?s instanceof HTMLElement:s&&(1===s.nodeType||11===s.nodeType)))){const s=Object.keys(Object(i)).filter((e=>t.indexOf(e)<0));for(let t=0,n=s.length;t<n;t+=1){const n=s[t],r=Object.getOwnPropertyDescriptor(i,n);void 0!==r&&r.enumerable&&(zc(e[n])&&zc(i[n])?i[n].__swiper__?e[n]=i[n]:Uc(e[n],i[n]):!zc(e[n])&&zc(i[n])?(e[n]={},i[n].__swiper__?e[n]=i[n]:Uc(e[n],i[n])):e[n]=i[n])}}}var s;return e}function Hc(e,t,s){e.style.setProperty(t,s)}function Wc(e){let{swiper:t,targetPosition:s,side:n}=e;const i=$c(),r=-t.translate;let o,a=null;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(t.cssModeFrameID);const h=s>r?"next":"prev",u=(e,t)=>"next"===h&&e>=t||"prev"===h&&e<=t,c=()=>{o=(new Date).getTime(),null===a&&(a=o);const e=Math.max(Math.min((o-a)/l,1),0),h=.5-Math.cos(e*Math.PI)/2;let d=r+h*(s-r);if(u(d,s)&&(d=s),t.wrapperEl.scrollTo({[n]:d}),u(d,s))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout((()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[n]:d})})),void i.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=i.requestAnimationFrame(c)};c()}function Gc(e,t){void 0===t&&(t="");const s=$c(),n=[...e.children];return s.HTMLSlotElement&&e instanceof HTMLSlotElement&&n.push(...e.assignedElements()),t?n.filter((e=>e.matches(t))):n}function Yc(e){try{return void console.warn(e)}catch(e){}}function Kc(e,t){void 0===t&&(t=[]);const s=document.createElement(e);return s.classList.add(...Array.isArray(t)?t:function(e){return void 0===e&&(e=""),e.trim().split(" ").filter((e=>!!e.trim()))}(t)),s}function Jc(e,t){return $c().getComputedStyle(e,null).getPropertyValue(t)}function Xc(e){let t,s=e;if(s){for(t=0;null!==(s=s.previousSibling);)1===s.nodeType&&(t+=1);return t}}function Qc(e,t,s){const n=$c();return s?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}function Zc(e){return(Array.isArray(e)?e:[e]).filter((e=>!!e))}let ed,td,sd;function nd(){return ed||(ed=function(){const e=$c(),t=Bc();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),ed}function id(e){return void 0===e&&(e={}),td||(td=function(e){let{userAgent:t}=void 0===e?{}:e;const s=nd(),n=$c(),i=n.navigator.platform,r=t||n.navigator.userAgent,o={ios:!1,android:!1},a=n.screen.width,l=n.screen.height,h=r.match(/(Android);?[\s\/]+([\d.]+)?/);let u=r.match(/(iPad).*OS\s([\d_]+)/);const c=r.match(/(iPod)(.*OS\s([\d_]+))?/),d=!u&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===i;let f="MacIntel"===i;return!u&&f&&s.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${a}x${l}`)>=0&&(u=r.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),f=!1),h&&!p&&(o.os="android",o.android=!0),(u||d||c)&&(o.os="ios",o.ios=!0),o}(e)),td}function rd(){return sd||(sd=function(){const e=$c(),t=id();let s=!1;function n(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(n()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[e,n]=t.split("Version/")[1].split(" ")[0].split(".").map((e=>Number(e)));s=e<16||16===e&&n<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),r=n();return{isSafari:s||r,needPerspectiveFix:s,need3dFix:r||i&&t.ios,isWebView:i}}()),sd}var od={on(e,t,s){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!=typeof t)return n;const i=s?"unshift":"push";return e.split(" ").forEach((e=>{n.eventsListeners[e]||(n.eventsListeners[e]=[]),n.eventsListeners[e][i](t)})),n},once(e,t,s){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!=typeof t)return n;function i(){n.off(e,i),i.__emitterProxy&&delete i.__emitterProxy;for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];t.apply(n,r)}return i.__emitterProxy=t,n.on(e,i,s)},onAny(e,t){const s=this;if(!s.eventsListeners||s.destroyed)return s;if("function"!=typeof e)return s;const n=t?"unshift":"push";return s.eventsAnyListeners.indexOf(e)<0&&s.eventsAnyListeners[n](e),s},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const s=t.eventsAnyListeners.indexOf(e);return s>=0&&t.eventsAnyListeners.splice(s,1),t},off(e,t){const s=this;return!s.eventsListeners||s.destroyed?s:s.eventsListeners?(e.split(" ").forEach((e=>{void 0===t?s.eventsListeners[e]=[]:s.eventsListeners[e]&&s.eventsListeners[e].forEach(((n,i)=>{(n===t||n.__emitterProxy&&n.__emitterProxy===t)&&s.eventsListeners[e].splice(i,1)}))})),s):s},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,s,n;for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return"string"==typeof r[0]||Array.isArray(r[0])?(t=r[0],s=r.slice(1,r.length),n=e):(t=r[0].events,s=r[0].data,n=r[0].context||e),s.unshift(n),(Array.isArray(t)?t:t.split(" ")).forEach((t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach((e=>{e.apply(n,[t,...s])})),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach((e=>{e.apply(n,s)}))})),e}};const ad=(e,t,s)=>{t&&!e.classList.contains(s)?e.classList.add(s):!t&&e.classList.contains(s)&&e.classList.remove(s)},ld=(e,t,s)=>{t&&!e.classList.contains(s)?e.classList.add(s):!t&&e.classList.contains(s)&&e.classList.remove(s)},hd=(e,t)=>{if(!e||e.destroyed||!e.params)return;const s=t.closest(e.isElement?"swiper-slide":`.${e.params.slideClass}`);if(s){let t=s.querySelector(`.${e.params.lazyPreloaderClass}`);!t&&e.isElement&&(s.shadowRoot?t=s.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame((()=>{s.shadowRoot&&(t=s.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),t&&t.remove())}))),t&&t.remove()}},ud=(e,t)=>{if(!e.slides[t])return;const s=e.slides[t].querySelector('[loading="lazy"]');s&&s.removeAttribute("loading")},cd=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const s=e.slides.length;if(!s||!t||t<0)return;t=Math.min(t,s);const n="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),i=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const s=i,r=[s-t];return r.push(...Array.from({length:t}).map(((e,t)=>s+n+t))),void e.slides.forEach(((t,s)=>{r.includes(t.column)&&ud(e,s)}))}const r=i+n-1;if(e.params.rewind||e.params.loop)for(let n=i-t;n<=r+t;n+=1){const t=(n%s+s)%s;(t<i||t>r)&&ud(e,t)}else for(let n=Math.max(i-t,0);n<=Math.min(r+t,s-1);n+=1)n!==i&&(n>r||n<i)&&ud(e,n)};var dd={updateSize:function(){const e=this;let t,s;const n=e.el;t=void 0!==e.params.width&&null!==e.params.width?e.params.width:n.clientWidth,s=void 0!==e.params.height&&null!==e.params.height?e.params.height:n.clientHeight,0===t&&e.isHorizontal()||0===s&&e.isVertical()||(t=t-parseInt(Jc(n,"padding-left")||0,10)-parseInt(Jc(n,"padding-right")||0,10),s=s-parseInt(Jc(n,"padding-top")||0,10)-parseInt(Jc(n,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(s)&&(s=0),Object.assign(e,{width:t,height:s,size:e.isHorizontal()?t:s}))},updateSlides:function(){const e=this;function t(t,s){return parseFloat(t.getPropertyValue(e.getDirectionLabel(s))||0)}const s=e.params,{wrapperEl:n,slidesEl:i,size:r,rtlTranslate:o,wrongRTL:a}=e,l=e.virtual&&s.virtual.enabled,h=l?e.virtual.slides.length:e.slides.length,u=Gc(i,`.${e.params.slideClass}, swiper-slide`),c=l?e.virtual.slides.length:u.length;let d=[];const p=[],f=[];let g=s.slidesOffsetBefore;"function"==typeof g&&(g=s.slidesOffsetBefore.call(e));let m=s.slidesOffsetAfter;"function"==typeof m&&(m=s.slidesOffsetAfter.call(e));const _=e.snapGrid.length,v=e.slidesGrid.length;let y=s.spaceBetween,w=-g,b=0,k=0;if(void 0===r)return;"string"==typeof y&&y.indexOf("%")>=0?y=parseFloat(y.replace("%",""))/100*r:"string"==typeof y&&(y=parseFloat(y)),e.virtualSize=-y,u.forEach((e=>{o?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""})),s.centeredSlides&&s.cssMode&&(Hc(n,"--swiper-centered-offset-before",""),Hc(n,"--swiper-centered-offset-after",""));const C=s.grid&&s.grid.rows>1&&e.grid;let T;C?e.grid.initSlides(u):e.grid&&e.grid.unsetSlides();const S="auto"===s.slidesPerView&&s.breakpoints&&Object.keys(s.breakpoints).filter((e=>void 0!==s.breakpoints[e].slidesPerView)).length>0;for(let n=0;n<c;n+=1){let i;if(T=0,u[n]&&(i=u[n]),C&&e.grid.updateSlide(n,i,u),!u[n]||"none"!==Jc(i,"display")){if("auto"===s.slidesPerView){S&&(u[n].style[e.getDirectionLabel("width")]="");const r=getComputedStyle(i),o=i.style.transform,a=i.style.webkitTransform;if(o&&(i.style.transform="none"),a&&(i.style.webkitTransform="none"),s.roundLengths)T=e.isHorizontal()?Qc(i,"width",!0):Qc(i,"height",!0);else{const e=t(r,"width"),s=t(r,"padding-left"),n=t(r,"padding-right"),o=t(r,"margin-left"),a=t(r,"margin-right"),l=r.getPropertyValue("box-sizing");if(l&&"border-box"===l)T=e+o+a;else{const{clientWidth:t,offsetWidth:r}=i;T=e+s+n+o+a+(r-t)}}o&&(i.style.transform=o),a&&(i.style.webkitTransform=a),s.roundLengths&&(T=Math.floor(T))}else T=(r-(s.slidesPerView-1)*y)/s.slidesPerView,s.roundLengths&&(T=Math.floor(T)),u[n]&&(u[n].style[e.getDirectionLabel("width")]=`${T}px`);u[n]&&(u[n].swiperSlideSize=T),f.push(T),s.centeredSlides?(w=w+T/2+b/2+y,0===b&&0!==n&&(w=w-r/2-y),0===n&&(w=w-r/2-y),Math.abs(w)<.001&&(w=0),s.roundLengths&&(w=Math.floor(w)),k%s.slidesPerGroup==0&&d.push(w),p.push(w)):(s.roundLengths&&(w=Math.floor(w)),(k-Math.min(e.params.slidesPerGroupSkip,k))%e.params.slidesPerGroup==0&&d.push(w),p.push(w),w=w+T+y),e.virtualSize+=T+y,b=T,k+=1}}if(e.virtualSize=Math.max(e.virtualSize,r)+m,o&&a&&("slide"===s.effect||"coverflow"===s.effect)&&(n.style.width=`${e.virtualSize+y}px`),s.setWrapperSize&&(n.style[e.getDirectionLabel("width")]=`${e.virtualSize+y}px`),C&&e.grid.updateWrapperSize(T,d),!s.centeredSlides){const t=[];for(let n=0;n<d.length;n+=1){let i=d[n];s.roundLengths&&(i=Math.floor(i)),d[n]<=e.virtualSize-r&&t.push(i)}d=t,Math.floor(e.virtualSize-r)-Math.floor(d[d.length-1])>1&&d.push(e.virtualSize-r)}if(l&&s.loop){const t=f[0]+y;if(s.slidesPerGroup>1){const n=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/s.slidesPerGroup),i=t*s.slidesPerGroup;for(let e=0;e<n;e+=1)d.push(d[d.length-1]+i)}for(let n=0;n<e.virtual.slidesBefore+e.virtual.slidesAfter;n+=1)1===s.slidesPerGroup&&d.push(d[d.length-1]+t),p.push(p[p.length-1]+t),e.virtualSize+=t}if(0===d.length&&(d=[0]),0!==y){const t=e.isHorizontal()&&o?"marginLeft":e.getDirectionLabel("marginRight");u.filter(((e,t)=>!(s.cssMode&&!s.loop)||t!==u.length-1)).forEach((e=>{e.style[t]=`${y}px`}))}if(s.centeredSlides&&s.centeredSlidesBounds){let e=0;f.forEach((t=>{e+=t+(y||0)})),e-=y;const t=e>r?e-r:0;d=d.map((e=>e<=0?-g:e>t?t+m:e))}if(s.centerInsufficientSlides){let e=0;f.forEach((t=>{e+=t+(y||0)})),e-=y;const t=(s.slidesOffsetBefore||0)+(s.slidesOffsetAfter||0);if(e+t<r){const s=(r-e-t)/2;d.forEach(((e,t)=>{d[t]=e-s})),p.forEach(((e,t)=>{p[t]=e+s}))}}if(Object.assign(e,{slides:u,snapGrid:d,slidesGrid:p,slidesSizesGrid:f}),s.centeredSlides&&s.cssMode&&!s.centeredSlidesBounds){Hc(n,"--swiper-centered-offset-before",-d[0]+"px"),Hc(n,"--swiper-centered-offset-after",e.size/2-f[f.length-1]/2+"px");const t=-e.snapGrid[0],s=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+s))}if(c!==h&&e.emit("slidesLengthChange"),d.length!==_&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==v&&e.emit("slidesGridLengthChange"),s.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!(l||s.cssMode||"slide"!==s.effect&&"fade"!==s.effect)){const t=`${s.containerModifierClass}backface-hidden`,n=e.el.classList.contains(t);c<=s.maxBackfaceHiddenSlides?n||e.el.classList.add(t):n&&e.el.classList.remove(t)}},updateAutoHeight:function(e){const t=this,s=[],n=t.virtual&&t.params.virtual.enabled;let i,r=0;"number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const o=e=>n?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach((e=>{s.push(e)}));else for(i=0;i<Math.ceil(t.params.slidesPerView);i+=1){const e=t.activeIndex+i;if(e>t.slides.length&&!n)break;s.push(o(e))}else s.push(o(t.activeIndex));for(i=0;i<s.length;i+=1)if(void 0!==s[i]){const e=s[i].offsetHeight;r=e>r?e:r}(r||0===r)&&(t.wrapperEl.style.height=`${r}px`)},updateSlidesOffset:function(){const e=this,t=e.slides,s=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let n=0;n<t.length;n+=1)t[n].swiperSlideOffset=(e.isHorizontal()?t[n].offsetLeft:t[n].offsetTop)-s-e.cssOverflowAdjustment()},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,s=t.params,{slides:n,rtlTranslate:i,snapGrid:r}=t;if(0===n.length)return;void 0===n[0].swiperSlideOffset&&t.updateSlidesOffset();let o=-e;i&&(o=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let a=s.spaceBetween;"string"==typeof a&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*t.size:"string"==typeof a&&(a=parseFloat(a));for(let e=0;e<n.length;e+=1){const l=n[e];let h=l.swiperSlideOffset;s.cssMode&&s.centeredSlides&&(h-=n[0].swiperSlideOffset);const u=(o+(s.centeredSlides?t.minTranslate():0)-h)/(l.swiperSlideSize+a),c=(o-r[0]+(s.centeredSlides?t.minTranslate():0)-h)/(l.swiperSlideSize+a),d=-(o-h),p=d+t.slidesSizesGrid[e],f=d>=0&&d<=t.size-t.slidesSizesGrid[e],g=d>=0&&d<t.size-1||p>1&&p<=t.size||d<=0&&p>=t.size;g&&(t.visibleSlides.push(l),t.visibleSlidesIndexes.push(e)),ad(l,g,s.slideVisibleClass),ad(l,f,s.slideFullyVisibleClass),l.progress=i?-u:u,l.originalProgress=i?-c:c}},updateProgress:function(e){const t=this;if(void 0===e){const s=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*s||0}const s=t.params,n=t.maxTranslate()-t.minTranslate();let{progress:i,isBeginning:r,isEnd:o,progressLoop:a}=t;const l=r,h=o;if(0===n)i=0,r=!0,o=!0;else{i=(e-t.minTranslate())/n;const s=Math.abs(e-t.minTranslate())<1,a=Math.abs(e-t.maxTranslate())<1;r=s||i<=0,o=a||i>=1,s&&(i=0),a&&(i=1)}if(s.loop){const s=t.getSlideIndexByData(0),n=t.getSlideIndexByData(t.slides.length-1),i=t.slidesGrid[s],r=t.slidesGrid[n],o=t.slidesGrid[t.slidesGrid.length-1],l=Math.abs(e);a=l>=i?(l-i)/o:(l+o-r)/o,a>1&&(a-=1)}Object.assign(t,{progress:i,progressLoop:a,isBeginning:r,isEnd:o}),(s.watchSlidesProgress||s.centeredSlides&&s.autoHeight)&&t.updateSlidesProgress(e),r&&!l&&t.emit("reachBeginning toEdge"),o&&!h&&t.emit("reachEnd toEdge"),(l&&!r||h&&!o)&&t.emit("fromEdge"),t.emit("progress",i)},updateSlidesClasses:function(){const e=this,{slides:t,params:s,slidesEl:n,activeIndex:i}=e,r=e.virtual&&s.virtual.enabled,o=e.grid&&s.grid&&s.grid.rows>1,a=e=>Gc(n,`.${s.slideClass}${e}, swiper-slide${e}`)[0];let l,h,u;if(r)if(s.loop){let t=i-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),l=a(`[data-swiper-slide-index="${t}"]`)}else l=a(`[data-swiper-slide-index="${i}"]`);else o?(l=t.find((e=>e.column===i)),u=t.find((e=>e.column===i+1)),h=t.find((e=>e.column===i-1))):l=t[i];l&&(o||(u=function(e,t){const s=[];for(;e.nextElementSibling;){const n=e.nextElementSibling;t?n.matches(t)&&s.push(n):s.push(n),e=n}return s}(l,`.${s.slideClass}, swiper-slide`)[0],s.loop&&!u&&(u=t[0]),h=function(e,t){const s=[];for(;e.previousElementSibling;){const n=e.previousElementSibling;t?n.matches(t)&&s.push(n):s.push(n),e=n}return s}(l,`.${s.slideClass}, swiper-slide`)[0],s.loop&&0===!h&&(h=t[t.length-1]))),t.forEach((e=>{ld(e,e===l,s.slideActiveClass),ld(e,e===u,s.slideNextClass),ld(e,e===h,s.slidePrevClass)})),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,s=t.rtlTranslate?t.translate:-t.translate,{snapGrid:n,params:i,activeIndex:r,realIndex:o,snapIndex:a}=t;let l,h=e;const u=e=>{let s=e-t.virtual.slidesBefore;return s<0&&(s=t.virtual.slides.length+s),s>=t.virtual.slides.length&&(s-=t.virtual.slides.length),s};if(void 0===h&&(h=function(e){const{slidesGrid:t,params:s}=e,n=e.rtlTranslate?e.translate:-e.translate;let i;for(let e=0;e<t.length;e+=1)void 0!==t[e+1]?n>=t[e]&&n<t[e+1]-(t[e+1]-t[e])/2?i=e:n>=t[e]&&n<t[e+1]&&(i=e+1):n>=t[e]&&(i=e);return s.normalizeSlideIndex&&(i<0||void 0===i)&&(i=0),i}(t)),n.indexOf(s)>=0)l=n.indexOf(s);else{const e=Math.min(i.slidesPerGroupSkip,h);l=e+Math.floor((h-e)/i.slidesPerGroup)}if(l>=n.length&&(l=n.length-1),h===r&&!t.params.loop)return void(l!==a&&(t.snapIndex=l,t.emit("snapIndexChange")));if(h===r&&t.params.loop&&t.virtual&&t.params.virtual.enabled)return void(t.realIndex=u(h));const c=t.grid&&i.grid&&i.grid.rows>1;let d;if(t.virtual&&i.virtual.enabled&&i.loop)d=u(h);else if(c){const e=t.slides.find((e=>e.column===h));let s=parseInt(e.getAttribute("data-swiper-slide-index"),10);Number.isNaN(s)&&(s=Math.max(t.slides.indexOf(e),0)),d=Math.floor(s/i.grid.rows)}else if(t.slides[h]){const e=t.slides[h].getAttribute("data-swiper-slide-index");d=e?parseInt(e,10):h}else d=h;Object.assign(t,{previousSnapIndex:a,snapIndex:l,previousRealIndex:o,realIndex:d,previousIndex:r,activeIndex:h}),t.initialized&&cd(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(o!==d&&t.emit("realIndexChange"),t.emit("slideChange"))},updateClickedSlide:function(e,t){const s=this,n=s.params;let i=e.closest(`.${n.slideClass}, swiper-slide`);!i&&s.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach((e=>{!i&&e.matches&&e.matches(`.${n.slideClass}, swiper-slide`)&&(i=e)}));let r,o=!1;if(i)for(let e=0;e<s.slides.length;e+=1)if(s.slides[e]===i){o=!0,r=e;break}if(!i||!o)return s.clickedSlide=void 0,void(s.clickedIndex=void 0);s.clickedSlide=i,s.virtual&&s.params.virtual.enabled?s.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):s.clickedIndex=r,n.slideToClickedSlide&&void 0!==s.clickedIndex&&s.clickedIndex!==s.activeIndex&&s.slideToClickedSlide()}};function pd(e){let{swiper:t,runCallbacks:s,direction:n,step:i}=e;const{activeIndex:r,previousIndex:o}=t;let a=n;if(a||(a=r>o?"next":r<o?"prev":"reset"),t.emit(`transition${i}`),s&&r!==o){if("reset"===a)return void t.emit(`slideResetTransition${i}`);t.emit(`slideChangeTransition${i}`),"next"===a?t.emit(`slideNextTransition${i}`):t.emit(`slidePrevTransition${i}`)}}var fd={slideTo:function(e,t,s,n,i){void 0===e&&(e=0),void 0===s&&(s=!0),"string"==typeof e&&(e=parseInt(e,10));const r=this;let o=e;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:h,previousIndex:u,activeIndex:c,rtlTranslate:d,wrapperEl:p,enabled:f}=r;if(!f&&!n&&!i||r.destroyed||r.animating&&a.preventInteractionOnTransition)return!1;void 0===t&&(t=r.params.speed);const g=Math.min(r.params.slidesPerGroupSkip,o);let m=g+Math.floor((o-g)/r.params.slidesPerGroup);m>=l.length&&(m=l.length-1);const _=-l[m];if(a.normalizeSlideIndex)for(let e=0;e<h.length;e+=1){const t=-Math.floor(100*_),s=Math.floor(100*h[e]),n=Math.floor(100*h[e+1]);void 0!==h[e+1]?t>=s&&t<n-(n-s)/2?o=e:t>=s&&t<n&&(o=e+1):t>=s&&(o=e)}if(r.initialized&&o!==c){if(!r.allowSlideNext&&(d?_>r.translate&&_>r.minTranslate():_<r.translate&&_<r.minTranslate()))return!1;if(!r.allowSlidePrev&&_>r.translate&&_>r.maxTranslate()&&(c||0)!==o)return!1}let v;o!==(u||0)&&s&&r.emit("beforeSlideChangeStart"),r.updateProgress(_),v=o>c?"next":o<c?"prev":"reset";const y=r.virtual&&r.params.virtual.enabled;if((!y||!i)&&(d&&-_===r.translate||!d&&_===r.translate))return r.updateActiveIndex(o),a.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),"slide"!==a.effect&&r.setTranslate(_),"reset"!==v&&(r.transitionStart(s,v),r.transitionEnd(s,v)),!1;if(a.cssMode){const e=r.isHorizontal(),s=d?_:-_;if(0===t)y&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),y&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame((()=>{p[e?"scrollLeft":"scrollTop"]=s}))):p[e?"scrollLeft":"scrollTop"]=s,y&&requestAnimationFrame((()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1}));else{if(!r.support.smoothScroll)return Wc({swiper:r,targetPosition:s,side:e?"left":"top"}),!0;p.scrollTo({[e?"left":"top"]:s,behavior:"smooth"})}return!0}const w=rd().isSafari;return y&&!i&&w&&r.isElement&&r.virtual.update(!1,!1,o),r.setTransition(t),r.setTranslate(_),r.updateActiveIndex(o),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,n),r.transitionStart(s,v),0===t?r.transitionEnd(s,v):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(e){r&&!r.destroyed&&e.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(s,v))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,s,n){void 0===e&&(e=0),void 0===s&&(s=!0),"string"==typeof e&&(e=parseInt(e,10));const i=this;if(i.destroyed)return;void 0===t&&(t=i.params.speed);const r=i.grid&&i.params.grid&&i.params.grid.rows>1;let o=e;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)o+=i.virtual.slidesBefore;else{let e;if(r){const t=o*i.params.grid.rows;e=i.slides.find((e=>1*e.getAttribute("data-swiper-slide-index")===t)).column}else e=i.getSlideIndexByData(o);const t=r?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:s}=i.params;let a=i.params.slidesPerView;"auto"===a?a=i.slidesPerViewDynamic():(a=Math.ceil(parseFloat(i.params.slidesPerView,10)),s&&a%2==0&&(a+=1));let l=t-e<a;if(s&&(l=l||e<Math.ceil(a/2)),n&&s&&"auto"!==i.params.slidesPerView&&!r&&(l=!1),l){const n=s?e<i.activeIndex?"prev":"next":e-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:n,slideTo:!0,activeSlideIndex:"next"===n?e+1:e-t+1,slideRealIndex:"next"===n?i.realIndex:void 0})}if(r){const e=o*i.params.grid.rows;o=i.slides.find((t=>1*t.getAttribute("data-swiper-slide-index")===e)).column}else o=i.getSlideIndexByData(o)}return requestAnimationFrame((()=>{i.slideTo(o,t,s,n)})),i},slideNext:function(e,t,s){void 0===t&&(t=!0);const n=this,{enabled:i,params:r,animating:o}=n;if(!i||n.destroyed)return n;void 0===e&&(e=n.params.speed);let a=r.slidesPerGroup;"auto"===r.slidesPerView&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(a=Math.max(n.slidesPerViewDynamic("current",!0),1));const l=n.activeIndex<r.slidesPerGroupSkip?1:a,h=n.virtual&&r.virtual.enabled;if(r.loop){if(o&&!h&&r.loopPreventsSliding)return!1;if(n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft,n.activeIndex===n.slides.length-1&&r.cssMode)return requestAnimationFrame((()=>{n.slideTo(n.activeIndex+l,e,t,s)})),!0}return r.rewind&&n.isEnd?n.slideTo(0,e,t,s):n.slideTo(n.activeIndex+l,e,t,s)},slidePrev:function(e,t,s){void 0===t&&(t=!0);const n=this,{params:i,snapGrid:r,slidesGrid:o,rtlTranslate:a,enabled:l,animating:h}=n;if(!l||n.destroyed)return n;void 0===e&&(e=n.params.speed);const u=n.virtual&&i.virtual.enabled;if(i.loop){if(h&&!u&&i.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}function c(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const d=c(a?n.translate:-n.translate),p=r.map((e=>c(e))),f=i.freeMode&&i.freeMode.enabled;let g=r[p.indexOf(d)-1];if(void 0===g&&(i.cssMode||f)){let e;r.forEach(((t,s)=>{d>=t&&(e=s)})),void 0!==e&&(g=f?r[e]:r[e>0?e-1:e])}let m=0;if(void 0!==g&&(m=o.indexOf(g),m<0&&(m=n.activeIndex-1),"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(m=m-n.slidesPerViewDynamic("previous",!0)+1,m=Math.max(m,0))),i.rewind&&n.isBeginning){const i=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(i,e,t,s)}return i.loop&&0===n.activeIndex&&i.cssMode?(requestAnimationFrame((()=>{n.slideTo(m,e,t,s)})),!0):n.slideTo(m,e,t,s)},slideReset:function(e,t,s){void 0===t&&(t=!0);const n=this;if(!n.destroyed)return void 0===e&&(e=n.params.speed),n.slideTo(n.activeIndex,e,t,s)},slideToClosest:function(e,t,s,n){void 0===t&&(t=!0),void 0===n&&(n=.5);const i=this;if(i.destroyed)return;void 0===e&&(e=i.params.speed);let r=i.activeIndex;const o=Math.min(i.params.slidesPerGroupSkip,r),a=o+Math.floor((r-o)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[a]){const e=i.snapGrid[a];l-e>(i.snapGrid[a+1]-e)*n&&(r+=i.params.slidesPerGroup)}else{const e=i.snapGrid[a-1];l-e<=(i.snapGrid[a]-e)*n&&(r-=i.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,i.slidesGrid.length-1),i.slideTo(r,e,t,s)},slideToClickedSlide:function(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:s}=e,n="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let i,r=e.clickedIndex;const o=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;i=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?r<e.loopedSlides-n/2||r>e.slides.length-e.loopedSlides+n/2?(e.loopFix(),r=e.getSlideIndex(Gc(s,`${o}[data-swiper-slide-index="${i}"]`)[0]),Vc((()=>{e.slideTo(r)}))):e.slideTo(r):r>e.slides.length-n?(e.loopFix(),r=e.getSlideIndex(Gc(s,`${o}[data-swiper-slide-index="${i}"]`)[0]),Vc((()=>{e.slideTo(r)}))):e.slideTo(r)}else e.slideTo(r)}},gd={loopCreate:function(e){const t=this,{params:s,slidesEl:n}=t;if(!s.loop||t.virtual&&t.params.virtual.enabled)return;const i=()=>{Gc(n,`.${s.slideClass}, swiper-slide`).forEach(((e,t)=>{e.setAttribute("data-swiper-slide-index",t)}))},r=t.grid&&s.grid&&s.grid.rows>1,o=s.slidesPerGroup*(r?s.grid.rows:1),a=t.slides.length%o!=0,l=r&&t.slides.length%s.grid.rows!=0,h=e=>{for(let n=0;n<e;n+=1){const e=t.isElement?Kc("swiper-slide",[s.slideBlankClass]):Kc("div",[s.slideClass,s.slideBlankClass]);t.slidesEl.append(e)}};a?(s.loopAddBlankSlides?(h(o-t.slides.length%o),t.recalcSlides(),t.updateSlides()):Yc("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)"),i()):l?(s.loopAddBlankSlides?(h(s.grid.rows-t.slides.length%s.grid.rows),t.recalcSlides(),t.updateSlides()):Yc("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)"),i()):i(),t.loopFix({slideRealIndex:e,direction:s.centeredSlides?void 0:"next"})},loopFix:function(e){let{slideRealIndex:t,slideTo:s=!0,direction:n,setTranslate:i,activeSlideIndex:r,byController:o,byMousewheel:a}=void 0===e?{}:e;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:h,allowSlidePrev:u,allowSlideNext:c,slidesEl:d,params:p}=l,{centeredSlides:f}=p;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&p.virtual.enabled)return s&&(p.centeredSlides||0!==l.snapIndex?p.centeredSlides&&l.snapIndex<p.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0):l.slideTo(l.virtual.slides.length,0,!1,!0)),l.allowSlidePrev=u,l.allowSlideNext=c,void l.emit("loopFix");let g=p.slidesPerView;"auto"===g?g=l.slidesPerViewDynamic():(g=Math.ceil(parseFloat(p.slidesPerView,10)),f&&g%2==0&&(g+=1));const m=p.slidesPerGroupAuto?g:p.slidesPerGroup;let _=m;_%m!=0&&(_+=m-_%m),_+=p.loopAdditionalSlides,l.loopedSlides=_;const v=l.grid&&p.grid&&p.grid.rows>1;h.length<g+_?Yc("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):v&&"row"===p.grid.fill&&Yc("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const y=[],w=[];let b=l.activeIndex;void 0===r?r=l.getSlideIndex(h.find((e=>e.classList.contains(p.slideActiveClass)))):b=r;const k="next"===n||!n,C="prev"===n||!n;let T=0,S=0;const E=v?Math.ceil(h.length/p.grid.rows):h.length,x=(v?h[r].column:r)+(f&&void 0===i?-g/2+.5:0);if(x<_){T=Math.max(_-x,m);for(let e=0;e<_-x;e+=1){const t=e-Math.floor(e/E)*E;if(v){const e=E-t-1;for(let t=h.length-1;t>=0;t-=1)h[t].column===e&&y.push(t)}else y.push(E-t-1)}}else if(x+g>E-_){S=Math.max(x-(E-2*_),m);for(let e=0;e<S;e+=1){const t=e-Math.floor(e/E)*E;v?h.forEach(((e,s)=>{e.column===t&&w.push(s)})):w.push(t)}}if(l.__preventObserver__=!0,requestAnimationFrame((()=>{l.__preventObserver__=!1})),C&&y.forEach((e=>{h[e].swiperLoopMoveDOM=!0,d.prepend(h[e]),h[e].swiperLoopMoveDOM=!1})),k&&w.forEach((e=>{h[e].swiperLoopMoveDOM=!0,d.append(h[e]),h[e].swiperLoopMoveDOM=!1})),l.recalcSlides(),"auto"===p.slidesPerView?l.updateSlides():v&&(y.length>0&&C||w.length>0&&k)&&l.slides.forEach(((e,t)=>{l.grid.updateSlide(t,e,l.slides)})),p.watchSlidesProgress&&l.updateSlidesOffset(),s)if(y.length>0&&C){if(void 0===t){const e=l.slidesGrid[b],t=l.slidesGrid[b+T]-e;a?l.setTranslate(l.translate-t):(l.slideTo(b+Math.ceil(T),0,!1,!0),i&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-t,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-t))}else if(i){const e=v?y.length/p.grid.rows:y.length;l.slideTo(l.activeIndex+e,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(w.length>0&&k)if(void 0===t){const e=l.slidesGrid[b],t=l.slidesGrid[b-S]-e;a?l.setTranslate(l.translate-t):(l.slideTo(b-S,0,!1,!0),i&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-t,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-t))}else{const e=v?w.length/p.grid.rows:w.length;l.slideTo(l.activeIndex-e,0,!1,!0)}if(l.allowSlidePrev=u,l.allowSlideNext=c,l.controller&&l.controller.control&&!o){const e={slideRealIndex:t,direction:n,setTranslate:i,activeSlideIndex:r,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach((t=>{!t.destroyed&&t.params.loop&&t.loopFix({...e,slideTo:t.params.slidesPerView===p.slidesPerView&&s})})):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...e,slideTo:l.controller.control.params.slidesPerView===p.slidesPerView&&s})}l.emit("loopFix")},loopDestroy:function(){const e=this,{params:t,slidesEl:s}=e;if(!t.loop||!s||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const n=[];e.slides.forEach((e=>{const t=void 0===e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;n[t]=e})),e.slides.forEach((e=>{e.removeAttribute("data-swiper-slide-index")})),n.forEach((e=>{s.append(e)})),e.recalcSlides(),e.slideTo(e.realIndex,0)}};function md(e,t,s){const n=$c(),{params:i}=e,r=i.edgeSwipeDetection,o=i.edgeSwipeThreshold;return!r||!(s<=o||s>=n.innerWidth-o)||"prevent"===r&&(t.preventDefault(),!0)}function _d(e){const t=this,s=Bc();let n=e;n.originalEvent&&(n=n.originalEvent);const i=t.touchEventsData;if("pointerdown"===n.type){if(null!==i.pointerId&&i.pointerId!==n.pointerId)return;i.pointerId=n.pointerId}else"touchstart"===n.type&&1===n.targetTouches.length&&(i.touchId=n.targetTouches[0].identifier);if("touchstart"===n.type)return void md(t,n,n.targetTouches[0].pageX);const{params:r,touches:o,enabled:a}=t;if(!a)return;if(!r.simulateTouch&&"mouse"===n.pointerType)return;if(t.animating&&r.preventInteractionOnTransition)return;!t.animating&&r.cssMode&&r.loop&&t.loopFix();let l=n.target;if("wrapper"===r.touchEventsTarget&&!function(e,t){const s=$c();let n=t.contains(e);return!n&&s.HTMLSlotElement&&t instanceof HTMLSlotElement&&(n=[...t.assignedElements()].includes(e),n||(n=function(e,t){const s=[t];for(;s.length>0;){const t=s.shift();if(e===t)return!0;s.push(...t.children,...t.shadowRoot?t.shadowRoot.children:[],...t.assignedElements?t.assignedElements():[])}}(e,t))),n}(l,t.wrapperEl))return;if("which"in n&&3===n.which)return;if("button"in n&&n.button>0)return;if(i.isTouched&&i.isMoved)return;const h=!!r.noSwipingClass&&""!==r.noSwipingClass,u=n.composedPath?n.composedPath():n.path;h&&n.target&&n.target.shadowRoot&&u&&(l=u[0]);const c=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,d=!(!n.target||!n.target.shadowRoot);if(r.noSwiping&&(d?function(e,t){return void 0===t&&(t=this),function t(s){if(!s||s===Bc()||s===$c())return null;s.assignedSlot&&(s=s.assignedSlot);const n=s.closest(e);return n||s.getRootNode?n||t(s.getRootNode().host):null}(t)}(c,l):l.closest(c)))return void(t.allowClick=!0);if(r.swipeHandler&&!l.closest(r.swipeHandler))return;o.currentX=n.pageX,o.currentY=n.pageY;const p=o.currentX,f=o.currentY;if(!md(t,n,p))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=f,i.touchStartTime=qc(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,r.threshold>0&&(i.allowThresholdMove=!1);let g=!0;l.matches(i.focusableElements)&&(g=!1,"SELECT"===l.nodeName&&(i.isTouched=!1)),s.activeElement&&s.activeElement.matches(i.focusableElements)&&s.activeElement!==l&&("mouse"===n.pointerType||"mouse"!==n.pointerType&&!l.matches(i.focusableElements))&&s.activeElement.blur();const m=g&&t.allowTouchMove&&r.touchStartPreventDefault;!r.touchStartForcePreventDefault&&!m||l.isContentEditable||n.preventDefault(),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.animating&&!r.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",n)}function vd(e){const t=Bc(),s=this,n=s.touchEventsData,{params:i,touches:r,rtlTranslate:o,enabled:a}=s;if(!a)return;if(!i.simulateTouch&&"mouse"===e.pointerType)return;let l,h=e;if(h.originalEvent&&(h=h.originalEvent),"pointermove"===h.type){if(null!==n.touchId)return;if(h.pointerId!==n.pointerId)return}if("touchmove"===h.type){if(l=[...h.changedTouches].find((e=>e.identifier===n.touchId)),!l||l.identifier!==n.touchId)return}else l=h;if(!n.isTouched)return void(n.startMoving&&n.isScrolling&&s.emit("touchMoveOpposite",h));const u=l.pageX,c=l.pageY;if(h.preventedByNestedSwiper)return r.startX=u,void(r.startY=c);if(!s.allowTouchMove)return h.target.matches(n.focusableElements)||(s.allowClick=!1),void(n.isTouched&&(Object.assign(r,{startX:u,startY:c,currentX:u,currentY:c}),n.touchStartTime=qc()));if(i.touchReleaseOnEdges&&!i.loop)if(s.isVertical()){if(c<r.startY&&s.translate<=s.maxTranslate()||c>r.startY&&s.translate>=s.minTranslate())return n.isTouched=!1,void(n.isMoved=!1)}else if(u<r.startX&&s.translate<=s.maxTranslate()||u>r.startX&&s.translate>=s.minTranslate())return;if(t.activeElement&&t.activeElement.matches(n.focusableElements)&&t.activeElement!==h.target&&"mouse"!==h.pointerType&&t.activeElement.blur(),t.activeElement&&h.target===t.activeElement&&h.target.matches(n.focusableElements))return n.isMoved=!0,void(s.allowClick=!1);n.allowTouchCallbacks&&s.emit("touchMove",h),r.previousX=r.currentX,r.previousY=r.currentY,r.currentX=u,r.currentY=c;const d=r.currentX-r.startX,p=r.currentY-r.startY;if(s.params.threshold&&Math.sqrt(d**2+p**2)<s.params.threshold)return;if(void 0===n.isScrolling){let e;s.isHorizontal()&&r.currentY===r.startY||s.isVertical()&&r.currentX===r.startX?n.isScrolling=!1:d*d+p*p>=25&&(e=180*Math.atan2(Math.abs(p),Math.abs(d))/Math.PI,n.isScrolling=s.isHorizontal()?e>i.touchAngle:90-e>i.touchAngle)}if(n.isScrolling&&s.emit("touchMoveOpposite",h),void 0===n.startMoving&&(r.currentX===r.startX&&r.currentY===r.startY||(n.startMoving=!0)),n.isScrolling||"touchmove"===h.type&&n.preventTouchMoveFromPointerMove)return void(n.isTouched=!1);if(!n.startMoving)return;s.allowClick=!1,!i.cssMode&&h.cancelable&&h.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&h.stopPropagation();let f=s.isHorizontal()?d:p,g=s.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;i.oneWayMovement&&(f=Math.abs(f)*(o?1:-1),g=Math.abs(g)*(o?1:-1)),r.diff=f,f*=i.touchRatio,o&&(f=-f,g=-g);const m=s.touchesDirection;s.swipeDirection=f>0?"prev":"next",s.touchesDirection=g>0?"prev":"next";const _=s.params.loop&&!i.cssMode,v="next"===s.touchesDirection&&s.allowSlideNext||"prev"===s.touchesDirection&&s.allowSlidePrev;if(!n.isMoved){if(_&&v&&s.loopFix({direction:s.swipeDirection}),n.startTranslate=s.getTranslate(),s.setTransition(0),s.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});s.wrapperEl.dispatchEvent(e)}n.allowMomentumBounce=!1,!i.grabCursor||!0!==s.allowSlideNext&&!0!==s.allowSlidePrev||s.setGrabCursor(!0),s.emit("sliderFirstMove",h)}if((new Date).getTime(),!1!==i._loopSwapReset&&n.isMoved&&n.allowThresholdMove&&m!==s.touchesDirection&&_&&v&&Math.abs(f)>=1)return Object.assign(r,{startX:u,startY:c,currentX:u,currentY:c,startTranslate:n.currentTranslate}),n.loopSwapReset=!0,void(n.startTranslate=n.currentTranslate);s.emit("sliderMove",h),n.isMoved=!0,n.currentTranslate=f+n.startTranslate;let y=!0,w=i.resistanceRatio;if(i.touchReleaseOnEdges&&(w=0),f>0?(_&&v&&n.allowThresholdMove&&n.currentTranslate>(i.centeredSlides?s.minTranslate()-s.slidesSizesGrid[s.activeIndex+1]-("auto"!==i.slidesPerView&&s.slides.length-i.slidesPerView>=2?s.slidesSizesGrid[s.activeIndex+1]+s.params.spaceBetween:0)-s.params.spaceBetween:s.minTranslate())&&s.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>s.minTranslate()&&(y=!1,i.resistance&&(n.currentTranslate=s.minTranslate()-1+(-s.minTranslate()+n.startTranslate+f)**w))):f<0&&(_&&v&&n.allowThresholdMove&&n.currentTranslate<(i.centeredSlides?s.maxTranslate()+s.slidesSizesGrid[s.slidesSizesGrid.length-1]+s.params.spaceBetween+("auto"!==i.slidesPerView&&s.slides.length-i.slidesPerView>=2?s.slidesSizesGrid[s.slidesSizesGrid.length-1]+s.params.spaceBetween:0):s.maxTranslate())&&s.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:s.slides.length-("auto"===i.slidesPerView?s.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),n.currentTranslate<s.maxTranslate()&&(y=!1,i.resistance&&(n.currentTranslate=s.maxTranslate()+1-(s.maxTranslate()-n.startTranslate-f)**w))),y&&(h.preventedByNestedSwiper=!0),!s.allowSlideNext&&"next"===s.swipeDirection&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!s.allowSlidePrev&&"prev"===s.swipeDirection&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),s.allowSlidePrev||s.allowSlideNext||(n.currentTranslate=n.startTranslate),i.threshold>0){if(!(Math.abs(f)>i.threshold||n.allowThresholdMove))return void(n.currentTranslate=n.startTranslate);if(!n.allowThresholdMove)return n.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,n.currentTranslate=n.startTranslate,void(r.diff=s.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY)}i.followFinger&&!i.cssMode&&((i.freeMode&&i.freeMode.enabled&&s.freeMode||i.watchSlidesProgress)&&(s.updateActiveIndex(),s.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&s.freeMode&&s.freeMode.onTouchMove(),s.updateProgress(n.currentTranslate),s.setTranslate(n.currentTranslate))}function yd(e){const t=this,s=t.touchEventsData;let n,i=e;if(i.originalEvent&&(i=i.originalEvent),"touchend"===i.type||"touchcancel"===i.type){if(n=[...i.changedTouches].find((e=>e.identifier===s.touchId)),!n||n.identifier!==s.touchId)return}else{if(null!==s.touchId)return;if(i.pointerId!==s.pointerId)return;n=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&(!["pointercancel","contextmenu"].includes(i.type)||!t.browser.isSafari&&!t.browser.isWebView))return;s.pointerId=null,s.touchId=null;const{params:r,touches:o,rtlTranslate:a,slidesGrid:l,enabled:h}=t;if(!h)return;if(!r.simulateTouch&&"mouse"===i.pointerType)return;if(s.allowTouchCallbacks&&t.emit("touchEnd",i),s.allowTouchCallbacks=!1,!s.isTouched)return s.isMoved&&r.grabCursor&&t.setGrabCursor(!1),s.isMoved=!1,void(s.startMoving=!1);r.grabCursor&&s.isMoved&&s.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const u=qc(),c=u-s.touchStartTime;if(t.allowClick){const e=i.path||i.composedPath&&i.composedPath();t.updateClickedSlide(e&&e[0]||i.target,e),t.emit("tap click",i),c<300&&u-s.lastClickTime<300&&t.emit("doubleTap doubleClick",i)}if(s.lastClickTime=qc(),Vc((()=>{t.destroyed||(t.allowClick=!0)})),!s.isTouched||!s.isMoved||!t.swipeDirection||0===o.diff&&!s.loopSwapReset||s.currentTranslate===s.startTranslate&&!s.loopSwapReset)return s.isTouched=!1,s.isMoved=!1,void(s.startMoving=!1);let d;if(s.isTouched=!1,s.isMoved=!1,s.startMoving=!1,d=r.followFinger?a?t.translate:-t.translate:-s.currentTranslate,r.cssMode)return;if(r.freeMode&&r.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:d});const p=d>=-t.maxTranslate()&&!t.params.loop;let f=0,g=t.slidesSizesGrid[0];for(let e=0;e<l.length;e+=e<r.slidesPerGroupSkip?1:r.slidesPerGroup){const t=e<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;void 0!==l[e+t]?(p||d>=l[e]&&d<l[e+t])&&(f=e,g=l[e+t]-l[e]):(p||d>=l[e])&&(f=e,g=l[l.length-1]-l[l.length-2])}let m=null,_=null;r.rewind&&(t.isBeginning?_=r.virtual&&r.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(m=0));const v=(d-l[f])/g,y=f<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(c>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(v>=r.longSwipesRatio?t.slideTo(r.rewind&&t.isEnd?m:f+y):t.slideTo(f)),"prev"===t.swipeDirection&&(v>1-r.longSwipesRatio?t.slideTo(f+y):null!==_&&v<0&&Math.abs(v)>r.longSwipesRatio?t.slideTo(_):t.slideTo(f))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);!t.navigation||i.target!==t.navigation.nextEl&&i.target!==t.navigation.prevEl?("next"===t.swipeDirection&&t.slideTo(null!==m?m:f+y),"prev"===t.swipeDirection&&t.slideTo(null!==_?_:f)):i.target===t.navigation.nextEl?t.slideTo(f+y):t.slideTo(f)}}function wd(){const e=this,{params:t,el:s}=e;if(s&&0===s.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:i,snapGrid:r}=e,o=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const a=o&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||a?e.params.loop&&!o?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout((()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()}),500)),e.allowSlidePrev=i,e.allowSlideNext=n,e.params.watchOverflow&&r!==e.snapGrid&&e.checkOverflow()}function bd(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function kd(){const e=this,{wrapperEl:t,rtlTranslate:s,enabled:n}=e;if(!n)return;let i;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const r=e.maxTranslate()-e.minTranslate();i=0===r?0:(e.translate-e.minTranslate())/r,i!==e.progress&&e.updateProgress(s?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function Cd(e){const t=this;hd(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}function Td(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const Sd=(e,t)=>{const s=Bc(),{params:n,el:i,wrapperEl:r,device:o}=e,a=!!n.nested,l="on"===t?"addEventListener":"removeEventListener",h=t;i&&"string"!=typeof i&&(s[l]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:a}),i[l]("touchstart",e.onTouchStart,{passive:!1}),i[l]("pointerdown",e.onTouchStart,{passive:!1}),s[l]("touchmove",e.onTouchMove,{passive:!1,capture:a}),s[l]("pointermove",e.onTouchMove,{passive:!1,capture:a}),s[l]("touchend",e.onTouchEnd,{passive:!0}),s[l]("pointerup",e.onTouchEnd,{passive:!0}),s[l]("pointercancel",e.onTouchEnd,{passive:!0}),s[l]("touchcancel",e.onTouchEnd,{passive:!0}),s[l]("pointerout",e.onTouchEnd,{passive:!0}),s[l]("pointerleave",e.onTouchEnd,{passive:!0}),s[l]("contextmenu",e.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&i[l]("click",e.onClick,!0),n.cssMode&&r[l]("scroll",e.onScroll),n.updateOnWindowResize?e[h](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",wd,!0):e[h]("observerUpdate",wd,!0),i[l]("load",e.onLoad,{capture:!0}))},Ed=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var xd={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Id(e,t){return function(s){void 0===s&&(s={});const n=Object.keys(s)[0],i=s[n];"object"==typeof i&&null!==i?(!0===e[n]&&(e[n]={enabled:!0}),"navigation"===n&&e[n]&&e[n].enabled&&!e[n].prevEl&&!e[n].nextEl&&(e[n].auto=!0),["pagination","scrollbar"].indexOf(n)>=0&&e[n]&&e[n].enabled&&!e[n].el&&(e[n].auto=!0),n in e&&"enabled"in i?("object"!=typeof e[n]||"enabled"in e[n]||(e[n].enabled=!0),e[n]||(e[n]={enabled:!1}),Uc(t,s)):Uc(t,s)):Uc(t,s)}}const Pd={eventsEmitter:od,update:dd,translate:{getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:s,translate:n,wrapperEl:i}=this;if(t.virtualTranslate)return s?-n:n;if(t.cssMode)return n;let r=function(e,t){void 0===t&&(t="x");const s=$c();let n,i,r;const o=function(e){const t=$c();let s;return t.getComputedStyle&&(s=t.getComputedStyle(e,null)),!s&&e.currentStyle&&(s=e.currentStyle),s||(s=e.style),s}(e);return s.WebKitCSSMatrix?(i=o.transform||o.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map((e=>e.replace(",","."))).join(", ")),r=new s.WebKitCSSMatrix("none"===i?"":i)):(r=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=r.toString().split(",")),"x"===t&&(i=s.WebKitCSSMatrix?r.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(i=s.WebKitCSSMatrix?r.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),i||0}(i,e);return r+=this.cssOverflowAdjustment(),s&&(r=-r),r||0},setTranslate:function(e,t){const s=this,{rtlTranslate:n,params:i,wrapperEl:r,progress:o}=s;let a,l=0,h=0;s.isHorizontal()?l=n?-e:e:h=e,i.roundLengths&&(l=Math.floor(l),h=Math.floor(h)),s.previousTranslate=s.translate,s.translate=s.isHorizontal()?l:h,i.cssMode?r[s.isHorizontal()?"scrollLeft":"scrollTop"]=s.isHorizontal()?-l:-h:i.virtualTranslate||(s.isHorizontal()?l-=s.cssOverflowAdjustment():h-=s.cssOverflowAdjustment(),r.style.transform=`translate3d(${l}px, ${h}px, 0px)`);const u=s.maxTranslate()-s.minTranslate();a=0===u?0:(e-s.minTranslate())/u,a!==o&&s.updateProgress(e),s.emit("setTranslate",s.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,s,n,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===s&&(s=!0),void 0===n&&(n=!0);const r=this,{params:o,wrapperEl:a}=r;if(r.animating&&o.preventInteractionOnTransition)return!1;const l=r.minTranslate(),h=r.maxTranslate();let u;if(u=n&&e>l?l:n&&e<h?h:e,r.updateProgress(u),o.cssMode){const e=r.isHorizontal();if(0===t)a[e?"scrollLeft":"scrollTop"]=-u;else{if(!r.support.smoothScroll)return Wc({swiper:r,targetPosition:-u,side:e?"left":"top"}),!0;a.scrollTo({[e?"left":"top"]:-u,behavior:"smooth"})}return!0}return 0===t?(r.setTransition(0),r.setTranslate(u),s&&(r.emit("beforeTransitionStart",t,i),r.emit("transitionEnd"))):(r.setTransition(t),r.setTranslate(u),s&&(r.emit("beforeTransitionStart",t,i),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(e){r&&!r.destroyed&&e.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,r.animating=!1,s&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){const s=this;s.params.cssMode||(s.wrapperEl.style.transitionDuration=`${e}ms`,s.wrapperEl.style.transitionDelay=0===e?"0ms":""),s.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const s=this,{params:n}=s;n.cssMode||(n.autoHeight&&s.updateAutoHeight(),pd({swiper:s,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const s=this,{params:n}=s;s.animating=!1,n.cssMode||(s.setTransition(0),pd({swiper:s,runCallbacks:e,direction:t,step:"End"}))}},slide:fd,loop:gd,grabCursor:{setGrabCursor:function(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const s="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),s.style.cursor="move",s.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame((()=>{t.__preventObserver__=!1}))},unsetGrabCursor:function(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame((()=>{e.__preventObserver__=!1})))}},events:{attachEvents:function(){const e=this,{params:t}=e;e.onTouchStart=_d.bind(e),e.onTouchMove=vd.bind(e),e.onTouchEnd=yd.bind(e),e.onDocumentTouchStart=Td.bind(e),t.cssMode&&(e.onScroll=kd.bind(e)),e.onClick=bd.bind(e),e.onLoad=Cd.bind(e),Sd(e,"on")},detachEvents:function(){Sd(this,"off")}},breakpoints:{setBreakpoint:function(){const e=this,{realIndex:t,initialized:s,params:n,el:i}=e,r=n.breakpoints;if(!r||r&&0===Object.keys(r).length)return;const o=Bc(),a="window"!==n.breakpointsBase&&n.breakpointsBase?"container":n.breakpointsBase,l=["window","container"].includes(n.breakpointsBase)||!n.breakpointsBase?e.el:o.querySelector(n.breakpointsBase),h=e.getBreakpoint(r,a,l);if(!h||e.currentBreakpoint===h)return;const u=(h in r?r[h]:void 0)||e.originalParams,c=Ed(e,n),d=Ed(e,u),p=e.params.grabCursor,f=u.grabCursor,g=n.enabled;c&&!d?(i.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),e.emitContainerClasses()):!c&&d&&(i.classList.add(`${n.containerModifierClass}grid`),(u.grid.fill&&"column"===u.grid.fill||!u.grid.fill&&"column"===n.grid.fill)&&i.classList.add(`${n.containerModifierClass}grid-column`),e.emitContainerClasses()),p&&!f?e.unsetGrabCursor():!p&&f&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach((t=>{if(void 0===u[t])return;const s=n[t]&&n[t].enabled,i=u[t]&&u[t].enabled;s&&!i&&e[t].disable(),!s&&i&&e[t].enable()}));const m=u.direction&&u.direction!==n.direction,_=n.loop&&(u.slidesPerView!==n.slidesPerView||m),v=n.loop;m&&s&&e.changeDirection(),Uc(e.params,u);const y=e.params.enabled,w=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),g&&!y?e.disable():!g&&y&&e.enable(),e.currentBreakpoint=h,e.emit("_beforeBreakpoint",u),s&&(_?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!v&&w?(e.loopCreate(t),e.updateSlides()):v&&!w&&e.loopDestroy()),e.emit("breakpoint",u)},getBreakpoint:function(e,t,s){if(void 0===t&&(t="window"),!e||"container"===t&&!s)return;let n=!1;const i=$c(),r="window"===t?i.innerHeight:s.clientHeight,o=Object.keys(e).map((e=>{if("string"==typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:r*t,point:e}}return{value:e,point:e}}));o.sort(((e,t)=>parseInt(e.value,10)-parseInt(t.value,10)));for(let e=0;e<o.length;e+=1){const{point:r,value:a}=o[e];"window"===t?i.matchMedia(`(min-width: ${a}px)`).matches&&(n=r):a<=s.clientWidth&&(n=r)}return n||"max"}},checkOverflow:{checkOverflow:function(){const e=this,{isLocked:t,params:s}=e,{slidesOffsetBefore:n}=s;if(n){const t=e.slides.length-1,s=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*n;e.isLocked=e.size>s}else e.isLocked=1===e.snapGrid.length;!0===s.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===s.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:{addClasses:function(){const e=this,{classNames:t,params:s,rtl:n,el:i,device:r}=e,o=function(e,t){const s=[];return e.forEach((e=>{"object"==typeof e?Object.keys(e).forEach((n=>{e[n]&&s.push(t+n)})):"string"==typeof e&&s.push(t+e)})),s}(["initialized",s.direction,{"free-mode":e.params.freeMode&&s.freeMode.enabled},{autoheight:s.autoHeight},{rtl:n},{grid:s.grid&&s.grid.rows>1},{"grid-column":s.grid&&s.grid.rows>1&&"column"===s.grid.fill},{android:r.android},{ios:r.ios},{"css-mode":s.cssMode},{centered:s.cssMode&&s.centeredSlides},{"watch-progress":s.watchSlidesProgress}],s.containerModifierClass);t.push(...o),i.classList.add(...t),e.emitContainerClasses()},removeClasses:function(){const{el:e,classNames:t}=this;e&&"string"!=typeof e&&(e.classList.remove(...t),this.emitContainerClasses())}}},Ad={};class Md{constructor(){let e,t;for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];1===n.length&&n[0].constructor&&"Object"===Object.prototype.toString.call(n[0]).slice(8,-1)?t=n[0]:[e,t]=n,t||(t={}),t=Uc({},t),e&&!t.el&&(t.el=e);const r=Bc();if(t.el&&"string"==typeof t.el&&r.querySelectorAll(t.el).length>1){const e=[];return r.querySelectorAll(t.el).forEach((s=>{const n=Uc({},t,{el:s});e.push(new Md(n))})),e}const o=this;o.__swiper__=!0,o.support=nd(),o.device=id({userAgent:t.userAgent}),o.browser=rd(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const a={};o.modules.forEach((e=>{e({params:t,swiper:o,extendParams:Id(t,a),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})}));const l=Uc({},xd,a);return o.params=Uc({},l,Ad,t),o.originalParams=Uc({},o.params),o.passedParams=Uc({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach((e=>{o.on(e,o.params.on[e])})),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===o.params.direction,isVertical:()=>"vertical"===o.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:s}=this,n=Xc(Gc(t,`.${s.slideClass}, swiper-slide`)[0]);return Xc(e)-n}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find((t=>1*t.getAttribute("data-swiper-slide-index")===e)))}recalcSlides(){const{slidesEl:e,params:t}=this;this.slides=Gc(e,`.${t.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const s=this;e=Math.min(Math.max(e,0),1);const n=s.minTranslate(),i=(s.maxTranslate()-n)*e+n;s.translateTo(i,void 0===t?0:t),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter((t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter((e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass))).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach((s=>{const n=e.getSlideClasses(s);t.push({slideEl:s,classNames:n}),e.emit("_slideClass",s,n)})),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:s,slides:n,slidesGrid:i,slidesSizesGrid:r,size:o,activeIndex:a}=this;let l=1;if("number"==typeof s.slidesPerView)return s.slidesPerView;if(s.centeredSlides){let e,t=n[a]?Math.ceil(n[a].swiperSlideSize):0;for(let s=a+1;s<n.length;s+=1)n[s]&&!e&&(t+=Math.ceil(n[s].swiperSlideSize),l+=1,t>o&&(e=!0));for(let s=a-1;s>=0;s-=1)n[s]&&!e&&(t+=n[s].swiperSlideSize,l+=1,t>o&&(e=!0))}else if("current"===e)for(let e=a+1;e<n.length;e+=1)(t?i[e]+r[e]-i[a]<o:i[e]-i[a]<o)&&(l+=1);else for(let e=a-1;e>=0;e-=1)i[a]-i[e]<o&&(l+=1);return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:s}=e;function n(){const t=e.rtlTranslate?-1*e.translate:e.translate,s=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(s),e.updateActiveIndex(),e.updateSlidesClasses()}let i;if(s.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach((t=>{t.complete&&hd(e,t)})),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),s.freeMode&&s.freeMode.enabled&&!s.cssMode)n(),s.autoHeight&&e.updateAutoHeight();else{if(("auto"===s.slidesPerView||s.slidesPerView>1)&&e.isEnd&&!s.centeredSlides){const t=e.virtual&&s.virtual.enabled?e.virtual.slides:e.slides;i=e.slideTo(t.length-1,0,!1,!0)}else i=e.slideTo(e.activeIndex,0,!1,!0);i||n()}s.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const s=this,n=s.params.direction;return e||(e="horizontal"===n?"vertical":"horizontal"),e===n||"horizontal"!==e&&"vertical"!==e||(s.el.classList.remove(`${s.params.containerModifierClass}${n}`),s.el.classList.add(`${s.params.containerModifierClass}${e}`),s.emitContainerClasses(),s.params.direction=e,s.slides.forEach((t=>{"vertical"===e?t.style.width="":t.style.height=""})),s.emit("changeDirection"),t&&s.update()),s}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let s=e||t.params.el;if("string"==typeof s&&(s=document.querySelector(s)),!s)return!1;s.swiper=t,s.parentNode&&s.parentNode.host&&s.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const n=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let i=s&&s.shadowRoot&&s.shadowRoot.querySelector?s.shadowRoot.querySelector(n()):Gc(s,n())[0];return!i&&t.params.createElements&&(i=Kc("div",t.params.wrapperClass),s.append(i),Gc(s,`.${t.params.slideClass}`).forEach((e=>{i.append(e)}))),Object.assign(t,{el:s,wrapperEl:i,slidesEl:t.isElement&&!s.parentNode.host.slideSlots?s.parentNode.host:i,hostEl:t.isElement?s.parentNode.host:s,mounted:!0,rtl:"rtl"===s.dir.toLowerCase()||"rtl"===Jc(s,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===s.dir.toLowerCase()||"rtl"===Jc(s,"direction")),wrongRTL:"-webkit-box"===Jc(i,"display")}),!0}init(e){const t=this;if(t.initialized)return t;if(!1===t.mount(e))return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach((e=>{e.complete?hd(t,e):e.addEventListener("load",(e=>{hd(t,e.target)}))})),cd(t),t.initialized=!0,cd(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const s=this,{params:n,el:i,wrapperEl:r,slides:o}=s;return void 0===s.params||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),n.loop&&s.loopDestroy(),t&&(s.removeClasses(),i&&"string"!=typeof i&&i.removeAttribute("style"),r&&r.removeAttribute("style"),o&&o.length&&o.forEach((e=>{e.classList.remove(n.slideVisibleClass,n.slideFullyVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")}))),s.emit("destroy"),Object.keys(s.eventsListeners).forEach((e=>{s.off(e)})),!1!==e&&(s.el&&"string"!=typeof s.el&&(s.el.swiper=null),function(e){const t=e;Object.keys(t).forEach((e=>{try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))}(s)),s.destroyed=!0),null}static extendDefaults(e){Uc(Ad,e)}static get extendedDefaults(){return Ad}static get defaults(){return xd}static installModule(e){Md.prototype.__modules__||(Md.prototype.__modules__=[]);const t=Md.prototype.__modules__;"function"==typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach((e=>Md.installModule(e))),Md):(Md.installModule(e),Md)}}function Od(e){let{swiper:t,extendParams:s,on:n,emit:i}=e;function r(e){let s;return e&&"string"==typeof e&&t.isElement&&(s=t.el.querySelector(e)||t.hostEl.querySelector(e),s)?s:(e&&("string"==typeof e&&(s=[...document.querySelectorAll(e)]),t.params.uniqueNavElements&&"string"==typeof e&&s&&s.length>1&&1===t.el.querySelectorAll(e).length?s=t.el.querySelector(e):s&&1===s.length&&(s=s[0])),e&&!s?e:s)}function o(e,s){const n=t.params.navigation;(e=Zc(e)).forEach((e=>{e&&(e.classList[s?"add":"remove"](...n.disabledClass.split(" ")),"BUTTON"===e.tagName&&(e.disabled=s),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](n.lockClass))}))}function a(){const{nextEl:e,prevEl:s}=t.navigation;if(t.params.loop)return o(s,!1),void o(e,!1);o(s,t.isBeginning&&!t.params.rewind),o(e,t.isEnd&&!t.params.rewind)}function l(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&(t.slidePrev(),i("navigationPrev"))}function h(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&(t.slideNext(),i("navigationNext"))}function u(){const e=t.params.navigation;if(t.params.navigation=function(e,t,s,n){return e.params.createElements&&Object.keys(n).forEach((i=>{if(!s[i]&&!0===s.auto){let r=Gc(e.el,`.${n[i]}`)[0];r||(r=Kc("div",n[i]),r.className=n[i],e.el.append(r)),s[i]=r,t[i]=r}})),s}(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!e.nextEl&&!e.prevEl)return;let s=r(e.nextEl),n=r(e.prevEl);Object.assign(t.navigation,{nextEl:s,prevEl:n}),s=Zc(s),n=Zc(n);const i=(s,n)=>{s&&s.addEventListener("click","next"===n?h:l),!t.enabled&&s&&s.classList.add(...e.lockClass.split(" "))};s.forEach((e=>i(e,"next"))),n.forEach((e=>i(e,"prev")))}function c(){let{nextEl:e,prevEl:s}=t.navigation;e=Zc(e),s=Zc(s);const n=(e,s)=>{e.removeEventListener("click","next"===s?h:l),e.classList.remove(...t.params.navigation.disabledClass.split(" "))};e.forEach((e=>n(e,"next"))),s.forEach((e=>n(e,"prev")))}s({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null},n("init",(()=>{!1===t.params.navigation.enabled?d():(u(),a())})),n("toEdge fromEdge lock unlock",(()=>{a()})),n("destroy",(()=>{c()})),n("enable disable",(()=>{let{nextEl:e,prevEl:s}=t.navigation;e=Zc(e),s=Zc(s),t.enabled?a():[...e,...s].filter((e=>!!e)).forEach((e=>e.classList.add(t.params.navigation.lockClass)))})),n("click",((e,s)=>{let{nextEl:n,prevEl:r}=t.navigation;n=Zc(n),r=Zc(r);const o=s.target;let a=r.includes(o)||n.includes(o);if(t.isElement&&!a){const e=s.path||s.composedPath&&s.composedPath();e&&(a=e.find((e=>n.includes(e)||r.includes(e))))}if(t.params.navigation.hideOnClick&&!a){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===o||t.pagination.el.contains(o)))return;let e;n.length?e=n[0].classList.contains(t.params.navigation.hiddenClass):r.length&&(e=r[0].classList.contains(t.params.navigation.hiddenClass)),i(!0===e?"navigationShow":"navigationHide"),[...n,...r].filter((e=>!!e)).forEach((e=>e.classList.toggle(t.params.navigation.hiddenClass)))}}));const d=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),c()};Object.assign(t.navigation,{enable:()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),u(),a()},disable:d,update:a,init:u,destroy:c})}function Dd(e){const t=document.createElement("p");return t.classList.add("error"),t.textContent=e,t}function Rd(){document.querySelectorAll(".error").forEach((e=>e.remove()))}function Ld(e){return e?e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):""}Object.keys(Pd).forEach((e=>{Object.keys(Pd[e]).forEach((t=>{Md.prototype[t]=Pd[e][t]}))})),Md.use([function(e){let{swiper:t,on:s,emit:n}=e;const i=$c();let r=null,o=null;const a=()=>{t&&!t.destroyed&&t.initialized&&(n("beforeResize"),n("resize"))},l=()=>{t&&!t.destroyed&&t.initialized&&n("orientationchange")};s("init",(()=>{t.params.resizeObserver&&void 0!==i.ResizeObserver?t&&!t.destroyed&&t.initialized&&(r=new ResizeObserver((e=>{o=i.requestAnimationFrame((()=>{const{width:s,height:n}=t;let i=s,r=n;e.forEach((e=>{let{contentBoxSize:s,contentRect:n,target:o}=e;o&&o!==t.el||(i=n?n.width:(s[0]||s).inlineSize,r=n?n.height:(s[0]||s).blockSize)})),i===s&&r===n||a()}))})),r.observe(t.el)):(i.addEventListener("resize",a),i.addEventListener("orientationchange",l))})),s("destroy",(()=>{o&&i.cancelAnimationFrame(o),r&&r.unobserve&&t.el&&(r.unobserve(t.el),r=null),i.removeEventListener("resize",a),i.removeEventListener("orientationchange",l)}))},function(e){let{swiper:t,extendParams:s,on:n,emit:i}=e;const r=[],o=$c(),a=function(e,s){void 0===s&&(s={});const n=new(o.MutationObserver||o.WebkitMutationObserver)((e=>{if(t.__preventObserver__)return;if(1===e.length)return void i("observerUpdate",e[0]);const s=function(){i("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(s):o.setTimeout(s,0)}));n.observe(e,{attributes:void 0===s.attributes||s.attributes,childList:t.isElement||(void 0===s.childList||s).childList,characterData:void 0===s.characterData||s.characterData}),r.push(n)};s({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",(()=>{if(t.params.observer){if(t.params.observeParents){const e=function(e){const t=[];let s=e.parentElement;for(;s;)t.push(s),s=s.parentElement;return t}(t.hostEl);for(let t=0;t<e.length;t+=1)a(e[t])}a(t.hostEl,{childList:t.params.observeSlideChildren}),a(t.wrapperEl,{attributes:!1})}})),n("destroy",(()=>{r.forEach((e=>{e.disconnect()})),r.splice(0,r.length)}))}]);class Fd extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Nd extends Fd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Bd extends Fd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class jd extends Fd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $d;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}($d||($d={}));class Vd{constructor(e,{headers:t={},customFetch:n,region:i=$d.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,907)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s,n,i,r;return n=this,r=function*(){try{const{headers:n,method:i,body:r}=t;let o,a={},{region:l}=t;l||(l=this.region),l&&"any"!==l&&(a["x-region"]=l),r&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!=typeof Blob&&r instanceof Blob||r instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",o=r):"string"==typeof r?(a["Content-Type"]="text/plain",o=r):"undefined"!=typeof FormData&&r instanceof FormData?o=r:(a["Content-Type"]="application/json",o=JSON.stringify(r)));const h=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:o}).catch((e=>{throw new Nd(e)})),u=h.headers.get("x-relay-error");if(u&&"true"===u)throw new Bd(h);if(!h.ok)throw new jd(h);let c,d=(null!==(s=h.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return c="application/json"===d?yield h.json():"application/octet-stream"===d?yield h.blob():"text/event-stream"===d?h:"multipart/form-data"===d?yield h.formData():yield h.text(),{data:c,error:null}}catch(e){return{data:null,error:e}}},new((i=void 0)||(i=Promise))((function(e,t){function s(e){try{a(r.next(e))}catch(e){t(e)}}function o(e){try{a(r.throw(e))}catch(e){t(e)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(s,o)}a((r=r.apply(n,[])).next())}))}}var qd=s(279);const{PostgrestClient:zd,PostgrestQueryBuilder:Ud,PostgrestFilterBuilder:Hd,PostgrestTransformBuilder:Wd,PostgrestBuilder:Gd,PostgrestError:Yd}=qd;let Kd;Kd="undefined"==typeof window?s(191):window.WebSocket;const Jd=Kd,Xd={"X-Client-Info":"realtime-js/2.11.10"};var Qd,Zd,ep,tp,sp,np,ip;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Qd||(Qd={})),(ip=Zd||(Zd={})).closed="closed",ip.errored="errored",ip.joined="joined",ip.joining="joining",ip.leaving="leaving",function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(ep||(ep={})),function(e){e.websocket="websocket"}(tp||(tp={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(sp||(sp={}));class rp{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let r=this.HEADER_LENGTH+2;const o=s.decode(e.slice(r,r+n));r+=n;const a=s.decode(e.slice(r,r+i));return r+=i,{ref:null,topic:o,event:a,payload:JSON.parse(s.decode(e.slice(r,e.byteLength)))}}}class op{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(np||(np={}));const ap=(e,t,s={})=>{var n;const i=null!==(n=s.skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce(((s,n)=>(s[n]=lp(n,e,t,i),s)),{})},lp=(e,t,s,n)=>{const i=t.find((t=>t.name===e)),r=null==i?void 0:i.type,o=s[e];return r&&!n.includes(r)?hp(r,o):up(o)},hp=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return fp(t,s)}switch(e){case np.bool:return cp(t);case np.float4:case np.float8:case np.int2:case np.int4:case np.int8:case np.numeric:case np.oid:return dp(t);case np.json:case np.jsonb:return pp(t);case np.timestamp:return gp(t);case np.abstime:case np.date:case np.daterange:case np.int4range:case np.int8range:case np.money:case np.reltime:case np.text:case np.time:case np.timestamptz:case np.timetz:case np.tsrange:case np.tstzrange:default:return up(t)}},up=e=>e,cp=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},dp=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},pp=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},fp=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,n=e[s];if("{"===e[0]&&"}"===n){let n;const i=e.slice(1,s);try{n=JSON.parse("["+i+"]")}catch(e){n=i?i.split(","):[]}return n.map((e=>hp(t,e)))}return e},gp=e=>"string"==typeof e?e.replace(" ","T"):e,mp=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class _p{constructor(e,t,s={},n=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var vp,yp,wp,bp;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(vp||(vp={}));class kp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},(e=>{const{onJoin:t,onLeave:s,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kp.syncState(this.state,e,t,s),this.pendingDiffs.forEach((e=>{this.state=kp.syncDiff(this.state,e,t,s)})),this.pendingDiffs=[],n()})),this.channel._on(s.diff,{},(e=>{const{onJoin:t,onLeave:s,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=kp.syncDiff(this.state,e,t,s),n())})),this.onJoin(((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})})),this.onLeave(((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,s,n){const i=this.cloneDeep(e),r=this.transformState(t),o={},a={};return this.map(i,((e,t)=>{r[e]||(a[e]=t)})),this.map(r,((e,t)=>{const s=i[e];if(s){const n=t.map((e=>e.presence_ref)),i=s.map((e=>e.presence_ref)),r=t.filter((e=>i.indexOf(e.presence_ref)<0)),l=s.filter((e=>n.indexOf(e.presence_ref)<0));r.length>0&&(o[e]=r),l.length>0&&(a[e]=l)}else o[e]=t})),this.syncDiff(i,{joins:o,leaves:a},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:r}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,((t,n)=>{var i;const r=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(n),r.length>0){const s=e[t].map((e=>e.presence_ref)),n=r.filter((e=>s.indexOf(e.presence_ref)<0));e[t].unshift(...n)}s(t,r,n)})),this.map(r,((t,s)=>{let i=e[t];if(!i)return;const r=s.map((e=>e.presence_ref));i=i.filter((e=>r.indexOf(e.presence_ref)<0)),e[t]=i,n(t,i,s),0===i.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((s=>t(s,e[s])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,s)=>{const n=e[s];return t[s]="metas"in n?n.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):n,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(yp||(yp={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(wp||(wp={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(bp||(bp={}));class Cp{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Zd.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new _p(this,ep.join,this.params,this.timeout),this.rejoinTimer=new op((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=Zd.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zd.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Zd.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zd.errored,this.rejoinTimer.scheduleTimeout())})),this._on(ep.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new kp(this),this.broadcastEndpointURL=mp(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:r,private:o}}=this.params;this._onError((t=>null==e?void 0:e(bp.CHANNEL_ERROR,t))),this._onClose((()=>null==e?void 0:e(bp.CLOSED)));const a={},l={broadcast:i,presence:r,postgres_changes:null!==(n=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map((e=>e.filter)))&&void 0!==n?n:[],private:o};this.socket.accessTokenValue&&(a.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(async({postgres_changes:t})=>{var s;if(this.socket.setAuth(),void 0!==t){const n=this.bindings.postgres_changes,i=null!==(s=null==n?void 0:n.length)&&void 0!==s?s:0,r=[];for(let s=0;s<i;s++){const i=n[s],{filter:{event:o,schema:a,table:l,filter:h}}=i,u=t&&t[s];if(!u||u.event!==o||u.schema!==a||u.table!==l||u.filter!==h)return this.unsubscribe(),this.state=Zd.errored,void(null==e||e(bp.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));r.push(Object.assign(Object.assign({},i),{id:u.id}))}return this.bindings.postgres_changes=r,void(e&&e(bp.SUBSCRIBED))}null==e||e(bp.SUBSCRIBED)})).receive("error",(t=>{this.state=Zd.errored,null==e||e(bp.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{null==e||e(bp.TIMED_OUT)}))}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(this._canPush()||"broadcast"!==e.type)return new Promise((s=>{var n,i,r;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(r=null===(i=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===i?void 0:i.broadcast)||void 0===r?void 0:r.ack)||s("ok"),o.receive("ok",(()=>s("ok"))),o.receive("error",(()=>s("error"))),o.receive("timeout",(()=>s("timed out")))}));{const{event:i,payload:r}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:r,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(e){return"AbortError"===e.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Zd.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ep.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise((s=>{const n=new _p(this,ep.leave,{},e);n.receive("ok",(()=>{t(),s("ok")})).receive("timeout",(()=>{t(),s("timed out")})).receive("error",(()=>{s("error")})),n.send(),this._canPush()||n.trigger("ok",{})}))}teardown(){this.pushBuffer.forEach((e=>e.destroy())),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout((()=>n.abort()),s),r=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),r}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new _p(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const r=e.toLocaleLowerCase(),{close:o,error:a,leave:l,join:h}=ep;if(s&&[o,a,l,h].indexOf(r)>=0&&s!==this._joinRef())return;let u=this._onMessage(r,t,s);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter((e=>{var t,s,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===n?void 0:n.toLocaleLowerCase())===r})).map((e=>e.callback(u,s))):null===(i=this.bindings[r])||void 0===i||i.filter((e=>{var s,n,i,o,a,l;if(["broadcast","presence","postgres_changes"].includes(r)){if("id"in e){const r=e.id,o=null===(s=e.filter)||void 0===s?void 0:s.event;return r&&(null===(n=t.ids)||void 0===n?void 0:n.includes(r))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const s=null===(a=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===s||s===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===r})).map((e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:s,commit_timestamp:n,type:i,errors:r}=e,o={schema:t,table:s,commit_timestamp:n,eventType:i,new:{},old:{},errors:r};u=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(u,s)}))}_isClosed(){return this.state===Zd.closed}_isJoined(){return this.state===Zd.joined}_isJoining(){return this.state===Zd.joining}_isLeaving(){return this.state===Zd.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter((e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===s&&Cp.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ep.close,{},e)}_onError(e){this._on(ep.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zd.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=ap(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=ap(e.columns,e.old_record)),t}}const Tp=()=>{};class Sp{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Xd,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Tp,this.ref=0,this.logger=Tp,this.conn=null,this.sendBuffer=[],this.serializer=new rp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,907)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${tp.websocket}`,this.httpEndpoint=mp(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),((null==t?void 0:t.logLevel)||(null==t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new op((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}this.accessToken=(null==t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Jd),this.transport){const e="undefined"!=typeof window&&this.transport===window.WebSocket;return this.conn=e?new this.transport(this.endpointURL()):new this.transport(this.endpointURL(),void 0,{headers:this.headers}),void this.setupConnection()}this.conn=new Ep(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach((e=>e.teardown())))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter((t=>t._joinRef!==e._joinRef)),0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Qd.connecting:return sp.Connecting;case Qd.open:return sp.Open;case Qd.closing:return sp.Closing;default:return sp.Closed}}isConnected(){return this.connectionState()===sp.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find((e=>e.topic===s));if(n)return n;{const s=new Cp(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:n,ref:i}=e,r=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach((e=>{t&&e.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),e.joinedOnce&&e._isJoined()&&e._push(ep.access_token,{access_token:t})})))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t.topic!==e.topic))}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:s,payload:n,ref:i}=e;"phoenix"===t&&"phx_reply"===s&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${t} ${s} ${i&&"("+i+")"||""}`,n),Array.from(this.channels).filter((e=>e._isMember(t))).forEach((e=>e._trigger(s,n,i))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this.sendHeartbeat()),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(ep.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class Ep{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Qd.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class xp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ip(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Pp extends xp{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ap extends xp{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Mp=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,907)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Op=e=>{if(Array.isArray(e))return e.map((e=>Op(e)));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach((([e,s])=>{const n=e.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace(/[-_]/g,"")));t[n]=Op(s)})),t};var Dp=function(e,t,s,n){return new(s||(s=Promise))((function(i,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const Rp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Lp=(e,t,n)=>Dp(void 0,void 0,void 0,(function*(){const i=yield(r=void 0,o=function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(s.bind(s,907))).Response:Response},new(r||(r=Promise))((function(e,t){function s(e){try{i(o.next(e))}catch(e){t(e)}}function n(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(s,n)}i((o=o.apply(undefined,[])).next())})));var r,o;e instanceof i&&!(null==n?void 0:n.noResolveJson)?e.json().then((s=>{t(new Pp(Rp(s),e.status||500))})).catch((e=>{t(new Ap(Rp(e),e))})):t(new Ap(Rp(e),e))}));function Fp(e,t,s,n,i,r){return Dp(this,void 0,void 0,(function*(){return new Promise(((o,a)=>{e(s,((e,t,s,n)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),s))})(t,n,i,r)).then((e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()})).then((e=>o(e))).catch((e=>Lp(e,a,n)))}))}))}function Np(e,t,s,n){return Dp(this,void 0,void 0,(function*(){return Fp(e,"GET",t,s,n)}))}function Bp(e,t,s,n,i){return Dp(this,void 0,void 0,(function*(){return Fp(e,"POST",t,n,i,s)}))}function jp(e,t,s,n,i){return Dp(this,void 0,void 0,(function*(){return Fp(e,"DELETE",t,n,i,s)}))}var $p=function(e,t,s,n){return new(s||(s=Promise))((function(i,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const Vp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zp{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Mp(n)}uploadOrUpdate(e,t,s,n){return $p(this,void 0,void 0,(function*(){try{let i;const r=Object.assign(Object.assign({},qp),n);let o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(r.upsert)});const a=r.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(i=new FormData,i.append("cacheControl",r.cacheControl),a&&i.append("metadata",this.encodeMetadata(a)),i.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(i=s,i.append("cacheControl",r.cacheControl),a&&i.append("metadata",this.encodeMetadata(a))):(i=s,o["cache-control"]=`max-age=${r.cacheControl}`,o["content-type"]=r.contentType,a&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null==n?void 0:n.headers)&&(o=Object.assign(Object.assign({},o),n.headers));const l=this._removeEmptyFolders(t),h=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:i,headers:o},(null==r?void 0:r.duplex)?{duplex:r.duplex}:{})),c=yield u.json();return u.ok?{data:{path:l,id:c.Id,fullPath:c.Key},error:null}:{data:null,error:c}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}upload(e,t,s){return $p(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,s)}))}uploadToSignedUrl(e,t,s,n){return $p(this,void 0,void 0,(function*(){const i=this._removeEmptyFolders(e),r=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${r}`);o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:qp.upsert},n),r=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,r["cache-control"]=`max-age=${t.cacheControl}`,r["content-type"]=t.contentType);const a=yield this.fetch(o.toString(),{method:"PUT",body:e,headers:r}),l=yield a.json();return a.ok?{data:{path:i,fullPath:l.Key},error:null}:{data:null,error:l}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}createSignedUploadUrl(e,t){return $p(this,void 0,void 0,(function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");const i=yield Bp(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),r=new URL(this.url+i.url),o=r.searchParams.get("token");if(!o)throw new xp("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:o},error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}update(e,t,s){return $p(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,s)}))}move(e,t,s){return $p(this,void 0,void 0,(function*(){try{return{data:yield Bp(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}copy(e,t,s){return $p(this,void 0,void 0,(function*(){try{return{data:{path:(yield Bp(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}createSignedUrl(e,t,s){return $p(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(e),i=yield Bp(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const r=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${r}`)},{data:i,error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}createSignedUrls(e,t,s){return $p(this,void 0,void 0,(function*(){try{const n=yield Bp(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:n.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null}))),error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}download(e,t){return $p(this,void 0,void 0,(function*(){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=n?`?${n}`:"";try{const t=this._getFinalPath(e),n=yield Np(this.fetch,`${this.url}/${s}/${t}${i}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}info(e){return $p(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{const e=yield Np(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Op(e),error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}exists(e){return $p(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s){return Dp(this,void 0,void 0,(function*(){return Fp(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),void 0)}))}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(Ip(e)&&e instanceof Ap){const t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}}))}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&n.push(i);const r=void 0!==(null==t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&n.push(o);let a=n.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${r}/public/${s}${a}`)}}}remove(e){return $p(this,void 0,void 0,(function*(){try{return{data:yield jp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}list(e,t,s){return $p(this,void 0,void 0,(function*(){try{const n=Object.assign(Object.assign(Object.assign({},Vp),t),{prefix:e||""});return{data:yield Bp(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Up={"X-Client-Info":"storage-js/2.7.1"};var Hp=function(e,t,s,n){return new(s||(s=Promise))((function(i,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class Wp{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Up),t),this.fetch=Mp(s)}listBuckets(){return Hp(this,void 0,void 0,(function*(){try{return{data:yield Np(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}getBucket(e){return Hp(this,void 0,void 0,(function*(){try{return{data:yield Np(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}createBucket(e,t={public:!1}){return Hp(this,void 0,void 0,(function*(){try{return{data:yield Bp(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}updateBucket(e,t){return Hp(this,void 0,void 0,(function*(){try{const s=yield function(e,t,s,n){return Dp(this,void 0,void 0,(function*(){return Fp(e,"PUT",t,n,void 0,s)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:s,error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}emptyBucket(e){return Hp(this,void 0,void 0,(function*(){try{return{data:yield Bp(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}deleteBucket(e){return Hp(this,void 0,void 0,(function*(){try{return{data:yield jp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(Ip(e))return{data:null,error:e};throw e}}))}}class Gp extends Wp{constructor(e,t={},s){super(e,t,s)}from(e){return new zp(this.url,this.headers,e,this.fetch)}}let Yp="";Yp="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Kp={headers:{"X-Client-Info":`supabase-js-${Yp}/2.50.0`}},Jp={schema:"public"},Xp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qp={};var Zp=s(907);const ef=(e,t,s)=>{const n=(e=>{let t;return t=e||("undefined"==typeof fetch?Zp.default:fetch),(...e)=>t(...e)})(s),i="undefined"==typeof Headers?Zp.Headers:Headers;return(s,r)=>{return a=function*(){var o;const a=null!==(o=yield t())&&void 0!==o?o:e;let l=new i(null==r?void 0:r.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${a}`),n(s,Object.assign(Object.assign({},r),{headers:l}))},new((o=void 0)||(o=Promise))((function(e,t){function s(e){try{i(a.next(e))}catch(e){t(e)}}function n(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o((function(e){e(i)}))).then(s,n)}i((a=a.apply(undefined,[])).next())}));var o,a}},tf="2.70.0",sf=3e4,nf={"X-Client-Info":`gotrue-js/${tf}`},rf="X-Supabase-Api-Version",of=Date.parse("2024-01-01T00:00:00.0Z"),af=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class lf extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function hf(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class uf extends lf{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class cf extends lf{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class df extends lf{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class pf extends df{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class ff extends df{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gf extends df{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class mf extends df{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _f extends df{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vf extends df{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function yf(e){return hf(e)&&"AuthRetryableFetchError"===e.name}class wf extends df{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class bf extends df{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const kf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Cf=" \t\n\r=".split(""),Tf=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Cf.length;t+=1)e[Cf[t].charCodeAt(0)]=-2;for(let t=0;t<kf.length;t+=1)e[kf[t].charCodeAt(0)]=t;return e})();function Sf(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(kf[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(kf[e]),t.queuedBits-=6}}function Ef(e,t,s){const n=Tf[e];if(!(n>-1)){if(-2===n)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function xf(e){const t=[],s=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},r=e=>{!function(e,t,s){if(0===t.utf8seq){if(e<=127)return void s(e);for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&s(t.codepoint)}}(e,n,s)};for(let t=0;t<e.length;t+=1)Ef(e.charCodeAt(t),i,r);return t.join("")}function If(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Pf(e){const t=[],s={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let t=0;t<e.length;t+=1)Ef(e.charCodeAt(t),s,n);return new Uint8Array(t)}function Af(e){const t=[],s={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach((e=>Sf(e,s,n))),Sf(null,s,n),t.join("")}const Mf=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Of={tested:!1,writable:!1},Df=()=>{if(!Mf())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(Of.tested)return Of.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Of.tested=!0,Of.writable=!0}catch(e){Of.tested=!0,Of.writable=!1}return Of.writable},Rf=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,907)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Lf=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Ff=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(e){return s}},Nf=async(e,t)=>{await e.removeItem(t)};class Bf{constructor(){this.promise=new Bf.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function jf(e){const t=e.split(".");if(3!==t.length)throw new bf("Invalid JWT structure");for(let e=0;e<t.length;e++)if(!af.test(t[e]))throw new bf("JWT not in base64url format");return{header:JSON.parse(xf(t[0])),payload:JSON.parse(xf(t[1])),signature:Pf(t[2]),raw:{header:t[0],payload:t[1]}}}function $f(e){return("0"+e.toString(16)).substr(-2)}async function Vf(e,t,s=!1){const n=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let n=0;n<56;n++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,$f).join("")}();let i=n;s&&(i+="/PASSWORD_RECOVERY"),await Lf(e,`${t}-code-verifier`,i);const r=await async function(e){if("undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder)return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map((e=>String.fromCharCode(e))).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(n);return[r,n===r?"plain":"s256"]}Bf.promiseConstructor=Promise;const qf=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,zf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Uf(e){if(!zf.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}const Hf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Wf=[502,503,504];async function Gf(e){var t,s;if(!("object"==typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json))throw new vf(Hf(e),0);if(Wf.includes(e.status))throw new vf(Hf(e),e.status);let n,i;try{n=await e.json()}catch(e){throw new cf(Hf(e),e)}const r=function(e){const t=e.headers.get(rf);if(!t)return null;if(!t.match(qf))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(r&&r.getTime()>=of&&"object"==typeof n&&n&&"string"==typeof n.code?i=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(i=n.error_code),i){if("weak_password"===i)throw new wf(Hf(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new pf}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0))throw new wf(Hf(n),e.status,n.weak_password.reasons);throw new uf(Hf(n),e.status||500,i)}async function Yf(e,t,s,n){var i;const r=Object.assign({},null==n?void 0:n.headers);r[rf]||(r[rf]="2024-01-01"),(null==n?void 0:n.jwt)&&(r.Authorization=`Bearer ${n.jwt}`);const o=null!==(i=null==n?void 0:n.query)&&void 0!==i?i:{};(null==n?void 0:n.redirectTo)&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await async function(e,t,s,n,i,r){const o=((e,t,s,n)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),{}))})(t,n,0,r);let a;try{a=await e(s,Object.assign({},o))}catch(e){throw console.error(e),new vf(Hf(e),0)}if(a.ok||await Gf(a),null==n?void 0:n.noResolveJson)return a;try{return await a.json()}catch(e){await Gf(e)}}(e,t,s+a,{headers:r,noResolveJson:null==n?void 0:n.noResolveJson},0,null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function Kf(e){var t;let s=null;var n;return function(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n))),{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Jf(e){const t=Kf(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0)&&(t.data.weak_password=e.weak_password),t}function Xf(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Qf(e){return{data:e,error:null}}function Zf(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:r}=e,o=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]])}return s}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:r},user:Object.assign({},o)},error:null}}function eg(e){return e}const tg=["global","local","others"];class sg{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Rf(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=tg[0]){if(tg.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tg.join(", ")}`);try{return await Yf(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(hf(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await Yf(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Xf})}catch(e){if(hf(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{const{options:t}=e,s=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]])}return s}(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=null==s?void 0:s.newEmail,delete n.newEmail),await Yf(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Zf,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(hf(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await Yf(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xf})}catch(e){if(hf(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,s,n,i,r,o,a;try{const l={nextPage:null,lastPage:0,total:0},h=await Yf(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(i=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==i?i:""},xform:eg});if(h.error)throw h.error;const u=await h.json(),c=null!==(r=h.headers.get("x-total-count"))&&void 0!==r?r:0,d=null!==(a=null===(o=h.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l[`${s}Page`]=t})),l.total=parseInt(c)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(e){if(hf(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){Uf(e);try{return await Yf(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xf})}catch(e){if(hf(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){Uf(e);try{return await Yf(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Xf})}catch(e){if(hf(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){Uf(e);try{return await Yf(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Xf})}catch(e){if(hf(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){Uf(e.userId);try{const{data:t,error:s}=await Yf(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(e){if(hf(e))return{data:null,error:e};throw e}}async _deleteFactor(e){Uf(e.userId),Uf(e.id);try{return{data:await Yf(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(hf(e))return{data:null,error:e};throw e}}}const ng={getItem:e=>Df()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Df()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Df()&&globalThis.localStorage.removeItem(e)}};function ig(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const rg=!!(globalThis&&Df()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class og extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ag extends og{}async function lg(e,t,s){rg&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout((()=>{n.abort(),rg&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)}),t),await Promise.resolve().then((()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},(async n=>{if(!n){if(0===t)throw rg&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ag(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(rg)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}rg&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await s()}finally{rg&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const hg={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nf,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ug(e,t,s){return await s()}class cg{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=cg.nextInstanceID,cg.nextInstanceID+=1,this.instanceID>0&&Mf()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},hg),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new sg({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Rf(n.fetch),this.lock=n.lock||ug,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Mf()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=lg:this.lock=ug,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Df()?this.storage=ng:(this.memoryStorage={},this.storage=ig(this.memoryStorage)):(this.memoryStorage={},this.storage=ig(this.memoryStorage)),Mf()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tf}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach(((e,s)=>{t[s]=e}))}catch(e){}return s.searchParams.forEach(((e,s)=>{t[s]=e})),t}(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Mf()&&this.detectSessionInUrl&&"none"!==s){const{data:n,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return hf(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:r,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",r,"redirect type",o),await this._saveSession(r),setTimeout((async()=>{"recovery"===o?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return hf(e)?{error:e}:{error:new cf("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const i=await Yf(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(s=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:Kf}),{data:r,error:o}=i;if(o||!r)return{data:{user:null,session:null},error:o};const a=r.session,l=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(e){if(hf(e))return{data:{user:null,session:null},error:e};throw e}}async signUp(e){var t,s,n;try{let i;if("email"in e){const{email:s,password:n,options:r}=e;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await Vf(this.storage,this.storageKey)),i=await Yf(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==r?void 0:r.emailRedirectTo,body:{email:s,password:n,data:null!==(t=null==r?void 0:r.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},code_challenge:o,code_challenge_method:a},xform:Kf})}else{if(!("phone"in e))throw new gf("You must provide either an email or phone number and a password");{const{phone:t,password:r,options:o}=e;i=await Yf(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:r,data:null!==(s=null==o?void 0:o.data)&&void 0!==s?s:{},channel:null!==(n=null==o?void 0:o.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:Kf})}}const{data:r,error:o}=i;if(o||!r)return{data:{user:null,session:null},error:o};const a=r.session,l=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(e){if(hf(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:n,options:i}=e;t=await Yf(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Jf})}else{if(!("phone"in e))throw new gf("You must provide either an email or phone number and a password");{const{phone:s,password:n,options:i}=e;t=await Yf(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Jf})}}const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n}):{data:{user:null,session:null},error:new ff}}catch(e){if(hf(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,n,i,r,o,a,l,h,u,c,d;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:c,wallet:d,statement:g,options:m}=e;let _;if(Mf())if("object"==typeof d)_=d;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");_=e.solana}else{if("object"!=typeof d||!(null==m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=d}const v=new URL(null!==(t=null==m?void 0:m.url)&&void 0!==t?t:window.location.href);if("signIn"in _&&_.signIn){const e=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==m?void 0:m.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in _&&"function"==typeof _.signMessage&&"publicKey"in _&&"object"==typeof _&&_.publicKey&&"toBase58"in _.publicKey&&"function"==typeof _.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${v.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(n=null===(s=null==m?void 0:m.signInWithSolana)||void 0===s?void 0:s.issuedAt)&&void 0!==n?n:(new Date).toISOString()}`,...(null===(i=null==m?void 0:m.signInWithSolana)||void 0===i?void 0:i.notBefore)?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...(null===(r=null==m?void 0:m.signInWithSolana)||void 0===r?void 0:r.expirationTime)?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...(null===(o=null==m?void 0:m.signInWithSolana)||void 0===o?void 0:o.chainId)?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...(null===(a=null==m?void 0:m.signInWithSolana)||void 0===a?void 0:a.nonce)?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...(null===(l=null==m?void 0:m.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...(null===(u=null===(h=null==m?void 0:m.signInWithSolana)||void 0===h?void 0:h.resources)||void 0===u?void 0:u.length)?["Resources",...m.signInWithSolana.resources.map((e=>`- ${e}`))]:[]].join("\n");const e=await _.signMessage((new TextEncoder).encode(p),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:s}=await Yf(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Af(f)},(null===(c=e.options)||void 0===c?void 0:c.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:Kf});if(s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:s}):{data:{user:null,session:null},error:new ff}}catch(e){if(hf(e))return{data:{user:null,session:null},error:e};throw e}}async _exchangeCodeForSession(e){const t=await Ff(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(null!=t?t:"").split("/");try{const{data:t,error:i}=await Yf(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Kf});if(await Nf(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new ff}}catch(e){if(hf(e))return{data:{user:null,session:null,redirectType:null},error:e};throw e}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:i,nonce:r}=e,o=await Yf(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:r,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Kf}),{data:a,error:l}=o;return l?{data:{user:null,session:null},error:l}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l}):{data:{user:null,session:null},error:new ff}}catch(e){if(hf(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,s,n,i,r;try{if("email"in e){const{email:n,options:i}=e;let r=null,o=null;"pkce"===this.flowType&&([r,o]=await Vf(this.storage,this.storageKey));const{error:a}=await Yf(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(s=null==i?void 0:i.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:r,code_challenge_method:o},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:s}=e,{data:o,error:a}=await Yf(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==s?void 0:s.data)&&void 0!==n?n:{},create_user:null===(i=null==s?void 0:s.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(r=null==s?void 0:s.channel)&&void 0!==r?r:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new gf("You must provide either an email or phone number.")}catch(e){if(hf(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,s;try{let n,i;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:r,error:o}=await Yf(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Kf});if(o)throw o;if(!r)throw new Error("An error occurred on token verification.");const a=r.session,l=r.user;return(null==a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(e){if(hf(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,s,n;try{let i=null,r=null;return"pkce"===this.flowType&&([i,r]=await Vf(this.storage,this.storageKey)),await Yf(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:r}),headers:this.headers,xform:Qf})}catch(e){if(hf(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new pf;const{error:n}=await Yf(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}}))}catch(e){if(hf(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:r}=await Yf(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:r}}if("phone"in e){const{phone:s,type:n,options:i}=e,{data:r,error:o}=await Yf(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==r?void 0:r.message_id},error:o}}throw new gf("You must provide either an email or phone number and a type")}catch(e){if(hf(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch(e){}})()),s}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Ff(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&1e3*e.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,n)=>(t||"user"!==s||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,n))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,(async()=>await this._getUser())))}async _getUser(e){try{return e?await Yf(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xf}):await this._useSession((async e=>{var t,s,n;const{data:i,error:r}=e;if(r)throw r;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Yf(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(s=i.session)||void 0===s?void 0:s.access_token)&&void 0!==n?n:void 0,xform:Xf}):{data:{user:null},error:new pf}}))}catch(e){if(hf(e))return function(e){return hf(e)&&"AuthSessionMissingError"===e.name}(e)&&(await this._removeSession(),await Nf(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e,t={}){try{return await this._useSession((async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new pf;const r=n.session;let o=null,a=null;"pkce"===this.flowType&&null!=e.email&&([o,a]=await Vf(this.storage,this.storageKey));const{data:l,error:h}=await Yf(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:a}),jwt:r.access_token,xform:Xf});if(h)throw h;return r.user=l.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}}))}catch(e){if(hf(e))return{data:{user:null},error:e};throw e}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new pf;const t=Date.now()/1e3;let s=t,n=!0,i=null;const{payload:r}=jf(e.access_token);if(r.exp&&(s=r.exp,n=s<=t),n){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:n,error:r}=await this._getUser(e.access_token);if(r)throw r;i={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(e){if(hf(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var s;if(!e){const{data:n,error:i}=t;if(i)throw i;e=null!==(s=n.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new pf;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}}))}catch(e){if(hf(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e,t){try{if(!Mf())throw new mf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new mf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new _f("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new mf("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _f("No code detected.");const{data:t,error:s}=await this._exchangeCodeForSession(e.code);if(s)throw s;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:r,expires_in:o,expires_at:a,token_type:l}=e;if(!(i&&o&&r&&l))throw new mf("No session defined in URL");const h=Math.round(Date.now()/1e3),u=parseInt(o);let c=h+u;a&&(c=parseInt(a));const d=c-h;1e3*d<=sf&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${u}s`);const p=c-u;h-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,c,h):h-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,c,h);const{data:f,error:g}=await this._getUser(i);if(g)throw g;const m={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:u,expires_at:c,refresh_token:r,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(e){if(hf(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ff(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut({scope:e}={scope:"global"}){return await this._useSession((async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const r=null===(s=n.session)||void 0===s?void 0:s.access_token;if(r){const{error:t}=await this.admin.signOut(r,e);if(t&&(!function(e){return hf(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Nf(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession((async t=>{var s,n;try{const{data:{session:n},error:i}=t;if(i)throw i;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(t){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}}))}async resetPasswordForEmail(e,t={}){let s=null,n=null;"pkce"===this.flowType&&([s,n]=await Vf(this.storage,this.storageKey,!0));try{return await Yf(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(hf(e))return{data:null,error:e};throw e}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(e){if(hf(e))return{data:null,error:e};throw e}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession((async t=>{var s,n,i,r,o;const{data:a,error:l}=t;if(l)throw l;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await Yf(this.fetch,"GET",h,{headers:this.headers,jwt:null!==(o=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==o?o:void 0})}));if(n)throw n;return Mf()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==s?void 0:s.url),{data:{provider:e.provider,url:null==s?void 0:s.url},error:null}}catch(t){if(hf(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async unlinkIdentity(e){try{return await this._useSession((async t=>{var s,n;const{data:i,error:r}=t;if(r)throw r;return await Yf(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(s=i.session)||void 0===s?void 0:s.access_token)&&void 0!==n?n:void 0})}))}catch(e){if(hf(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await(s=async s=>(s>0&&await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Yf(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Kf})),n=(e,t)=>{const s=200*Math.pow(2,e);return t&&yf(t)&&Date.now()+s-i<sf},new Promise(((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await s(i);if(!n(i,null))return void e(t)}catch(e){if(!n(i,e))return void t(e)}})()})))}catch(e){if(this._debug(t,"error",e),hf(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}var s,n}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Mf()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await Ff(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s))return this._debug(t,"session is not valid"),void(null!==s&&await this._removeSession());const n=1e3*(null!==(e=s.expires_at)&&void 0!==e?e:1/0)-Date.now()<9e4;if(this._debug(t,`session has${n?"":" not"} expired with margin of 90000s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:e}=await this._callRefreshToken(s.refresh_token);e&&(console.error(e),yf(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(e){return this._debug(t,"error",e),void console.error(e)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new pf;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Bf;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new pf;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(e){if(this._debug(n,"error",e),hf(e)){const s={session:null,error:e};return yf(e)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(s),s}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(e),e}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],i=Array.from(this.stateChangeEmitters.values()).map((async s=>{try{await s.callback(e,t)}catch(e){n.push(e)}}));if(await Promise.all(i),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Lf(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Nf(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Mf()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),sf);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*s.expires_at-e)/sf);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(s.refresh_token)}))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof og))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mf()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if((null==s?void 0:s.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const[e,t]=await Vf(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(s.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);n.push(e.toString())}return(null==s?void 0:s.skipBrowserRedirect)&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await Yf(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token})}))}catch(e){if(hf(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession((async t=>{var s,n;const{data:i,error:r}=t;if(r)return{data:null,error:r};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:l}=await Yf(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:null===(s=null==i?void 0:i.session)||void 0===s?void 0:s.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(n=null==a?void 0:a.totp)||void 0===n?void 0:n.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})}))}catch(e){if(hf(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:r,error:o}=await Yf(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:o})}))}catch(e){if(hf(e))return{data:null,error:e};throw e}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await Yf(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token})}))}catch(e){if(hf(e))return{data:null,error:e};throw e}}))}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],n=s.filter((e=>"totp"===e.factor_type&&"verified"===e.status)),i=s.filter((e=>"phone"===e.factor_type&&"verified"===e.status));return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=jf(n.access_token);let o=null;r.aal&&(o=r.aal);let a=o;return(null!==(s=null===(t=n.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==s?s:[]).length>0&&(a="aal2"),{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:r.amr||[]},error:null}}))))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find((t=>t.kid===e));if(s)return s;if(s=this.jwks.keys.find((t=>t.kid===e)),s&&this.jwks_cached_at+6e5>Date.now())return s;const{data:n,error:i}=await Yf(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||0===n.keys.length)throw new bf("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find((t=>t.kid===e)),!s)throw new bf("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}const{header:n,payload:i,signature:r,raw:{header:o,payload:a}}=jf(s);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp),!n.kid||"HS256"===n.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(s);if(e)throw e;return{data:{claims:i,header:n,signature:r},error:null}}const l=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),h=await this.fetchJwk(n.kid,t),u=await crypto.subtle.importKey("jwk",h,l,!0,["verify"]);if(!await crypto.subtle.verify(l,u,r,function(e){const t=[];return function(e,t){for(let s=0;s<e.length;s+=1){let n=e.charCodeAt(s);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(s+1)-56320&65535|t),s+=1}If(n,t)}}(e,(e=>t.push(e))),new Uint8Array(t)}(`${o}.${a}`)))throw new bf("Invalid JWT signature");return{data:{claims:i,header:n,signature:r},error:null}}catch(e){if(hf(e))return{data:null,error:e};throw e}}}cg.nextInstanceID=0;const dg=cg;class pg extends dg{constructor(e){super(e)}}const fg=(gg=window.env.SUPABASE_URL,mg=window.env.SUPABASE_KEY,new class{constructor(e,t,s){var n,i,r;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=(a=e).endsWith("/")?a:a+"/";var a;const l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const h=`sb-${l.hostname.split(".")[0]}-auth-token`,u=function(e,t){var s,n;const{db:i,auth:r,realtime:o,global:a}=e,{db:l,auth:h,realtime:u,global:c}=t,d={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},h),r),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},c),a),{headers:Object.assign(Object.assign({},null!==(s=null==c?void 0:c.headers)&&void 0!==s?s:{}),null!==(n=null==a?void 0:a.headers)&&void 0!==n?n:{})}),accessToken:()=>{return e=this,s=function*(){return""},new((t=void 0)||(t=Promise))((function(n,i){function r(e){try{a(s.next(e))}catch(e){i(e)}}function o(e){try{a(s.throw(e))}catch(e){i(e)}}function a(e){var s;e.done?n(e.value):(s=e.value,s instanceof t?s:new t((function(e){e(s)}))).then(r,o)}a((s=s.apply(e,[])).next())}));var e,t,s}};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}(null!=s?s:{},{db:Jp,realtime:Qp,auth:Object.assign(Object.assign({},Xp),{storageKey:h}),global:Kp});this.storageKey=null!==(n=u.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(i=u.global.headers)&&void 0!==i?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(r=u.auth)&&void 0!==r?r:{},this.headers,u.global.fetch),this.fetch=ef(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new zd(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Vd(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Gp(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t,s,n,i;return s=this,i=function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null},new((n=void 0)||(n=Promise))((function(e,t){function r(e){try{a(i.next(e))}catch(e){t(e)}}function o(e){try{a(i.throw(e))}catch(e){t(e)}}function a(t){var s;t.done?e(t.value):(s=t.value,s instanceof n?s:new n((function(e){e(s)}))).then(r,o)}a((i=i.apply(s,[])).next())}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:r,lock:o,debug:a},l,h){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pg({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:r,lock:o,debug:a,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Sp(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=s}}(gg,mg,void 0));var gg,mg;function _g(){!async function(){const e=document.querySelector("#services .accordion");try{const{data:t,error:s}=await fg.from("services").select("title, description").order("id",{ascending:!0});if(s)throw s;e.innerHTML="",t.forEach((t=>{const s=document.createElement("li");s.className="accordion__item",s.innerHTML=`\n            <button class="accordion__btn btn-reset">\n            <span class="accordion__text">${Ld(t.title)}</span>\n            <span class="accordion__icon"></span>\n            </button>\n            <div class="accordion-box">\n            <p class="accordion-box__text">${Ld(t.description)}</p>\n            </div>`,e.append(s)}))}catch(t){console.error("Ошибка при загрузке услуги:",t),e.innerHTML="<li>Не удалось загрузить услуги. Пожалуйста, попробуйте позже.</li>"}}(),async function(){const e=document.querySelector("#questions .accordion");try{const{data:t,error:s}=await fg.from("questions").select("title, description").order("id",{ascending:!0});if(s)throw s;e.innerHTML="",t.forEach((t=>{const s=document.createElement("li");s.className="accordion__item",s.innerHTML=`\n            <button class="accordion__btn btn-reset">\n            <span class="accordion__text">${Ld(t.title)}</span>\n            <span class="accordion__icon"></span>\n            </button>\n            <div class="accordion-box">\n            <p class="accordion-box__text">${Ld(t.description)}</p>\n            </div>`,e.append(s)}))}catch(t){console.error("Ошибка при загрузке услуги:",t),e.innerHTML="<li>Не удалось загрузить услуги. Пожалуйста, попробуйте позже.</li>"}}(),function(){const e=document.querySelector(".modal");if(!e)return;const t=document.querySelectorAll(".open-modal"),s=document.querySelector(".modal__box"),n=document.querySelector(".modal__form"),i=document.querySelector(".modal__btn"),r=document.querySelectorAll(".form-data"),o=document.getElementById("tel"),a=o?ai(o,{mask:"+7(000)000-00-00",lazy:!1}):null,l=t=>{e.classList.toggle("open",t),document.body.style.overflow=t?"hidden":"visible",t&&a&&a.updateValue()},h=()=>{l(!1),n?.reset(),r.forEach((e=>{e.classList.remove("input-invalid");const t=e.parentElement.querySelector("error-message");t&&t.remove()}))},u=()=>{l(!0)},c=(e,t)=>{const s=e.parentElement.querySelector(".error-message");if(s&&s.remove(),t){const s=document.createElement("div");s.textContent=t,s.classList.add("error-message"),e.parentElement.append(s),e.classList.add("input-invalid")}else e.classList.remove("input-invalid")},d=e=>{if("checkbox"!==e.type&&(e.value=e.value.replace(/<[^>]*>/g,"").replace(/javascript:/gi,"").replace(/(https?:\/\/|www\.)\S+/gi,"")),"checkbox"===e.type){if(!e.checked)return c(e,"Необходимо согласие на обработку персональных данных"),!1}else if("tel"===e.name&&a){if(a.updateValue(),a.unmaskedValue.length<10)return c(e,"Телефон должен быть заполнен"),!1}else if(""===e.value.trim()){const t=e.placeholder||"Поле";return c(e,`${t} обязательно для заполнения`),!1}return c(e,""),!0},p=(e,t)=>{const s=document.createElement("div");s.classList.add("notify"),s.style.backgroundColor=t,s.textContent=e,document.body.append(s),Yn.from(s,{y:"-50",duration:1,ease:"power1.in"}),setTimeout((()=>{Yn.to(s,{y:-50,duration:.8,ease:"power1.out",onComplete:()=>s.remove()})}),3e3)},f=()=>{const e=new Date,t=e=>String(e).padStart(2,"0");return`${t(e.getDate())}.${t(e.getMonth()+1)}.${e.getFullYear()} ${t(e.getHours())}:${t(e.getMinutes())}`};t.forEach((e=>{e.addEventListener("click",u)})),s&&s.addEventListener("click",(e=>{e._isClickWithinModal=!0})),e.addEventListener("click",(e=>{e._isClickWithinModal||h()})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&h()})),r.forEach((e=>{e.addEventListener("input",(()=>d(e))),"checkbox"===e.type&&e.addEventListener("change",(()=>d(e)))})),i&&i.addEventListener("click",(async e=>{if(e.preventDefault(),(()=>{let e=!0;return r.forEach((t=>{d(t)||(e=!1)})),e})())try{const[e,t,s]=r,n={name:e.value,phone:t.value,message:s.value,date:f(),completed:!1},i=(e=>{const t=new Date,s=[t.getFullYear(),String(t.getMonth()+1).padStart(2,"0"),String(t.getDate()).padStart(2,"0")].join(""),n=[String(t.getHours()).padStart(2,"0"),String(t.getMinutes()).padStart(2,"0")].join(""),i=e.phone.replace(/\D/g,"").slice(-4);return`${s}-${n}-${e.name.charAt(0).toUpperCase()}${i}`})(n),o=xc(Rc,`orders/${i}`);if((await Ac(o)).exists()){n._originalId=i;const e=function(e){e=cr(e),Ku("push",e._path),Wu("push",void 0,e._path,!0);const t=tc(e._repo),s=wc(t),n=Ic(e,s),i=Ic(e,s);let r;return r=Promise.resolve(i),n.then=r.then.bind(r),n.catch=r.then.bind(r,void 0),n}(xc(database,"orders"));await Pc(e,n)}else await Pc(o,n);p("Данные отправлены","green"),h()}catch(e){console.error("Order submit error",e);const t=window.innerWidth<=576?"Произошла ошибка\nперезвоните по номеру +7(905)287-77-22":"Произошла ошибка";p(t,"red")}}))}(),function(){const e=document.querySelectorAll(".accordion__item"),t=(e,t=!1)=>{const s=e.classList.contains("active"),n=e.querySelector(".accordion__btn").nextElementSibling,i=window.innerWidth<576;if(s||t)return e.classList.remove("active"),n.style.maxHeight=null,void(n.style.marginBottom="0");e.classList.add("active");const r=n.scrollHeight;n.style.maxHeight=r+"px",n.style.paddingLeft=i?"11px":"27px",n.style.marginBottom=i?"20px":"28px",n.style.paddingRight=i?"11px":"27px",e.offsetHeight,n.style.maxHeight=n.scrollHeight+"px"},s=()=>{document.querySelectorAll(".accordion__item.active").forEach((e=>{const t=e.querySelector(".accordion__btn").nextElementSibling,s=window.innerWidth<576;t.style.maxHeight&&(t.style.maxHeight=t.scrollHeight+"px",t.style.paddingLeft=s?"11px":"27px",t.style.marginBottom=s?"20px":"28px",t.style.paddingRight=s?"11px":"27px",e.offsetHeight)}))};let n;document.addEventListener("click",(s=>{const n=s.target.closest(".accordion__btn");if(!n)return;const i=n.closest(".accordion__item");e.forEach((e=>{e!==i&&t(e,!0)})),t(i)})),window.addEventListener("resize",(()=>{clearTimeout(n),n=setTimeout(s,1e3)}))}(),async function(){const e=document.querySelector(".swiper-wrapper");try{Rd();const t=await fetch("./assets/json/example.json");if(!t.ok)throw new Error(`HTTP ошибка! статус: ${t.status}`);const{examples:s}=await t.json();if(!s||!Array(s)||0===s.length)throw new Error("Нет данных примеров");e.innerHTML="";const n=document.createDocumentFragment(),i=({title:e,mobileBeforeImage:t,mobileAfterImage:s,beforeImage:n,afterImage:i,tasks:r=[]})=>{const o=document.createElement("div");o.classList.add("example__slider-content","swiper-slide");const a=t?`<source media="(max-width: 576px)" srcset="${Ld(t)}">`:"",l=s?`<source media="(max-width: 576px)" srcset="${Ld(s)}">`:"";return o.innerHTML=`\n    <div class="example__photo">\n    <div class="example__before">\n    <picture>\n    ${a}\n    <img\n        class="example__img"\n        draggable="false"\n        srcset="${Ld(n)}"\n        alt="Фото до"\n        loading="lazy"\n        width="533"\n        height="531"\n      />\n    </picture>\n      \n      <div class="example__before-text">До</div>\n    </div>\n    <div class="example__after">\n    <picture>\n    ${l}\n    <img\n    <img\n    class="example__img"\n    draggable="false"\n    srcset="${Ld(i)}"\n    alt="Фото после"\n    loading="lazy"\n    width="533"\n    height="531"\n  />\n    </picture>\n     \n      <div class="example__after-text">После</div>\n    </div>\n    <div class="example__change">\n      <div class="example__btns">\n        <button class="example__btn btn-reset">\n          <svg class="example__slider-arrow slider-arrow">\n            <use xlink:href="img/sprite.svg#example--left-arrow"></use>\n          </svg>\n        </button>\n        <button class="example__btn btn-reset">\n          <svg class="example__slider-arrow slider-arrow">\n            <use xlink:href="img/sprite.svg#example--right-arrow"></use>\n          </svg>\n        </button>   \n      </div>\n    </div>\n  </div>\n  <div class="example__slider-inner">\n  <h3 class="example__slider-title">${Ld(e)}</h3>\n  <ul class="example__slider-list list-reset">\n  ${r.map((({title:e,text:t})=>`\n  <li class="example__slider-item">\n      <h4 class="example__slider-item-title">${Ld(e)}</h4>\n      <p class="example__slider-item-text">\n        ${Ld(t)}\n      </p>\n    </li>\n  `)).join("")}\n  </ul>\n</div>\n    `,o};s.forEach((e=>{n.append(i(e))})),e.append(n),new Md(".swiper-example",{modules:[Od],loop:!0,lazyPreloadPrevNext:1,allowTouchMove:!1,spaceBetween:30,speed:1e3,navigation:{nextEl:".swiper-button-custom-next",prevEl:".swiper-button-custom-prev"}}),document.querySelectorAll(".example__photo").forEach((e=>{const t=e.querySelector(".example__before"),s=t.querySelector(".example__img"),n=e.querySelector(".example__change");let i=!1;const r=()=>{s.style.width=`${e.offsetWidth}px`};function o(s){const i=e.getBoundingClientRect();let r=Math.max(0,Math.min(s-i.left,e.offsetWidth));t.style.width=`${r}px`,n.style.left=`${r}px`}function a(e){i=!0,o(e.clientX),e.preventDefault()}function l(e){i&&(o(e.clientX),e.preventDefault())}r(),window.addEventListener("resize",r);const h=()=>{i=!1};return e.addEventListener("pointerdown",a),document.addEventListener("pointermove",l),document.addEventListener("pointerup",h),document.addEventListener("pointercancel",h),()=>{window.removeEventListener("resize",r),e.removeEventListener("pointerdown",a),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",h),document.removeEventListener("pointercancel",h)}}))}catch(t){e.append(Dd(t.message))}}(),async function(){const e=document.querySelector(".comment__list");try{Rd();const{data:t,error:s}=await fg.from("comment").select("comment, name, city, image").order("id",{ascending:!0});if(s)throw s;if(!t||0===t.length)throw new Error("Нет доступных отзывов");t.forEach((t=>{const s=document.createElement("li");s.classList.add("comment__item","swiper-slide");const n=t.image?`<source media="(max-width: 768px)" srcset="${t.img768}">`:"",i=t.image?`<source media="(max-width: 430px)" srcset="${t.img430}">`:"";s.innerHTML=`\n            <picture>\n            ${n}\n            ${i}\n  \n<img\n        loading="lazy"\n        class="comment__item-img"\n        srcset="${t.image}"\n        alt="Фото отзыва"\n        width="336"\n        height="336"\n      />\n            </picture>\n        \n      <div class="comment__item-content">\n        <h3 class="comment__item-title">Отзыв:</h3>\n        <p class="comment__item-text">\n          ${t.comment}\n        </p>\n      </div>\n      <div class="comment__item-address">\n        <span class="comment__item-name">${t.name}, </span>\n        <span class="comment__item-city">${t.city}</span>\n      </div>\n        `,e.append(s)})),function(){const e={modules:[Od],spaceBetween:30,lazyPreloadPrevNext:2,speed:1e3,breakpoints:{320:{slidesPerView:1},576:{slidesPerView:2},1024:{slidesPerView:3}},navigation:{nextEl:".swiper-button-custom-next",prevEl:".swiper-button-custom-prev"}};data.length>=4?e.loop=!0:console.warn("Недастаточно слайдов для режима loop"),new Md(".swiper-comment",e)}()}catch(t){e.append(Dd(t.message))}}(),document.querySelector(".footer-copyright__year").textContent=(new Date).getFullYear()}document.addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.querySelector(".header"),t=document.querySelector(".header__nav"),s=document.querySelector(".header__contacts"),n="fixed",i=Yn.timeline({paused:!0}),r=Yn.timeline({paused:!0}),o=()=>i.fromTo(e,{y:"-100%"},{y:0,duration:.5,ease:"none"}),a=()=>{r.fromTo(t,{x:"-10px",autoAlpha:0},{x:0,duration:.8,delay:.5,autoAlpha:1,ease:"power4.out"},"content").fromTo(s,{x:"10px",autoAlpha:0},{x:0,duration:.8,delay:.5,autoAlpha:1,ease:"power4.out"},"content")};let l=window.scrollY,h=!1,u=!1;u=window.scrollY>=10,u?(e.classList.add(n),i.add(o()).play()):r.add(a()).play(),window.addEventListener("scroll",(()=>{l=window.scrollY,h||(window.requestAnimationFrame((()=>{const t=l>=10;t&&!u?(u=!0,e.classList.add(n),i.clear().add(o()).play()):!t&&u&&(u=!1,i.clear().add(i.fromTo(e,{y:0},{y:"-100%",duration:.5,ease:"none",onComplete:()=>{Yn.set(e,{y:0})}})).play().then((()=>{e.classList.remove(n),r.clear().add(a()).play()}))),h=!1})),h=!0)}),{passive:!0})}(),Kn(),window.requestIdleCallback?window.requestIdleCallback((()=>{_g()}),{timeout:2e3}):setTimeout(_g,500)}))})();